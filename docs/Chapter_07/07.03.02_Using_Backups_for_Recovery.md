#  **7.3.2 用备份来还原**

### **7.3.2 用备份来还原**

此刻，假设我们在周三早上八点发生了灾难性的崩溃，它需要从备份中还原。为了还原，我们首先需要重建最后一次做的全备份（周日下午一点的备份）。此全备份文件是一系列SQL语句的集合，因此重建它非常容易：

	shell> mysql < backup_sunday_1_PM.sql

这点上，数据将被重建到周日下午一点的状态。为了重建从那时起的变更，我们必须使用增量备份。那就是gbichot2-bin.000007和gbichot2-bin.000008二进制日志文件。从它们备份的的地方取得文件，然后像这样执行它们的内容：

	shell> mysqlbinlog gbichot2-bin.000007 gbichot2-bin.000008 | mysql

现在我们将数据还原到周二下午一点的状态，但是仍然丢失了那时到崩溃前的变更。为了不丢失它们，我们需要将MySQL服务器的二进制日志存储到安全的位置（RAID 磁盘，SAN，...）不同于它们数据存放的地方，因此这些日志并不在毁坏的磁盘上。（那就是，我们需要以--log-bin参数启动服务器，用此来确定不同物理设备上的位置它不同于数据目录所在位置。这样，这日志是安全的，即使磁盘包含的目录丢失。）如果我们这么做。我们将有gbichot2-bin.000009文件（和任何子序列文件）在，我们能够利用它们通过mysqlbinlog和mysql重建最近的变更的数据，直到没有损失崩溃的那一刻。

	shell> mysqlbinlog gbichot2-bin.000009 ... | mysql

使用mysqlbinlog执行二进制日志文件的更多信息，详见[7.5节，“使用二进制日志进行时间点还原”](./07.05.00_Point-in-Time_Incremental_Recovery_Using_the_Binary_Log.md)。