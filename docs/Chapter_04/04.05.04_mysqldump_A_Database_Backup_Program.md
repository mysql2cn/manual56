### 4.5.4. mysqldump―数据库备份程序

mysqldump客户端是一个进行逻辑备份的工具，生成SQL语句集，这些语句能重新执行来产生原来的数据库（schema）或表的数据或都有。它导出一个或多个MySQL数据库来备份会转移到其他SQL服务器。mysqldump命令还可以生成CSV、其他分隔符的文本或XML格式的输出。

mysqldump要求至少对要导出的表有SELECT权限，对视图有SHOW VIEW权限，对触发器有TRIGGER权限，如果--single-transaction选项指定了还需要LOCK TABLES权限。某些选项可能要求其他的没在选项描述中提到的权限。

要加载导出的文件，须必须有同样于使用CREATE语句手动建立每个导出对象的权限。

mysqldump的结果可以包含能修改数据库校对规则的ALTER DATABASE语句。这能用于当导出存储程序时保留它们的字符集编码。要加载包含这样的语句的导出文件，需要受影响数据库的ALTER权限。

性能和扩展性考虑

mysqldump的优点包括恢复前方便灵活的查看甚至编辑输出。你能够克隆数据库用于开发和DBA工作，或者对已有的数据库产生少量变化用于测试。它不期望于成为一个快速或可扩展的大量数据的备份方案。大量数据时，即使备份步骤会花合情合理的时间，恢复数据会非常慢，因为重演SQL语句涉及到磁盘I/O做插入、索引创建等等。

对大卷数据的备份和恢复，物理备份更恰当。复制数据文件的原有格式能做快速恢复。

* 如果表主要是InnoDB表，或者你混合InnoDB表和MyISAM表，考虑使用MySQL Enterprise Backup产品里的mysqlbackup命令。（是订购的Enterprise产品的一部分）它提供InnoDB备份的最好性能和最小破坏；它还可以备份MyISAM和其他存储引擎的表；并且它提供很多方便的选项来适应不同的备份场景。参考MySQL Enterprise Backup 用户指导手册（3.9.0版本）。

* 如果你的表主要是MyISAM表，考虑使用mysqlhotcopy，能获得比mysqldump做备份和恢复更好的性能。参考4.6.10节“mysqlhotcopy－数据库备份程序”。


mysqldump能够从表中一行一行的取内容并导出，或者从表中取整个数据并在导出之前缓冲在内存中。如果你在导出大表时，在内存缓冲数据可能是个问题。要一行一样导出，使用--quick选项（或者--opt，它开启--quick）。--opt这个选项（亦即--quick）默认是开启的，所以要在内存中缓冲数据，使用--skip-quick选项。

如果你使用最近版本的mysqldump来导出数据并用来加载到非常老的MySQL服务器中时，使用--skip-opt选项替代--opt或使用--extended-insert选项。

关于mysqldump更多的信息，请参考7.4节“使用mysqldump做备份”。

语法

总体上有三种使用mysqldump的方法－－要导出一个或多个表、一个或多个完整的数据库、或者整个MySQL服务器－－如下所示：

```shell
shell> mysqldump [options] db_name [tbl_name ...]
shell> mysqldump [options] --databases db_name ...
shell> mysqldump [options] --all-databases
```

要导出整个数据库的表，在db_name后不要指明任何表，或者使用--databases或--all-databases选项。

要看你的版本的mysqldump支持的选项列表，使用命令mysqldump --help。

选项语法－按字母序总结

mysqldump支持下列选项，它们可以在命令行或者在选项文件的[mysqldump]和[client]组中指定。mysqldump还支持在4.2.3.4节“影响选项文件处理的命令行选项”描述的用于处理选项文件的选项。

表4.7.mysqldump选项

<table summary="mysqldump Options" border="1"><colgroup><col class="format"><col class="config_file"><col class="description"><col class="introduced"></colgroup><thead><tr><th scope="col">格式</th><th scope="col">选项文件</th><th scope="col">描述</th><th scope="col">加入版本</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_add-drop-database">--add-drop-database</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_add-drop-database">add-drop-database</a></td><td>在每条CREATE DATABASE语句前添加DROP TADABASE语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_add-drop-table">--add-drop-table</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_add-drop-table">add-drop-table</a></td><td>在每条CREATE TABLE语句前面添加DROP TABLE语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_add-drop-trigger">--add-drop-trigger</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_add-drop-trigger">add-drop-trigger</a></td><td>在每条CRETE TRIGGER语句前面添加DROP TRIGGER语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_add-locks">--add-locks</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_add-locks">add-locks</a></td><td>使用LOCK TABLES和UNLOCK TABLES语句来包围每个导出的表</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_all-databases">--all-databases</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_all-databases">all-databases</a></td><td>导出所有数据库中的所有表</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_allow-keywords">--allow-keywords</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_allow-keywords">allow-keywords</a></td><td>允许创建命名为关键字的字段</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_apply-slave-statements">--apply-slave-statements</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_apply-slave-statements">apply-slave-statements</a></td><td>在CHANGE MASTER语句前包含STOP SLAVE语句，在输出结尾包含CHANGE MASTER语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_bind-address">--bind-address=ip_address</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_bind-address">bind-address</a></td><td>使用指定的网络接口来连接到MySQL服务器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_comments">--comments</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_comments">comments</a></td><td>在导出文件中添加注释</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_compact">--compact</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_compact">compact</a></td><td>产生再度压缩的输出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_compatible">--compatible=name[,name,...]</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_compatible">compatible</a></td><td>产生与其他数据库系统或老版本MySQL服务器像兼容的输出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_complete-insert">--complete-insert</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_complete-insert">complete-insert</a></td><td>使用包含列名的完整的INSERT语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_create-options">--create-options</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_create-options">create-options</a></td><td>在CREATE TABLE语句中包含所有MySQL特有的表选项</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_databases">--databases</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_databases">databases</a></td><td>导出很多数据库</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_debug">--debug[=debug_options]</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_debug">debug</a></td><td>写debug日志</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_debug-check">--debug-check</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_debug-check">debug-check</a></td><td>当程序退出时打印debug信息</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_debug-info">--debug-info</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_debug-info">debug-info</a></td><td>当程序退出时打印debug信息、内存和CPU统计信息</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_default-auth">--default-auth=plugin</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_default-auth">default-auth=plugin</a></td><td>要使用的认证插件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_default-character-set">--default-character-set=charset_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_default-character-set">default-character-set</a></td><td>使用charset_name作为默认字符集</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_delayed-insert">--delayed-insert</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_delayed-insert">delayed-insert</a></td><td>写INSERT DELAYED语句而不是INSERT语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_delete-master-logs">--delete-master-logs</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_delete-master-logs">delete-master-logs</a></td><td>在主复制服务器上，在进行导出操作后删除二进制日志</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_disable-keys">--disable-keys</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_disable-keys">disable-keys</a></td><td>对每张表，使用禁用和启用索引来包围在INSERT语句前后</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_dump-date">--dump-date</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_dump-date">dump-date</a></td><td>如果指定了--comment，则包含这样的注释“Dump completed on”</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_dump-slave">--dump-slave[=value]</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_dump-slave">dump-slave</a></td><td>包含列出了从库开始复制主库的二进制日志位置的CHANGE MASTER语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_events">--events</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_events">events</a></td><td>从要导出的库中导出event事件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_extended-insert">--extended-insert</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_extended-insert">extended-insert</a></td><td>使用包含多个VALUES列表的多行INSERT语法</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_fields">--fields-enclosed-by=string</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_fields">fields-enclosed-by</a></td><td>这个选项与--tab选项一起使用，它的意义与相应的LOAD DATA INFILE语法一样</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_fields">--fields-escaped-by</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_fields">fields-escaped-by</a></td><td>这个选项与--tab选项一起使用，它的意义与相应的LOAD DATA INFILE语法一样</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_fields">--fields-optionally-enclosed-by=string</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_fields">fields-optionally-enclosed-by</a></td><td>这个选项与--tab选项一起使用，它的意义与相应的LOAD DATA INFILE语法一样</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_fields">--fields-terminated-by=string</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_fields">fields-terminated-by</a></td><td>这个选项与--tab选项一起使用，它的意义与相应的LOAD DATA INFILE语法一样</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_flush-logs">--flush-logs</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_flush-logs">flush-logs</a></td><td>开始导出前刷MySQL服务器日志</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_flush-privileges">--flush-privileges</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_flush-privileges">flush-privileges</a></td><td>导出mysql数据库以后发送FLUSH PRIVILEGES语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_help">--help</a></td><td>&nbsp;</td><td>显示帮助信息并退出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_hex-blob">--hex-blob</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_hex-blob">hex-blob</a></td><td>使用十六进制符号（比如'abc'变成0x616264）导出二进制列</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_host">--host</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_host">host</a></td><td>用于连接的主机（IP地质或者主机名）</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ignore-table">--ignore-table=db_name.tbl_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ignore-table">ignore-table</a></td><td>不要导出给定的表</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_include-master-host-port">--include-master-host-port</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_include-master-host-port">include-master-host-port</a></td><td>当使用--dump-slave时包含CHANGE MASTER语句中的MASTER_HOST/MASTER_PORT选项</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_insert-ignore">--insert-ignore</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_insert-ignore">insert-ignore</a></td><td>写INSERT IGNORE语句而不是INSERT</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_lines-terminated-by">--lines-terminated-by=string</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_lines-terminated-by">lines-terminated-by</a></td><td>这个选项与--tab选项一起使用，它的意义与相应的LOAD DATA INFILE语法一样</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_lock-all-tables">--lock-all-tables</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_lock-all-tables">lock-all-tables</a></td><td>锁住所有数据库的所有表</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_lock-tables">--lock-tables</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_lock-tables">lock-tables</a></td><td>在导出表之前锁住它们所有表</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_log-error">--log-error=file_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_log-error">log-error</a></td><td>追加警告和错误到指名的文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="option-file-options.html#option_general_login-path">--login-path=name</a></td><td>&nbsp;</td><td>从.mylogin.cnf读取登入路径选项</td><td>5.6.6</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_master-data">--master-data[=value]</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_master-data">master-data</a></td><td>把二进制文件名和位置写进输出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_max_allowed_packet">--max_allowed_packet=value</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_max_allowed_packet">max_allowed_packet</a></td><td>从服务器收发的最大包的长度</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_net_buffer_length">--net_buffer_length=value</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_net_buffer_length">net_buffer_length</a></td><td>TCP/IP和套接字通信的最大缓冲大小</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_no-autocommit">--no-autocommit</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_no-autocommit">no-autocommit</a></td><td>对每个导出表的INSERT语句包围SET auto commit＝0和COMMIT语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_no-create-db">--no-create-db</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_no-create-db">no-create-db</a></td><td>这个选项抑制产生CREATE DATABASE 语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_no-create-info">--no-create-info</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_no-create-info">no-create-info</a></td><td>不要写下用来重建每张表的CREATE TABLE语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_no-data">--no-data</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_no-data">no-data</a></td><td>不要导出表的内容</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_no-set-names">--no-set-names</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_no-set-names">no-set-names</a></td><td>同--skip-set-charset</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_no-tablespaces">--no-tablespaces</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_no-tablespaces">no-tablespaces</a></td><td>不要在输出中写任何CREATE LOGFILE GROUP或CREATE TABLESPACE 语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_opt">--opt</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_opt">opt</a></td><td>对--add-drop-table --add-locks --create-options --disable-keys --extended-insert --lock-tables --quick --set-charset的简写.</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_order-by-primary">--order-by-primary</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_order-by-primary">order-by-primary</a></td><td>按每张表的逐渐或者第一个唯一索引有序导出数据行</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_password">--password[=password]</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_password">password</a></td><td>连接到服务器使用的密码</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_pipe">--pipe</a></td><td>&nbsp;</td><td>在Windows上使用命名管道连接到服务器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_plugin-dir">--plugin-dir=path</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_plugin-dir">plugin-dir=path</a></td><td>插件所在的目录</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_port">--port=port_num</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_port">port</a></td><td>用于连接的TCP/IP端口号</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_protocol">--protocol=type</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_protocol">protocol</a></td><td>要使用的连接协议</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_quick">--quick</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_quick">quick</a></td><td>从服务器一次一行的取表的数据</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_quote-names">--quote-names</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_quote-names">quote-names</a></td><td>给关键字加反引号</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_replace">--replace</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_replace">replace</a></td><td>写REPLACE语句而不是INSERT语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_result-file">--result-file=file</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_result-file">result-file</a></td><td>将输出定向到指定文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_routines">--routines</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_routines">routines</a></td><td>从要导出的数据库中导出存储例程（过程和函数）</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_set-charset">--set-charset</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_set-charset">set-charset</a></td><td>给输出添加SET NAMES default_character_set</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_set-gtid-purged">--set-gtid-purged=value</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_set-gtid-purged">set-gtid-purged</a></td><td>是否添加SET @@GLOBAL.GTID_PURGED到输出中</td><td>5.6.9</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_single-transaction">--single-transaction</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_single-transaction">single-transaction</a></td><td>这个选项在从服务器导出之前提交一个BEGIN SQL语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_add-drop-table">--skip-add-drop-table</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_add-drop-table">skip-add-drop-table</a></td><td>不要在每个CREATE TABLE语句之前添加DROP TABLE语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_add-locks">--skip-add-locks</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_add-locks">skip-add-locks</a></td><td>不要加锁</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_skip-comments">--skip-comments</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_skip-comments">skip-comments</a></td><td>不要添加注释到导出文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_compact">--skip-compact</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_compact">skip-compact</a></td><td>不要生成更压缩的输出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_disable-keys">--skip-disable-keys</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_disable-keys">skip-disable-keys</a></td><td>不要禁用索引</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_extended-insert">--skip-extended-insert</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_extended-insert">skip-extended-insert</a></td><td>关闭extended-insert</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_skip-opt">--skip-opt</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_skip-opt">skip-opt</a></td><td>关闭--opt选项打开的功能集</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_quick">--skip-quick</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_quick">skip-quick</a></td><td>不要从服务器一次一行的取表的数据</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_quote-names">--skip-quote-names</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_quote-names">skip-quote-names</a></td><td>不要引用关键字</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_set-charset">--skip-set-charset</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_set-charset">skip-set-charset</a></td><td>抑制SET NAMES语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_triggers">--skip-triggers</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_triggers">skip-triggers</a></td><td>不要导出触发器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_tz-utc">--skip-tz-utc</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_tz-utc">skip-tz-utc</a></td><td>关闭tz-utc</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_socket">--socket=path</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_socket">socket</a></td><td>用于连接到本机</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ssl">--ssl-ca=file_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ssl">ssl-ca</a></td><td>包含受信SSL CA的文件的路径</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ssl">--ssl-capath=dir_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ssl">ssl-capath</a></td><td>包含PEM格式认证的受信SSL CA目录的路径</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ssl">--ssl-cert=file_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ssl">ssl-cert</a></td><td>用于建立安全连接的SSL认证文件名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ssl">--ssl-cipher=cipher_list</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ssl">ssl-cipher</a></td><td>允许用于SSL加密的密码列表</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ssl">--ssl-crl=file_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ssl">ssl-crl</a></td><td> 包含认证撤销列表的文件的路径</td><td>5.6.3</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ssl">--ssl-crlpath=dir_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ssl">ssl-crlpath</a></td><td> 包含认证撤销列表文件的目录的路径</td><td>5.6.3</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ssl">--ssl-key=file_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ssl">ssl-key</a></td><td> 建立安全连接使用的SSL文件名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_ssl">--ssl-verify-server-cert</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_ssl">ssl-verify-server-cert</a></td><td>当连接服务器时，认证的服务器Common Name值，用于验证主机名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_tab">--tab=path</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_tab">tab</a></td><td>生成制表符分隔的数据文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_tables">--tables</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_tables">tables</a></td><td>覆盖--databases或-B选项</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_triggers">--triggers</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_triggers">triggers</a></td><td>导出每个要导出的表上的触发器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_tz-utc">--tz-utc</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_tz-utc">tz-utc</a></td><td>添加SET TIME_ZONE='+00:00'到导出文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_user">--user=user_name</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_user">user</a></td><td>连接到服务器时使用的MySQL用户名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_verbose">--verbose</a></td><td>&nbsp;</td><td>详细模式</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_version">--version</a></td><td>&nbsp;</td><td>显示版本信息并退出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_where">--where='where_condition'</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_where">where</a></td><td>仅导出where条件选定的行</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysqldump.html#option_mysqldump_xml">--xml</a></td><td><a class="link" href="mysqldump.html#option_mysqldump_xml">xml</a></td><td>生成XML输出</td><td>&nbsp;</td></tr></tbody></table>

连接选项

mysqldump命令登陆到MySQL服务器去取信息。下面的选项指定怎样连接到MySQL服务器，要么是同一台机器，要么是远程系统。

* --bind-address=ip_address

  在一台有多个网络接口的计算机上，这个选项能用于在连接到MySQL服务器时选择使用哪个接口。

  这个选项从MySQL5.6.1开始支持。

* --compress, -C

  压缩客户端与服务器之间发送的所有信息，如果都支持压缩的话。

* --default-auth=plugin

  要使用的客户端侧的认证插件。参考6.3.7节“插拔式认证”。

* --host=host_name, -h host_name

  从给定的主机上的MySQL服务器导出数据。默认主机时localhost。

* --passport[=password], -p [password]

  连接服务器时使用的密码。如果你使用短格式格式（-p），在选项与密码之间不能有空白。如果你在命令行--password或-p选项后忽略password，mysqlcheck会提示输入一个。

  在命令行指明密码应当视为不安全的。参考6.1.2.1节“终端用户的密码安全直到”。你可以使用选项文件来避免在命令行给出密码。

* --pipe, -W

  在Windows系统，使用命名管道连接到服务器。这个选项仅适用于服务器支持命名管道连接。

* --plugin-dir=path

  查找插件的目录。如果使用了--default-auth选项来指定认证插件但mysqlcheck没有找到它时，有必要指定这个选项。参考6.3.7节“插拔式认证”。

* --port=port_num, -P port_num

  用于连接的TCP/IP端口号。

* --protocol={TCP|SOCKET|PIPE|MEMORY}

  连接服务器使用的连接协议。当其他连接参数通常会导致使用不同于你期望的协议时，这就很有用。关于允许值
的详细，参考4.2.2节“连接到MySQL服务器”。

* --socket=path, -S path

  连接到localhost时，要使用的Unix socket文件或者Windows下的命名管道名。

* --ssl*

  以--ssl开始的选项指示是否采用SSL连接服务器，以及指明在哪里查找SSL key和认证。参考6.3.9.4“SSL命令选>项”。

* --user=user_name, -u user_name

  当连接到服务器时要使用的MySQL用户名。

你还可以使用--var_name=value语法来设置一下变量：

* max_allowed_packet

  用于客户端/服务器通信的最大缓冲大小。默认值是24MB，最大值是1GB。

* net_buffer_length

  客户端/服务器通信的初始缓冲大小。当创建多行INSERT语句（如使用--extended-insert或者--opt选项时），mysqldump创建大至net_buffer_length长度的行。如果你提高这个变量，确保MySQL服务器中的net_buffer_length这个变量至少是这么大。

DDL 选项

mysqldump的使用场景包括搭建一整个全新的MySQL实例（包括数据库表），并且用存在的数据库和表替换现存实例中的数据。下面的选项使你指定当恢复到处数据时哪些要撤除并建立，采用在导出文件中包围各种DDL语句。

* --add-drop-database

  在每个CREATE DATABASE语句前加一个DROP DATABASE语句。这个选项典型的用于和--all-databases或--databases选项一起使用，因为没有CREATE DATABASE语句会写下来，除非这些参数之一被使用。

* --add-drop-table

  在每个CREATE TABLE语句前添加DROP TABLE语句。

* --add-drop-trigger

  在每个CREATE TRIGGER语句前添加DROP TRIGGER语句。

* --all-tablespaces, -Y

  使用NDB表时，添加所有用于创建任意表空间的SQL语句。否则这些信息不会包含在mysqldump得输出中。这个选项当前仅跟MySQL Cluster表有关联。

* --no-create-db, -h

  这个选项抑制CREATE DATABASE语句，否则它们在指定--databases或--all-databases选项时会包含在输出中。

* --no-create-info, -t

  不要写重建每个导出表的CREATE TABLE语句。

  提示
  这个选项不会从mysqldump输出中排除创建日志文件组合表空间的语句；然而，你可以使用--no-tablespaces选项来达到目的。

* --no-tablespaces, -Y

  这个选项在mysqldump的输出中抑制所有CREATE LOGFILE GROUP和CREATE TABLESPACE语句。

* --replace

  写REPLACE语句而不是INSERT语句

调试选项

下面的选项打印调试信息，把调试信息编进导出文件，或者让导出操作无视可能问题的进行。

* --allow-keywords

  允许创建名为关键字的列。这依靠在每个列名前添加表名。

* --comments, -i

  在导出文件中写额外的信息如程序版本、服务器版本和主机名。这个选项默认是启用的。要抑制这个额外信息，使用--skip-cmments。

* --debug[=debug_options], -# [debug_options]

  写调试日志。典型的debug_options字符串是‘d:t:o,file_name’。默认值是‘d:t:o,/tmp/mysqldump.trace’。

* --debug-check

  当程序退出是打印一些debug信息。

* --debug-info

  当程序退出时打印debug信息、内存和CPU使用的统计信息。

* --dump-date

  如果给出了--comments选项，mysqldump在导出末尾是生成一条这样的注释：

  ```
  -- Dump completed on DATE
  ```
  然而，这个时间导致导出文件不同时间看上去不同，及时数据确实是等同的。--dump-date和--skip-dump-date控制时间是否加入注释。默认是--dump-date（在注释中包括时间）。--skip-dump-date抑制打印时间。

* --force, -f

  当导出表时，即使繁盛SQL错误依然继续执行。

  这个选项的一个用途是，使mysqldump遇到视图其定义中引用的表被删除二变为无效时，依然继续执行。没有--force，mysqldump以错误信息退出。有--force，mysqldump导引错误信息，但它写下包含视图定义的注释到导出结果中并继续执行。

* --log-error=file_name

  追加到指名文件的方式记录警告和错误日志。默认是不记录日志。

* --skip-comments

  参考--comments选项的描述。

* --verbose, -v

  详细模式。打印更多关于程序行为的信息。

帮助选项
下列选项显示mysqldump命令自身的信息。

* --help, -?

  显示帮助信息并退出。

* --version, -V

  显示版本信息并退出。

国际化选项
下列选项修改mysqldump命令使用国际语言设置来表示字符数据的方式。

* --character-sets-dir=path

  字符集的安装目录。参考10.5节“字符集配置”。

* --default-character-set=charset_name

  使用charset_name作为默认的字符集。参考10.5节“字符集配置”。如果没有指定字符集，mysqldump使用utf8，早期版本使用latin1。

* --no-set-names, -N

  关闭--set-charset设置，与--skip-set-charset一样。

* --set-charset

  添加SET NAMES default_character_set到输出。这个选项默认开启。要抑制SET NAMES语句，使用--skip-set-charset。

复制选项
mysqldump命令频繁的用于在复制配置中的从服务器上，创建空实例，或者包含数据的实例。下列选项用于在主和从服务器上导出和恢复数据。

* --apply-slave-statements

  对一个在从库上使用--dump-slave选项产生的导出结果，在CHANGE MASTER TO语句前添加STOP SLAVE语句，在输出的末尾添加START SLAVE语句。

* --delete-master-logs

  在一个主复制服务器，在完成导出操作后，以发送PURGE BINARY LOGS语句给服务器的方式删除二进制日志。这个选项自动开启--master-data。

* --dump-slave[=value]

  这个选项与--master-data类似，除了它用于导出一个复制从服务器，来生成导出文件，能用于搭建与导出从服务器有相同主的另一个从服务器。它导致导出结果包含CHANGE MASTER TO语句来指明被导出的从库的主库（而不是被导出服务器的坐标，就像--master-data选项所做的）的而精致日志坐标（文件名和位置）。这是从库应当开始复制的主库的坐标。

  这个选项值处理方法于--master-data相同，并与--master-data在启用或禁用其他选项及在锁处理方面有同样的效果。

  这个选项导致mysqldump在导出前停止从库的SQL进程并在其后重新打开它。

  结合--dump-slave，--apply-slave-statements和--include-master-host-port选项也可以使用。

* --include-master-host-port

  在从库使用--dump-slave选项生成的CHANGE MASTER TO语句，添加表示从库的主库的主机名和TCP/IP端口号的MASTER_HOST和MASTER_PORT选项。

* --master-data=[value]

  使用这个选项导出主复制服务器，来生成导出文件用于搭建另一个作为这个主库的从库的服务器。它导致导出结果包含能指示被导出服务器二进制日志坐标（文件名和位置）的CHANGE MASTER TO语句。这是主服务器的坐标，从它开始，你加载导出文件到从库后应当开始复制。

  如果这个选项值是2，CHANGE MASTER TO语句以SQL注释的形式写下来，因此仅用于提示。它在导出文件被加载时没有任何影响。如果这个选项值是1，这个语句不是写作注释并在导出文件被加载时有影响。如果没有指定值，默认值是1。

  这个选项uyaoRELOAD权限并且必须开启二进制日志。

  --master-data选项自动关闭--lock-tables，
