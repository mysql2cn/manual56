# 4.5.1. mysql—MySQL 命令行工具

### 4.5.1. mysql—MySQL 命令行工具

mysql是一个简单的带有输入行编辑能力的SQL命令解析器。它支持交互和非交互式使用。当交互式使用时，查询结果以ASCII表格式展示。当非交互模式（例如作为过滤器）时，结果以制表符分隔格式展现。输出格式可以通过命令选项修改。

如果你遇到内存不足够保持大结果集的问题，使用--quick选项。这会强制mysql从服务器一次一行的去结果，而不是取整个结果集并在展示前缓冲在内存中。这个功能的实现依赖于使用客户端/服务器库中的mysql_use_result()C API函数，而不是mysql_store_result()函数。

使用mysql非常简单。像如下这样在命令提示符中调用它：
```shell
shell> mysql db_name
```
或者：
```shell
shell> mysql --user=user_name --password=your_password db_name
```
然后键入SQL语句，用“;"、\g或者\G结尾，再按Enter键

键入Control+C使mysql尝试杀死当前的语句。如果不能成功，或者语句被杀死之前再次键入Control+C，mysql则退出。

你可以像这样执行一个脚本文件中的SQL语句：
```shell
shell> mysql db_name < script.sql > output.tab
```

在Unix系统上，mysql客户端交互式记录被执行的语句到历史文件。参见章节4.5.1.3 "mysql日志记录"。

#### 4.5.1.1.mysql选项
mysql支持以下选项，这些选项可以在命令行中指定，或者在参数文件的[mysql]和[client]段中指定。mysql同样支持解析参数文件的选项，在章节4.2.3.4“影响参数文件解析的命令行选项”

表4.4.mysql选项
<table summary="mysql Options" border="1"><colgroup><col class="format"><col class="config_file"><col class="description"><col class="introduced"></colgroup><thead><tr><th scope="col">格式</th><th scope="col">参数文件</th><th scope="col">描述</th><th scope="col">加入参数的版本</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_auto-rehash">--auto-rehash</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_auto-rehash">auto-rehash</a></td><td>启用自动补全</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_auto-vertical-output">--auto-vertical-output</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_auto-vertical-output">auto-vertical-output</a></td><td>启用自动垂直展示结果集</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_batch">--batch</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_batch">batch</a></td><td>不使用历史文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_binary-mode">--binary-mode</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_binary-mode">binary-mode</a></td><td>禁用\r\n至\n的转换，并视\0为查询结尾标志</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_bind-address">--bind-address=ip_address</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_bind-address">bind-address</a></td><td>使用特定的网络接口连接MySQL服务器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_character-sets-dir">--character-sets-dir=path</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_character-sets-dir">character-sets-dir</a></td><td>设置默认字符集</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_column-names">--column-names</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_column-names">column-names</a></td><td>在结果中写入列名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_column-type-info">--column-type-info</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_column-type-info">column-type-info</a></td><td>显示结果集元数据</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_comments">--comments</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_comments">comments</a></td><td>是否保留或去掉发送给服务器的语句中的注释</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_compress">--compress</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_compress">compress</a></td><td>压缩客户端和服务器之间发送的所有信息</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_connect-expired-password">--connect-expired-password</a></td><td>&nbsp;</td><td>指示服务器客户端能够处理密码过期的沙盒模式</td><td>5.6.12</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_connect_timeout">--connect_timeout=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_connect_timeout">connect_timeout</a></td><td>连接超时之前的秒数</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_database">--database=dbname</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_database">database</a></td><td>要使用的数据库</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_debug">--debug[=debug_options]</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_debug">debug</a></td><td>写debug日志</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_debug-check">--debug-check</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_debug-check">debug-check</a></td><td>当程序退出时打印debug信息</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_debug-info">--debug-info</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_debug-info">debug-info</a></td><td>当程序退出时打印debug信息、内存和CPU统计数据</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_default-auth">--default-auth=plugin</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_default-auth">default-auth=plugin</a></td><td>要是用的认证插件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_default-character-set">--default-character-set=charset_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_default-character-set">default-character-set</a></td><td>使用这个字符集作为默认字符集</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_delimiter">--delimiter=str</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_delimiter">delimiter</a></td><td>设置语句分隔符</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_enable-cleartext-plugin">--enable-cleartext-plugin</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_enable-cleartext-plugin">enable-cleartext-plugin</a></td><td>启用明文认证插件</td><td>5.6.7</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_execute">--execute=statement</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_execute">execute</a></td><td>执行这个语句并退出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_force">--force</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_force">force</a></td><td>即使有SQL语句错误也继续执行</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_help">--help</a></td><td>&nbsp;</td><td>展示帮助信息并退出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_histignore">--histignore=pattern_list</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_histignore">histignore</a></td><td>指定哪些语句要忽略记录日志的范式规则Patterns specifying which statements to ignore for logging</td><td>5.6.8</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_host">--host=host_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_host">host</a></td><td>连接到指定主机上的MySQL服务器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_html">--html</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_html">html</a></td><td>生成HTML输出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ignore-spaces">--ignore-spaces</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ignore-spaces">ignore-spaces</a></td><td>忽略函数名后的空白</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_init-command">--init-command=str</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_init-command">init-command</a></td><td>连接后要执行的SQL语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_line-numbers">--line-numbers</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_line-numbers">line-numbers</a></td><td>写下错误的行信息</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_local-infile">--local-infile[={0|1}]</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_local-infile">local-infile</a></td><td>启用或禁用本地的LOAD TATA INFILE</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="option-file-options.html#option_general_login-path">--login-path=name</a></td><td>&nbsp;</td><td>从.mylogin.cnf读取登入路径选项</td><td>5.6.6</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_max_allowed_packet">--max_allowed_packet=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_max_allowed_packet">max_allowed_packet</a></td><td>从服务器发送或接收的最大允许的包长度</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_max_join_size">--max_join_size=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_max_join_size">max_join_size</a></td><td>当使用--safe-updates时自动限制表连接中的行数</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_named-commands">--named-commands</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_named-commands">named-commands</a></td><td>启用全名的mysql命令</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_net_buffer_length">--net_buffer_length=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_net_buffer_length">net_buffer_length</a></td><td>TCP/IP及socket通信的缓冲大小</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_no-auto-rehash">--no-auto-rehash</a></td><td>&nbsp;</td><td>禁用自动补全</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_no-beep">--no-beep</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_no-beep">no-beep</a></td><td>发生错误时禁止蜂鸣</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_one-database">--one-database</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_one-database">one-database</a></td><td>忽略除命令行指定数据库名之外库的语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_pager">--pager[=command]</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_pager">pager</a></td><td>使用给出的命令做查询分页器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_password">--password[=password]</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_password">password</a></td><td>连接数据库时使用的密码</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_pipe">--pipe</a></td><td>&nbsp;</td><td>在Windows上, 使用命名管道连接数据库</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_plugin-dir">--plugin-dir=path</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_plugin-dir">plugin-dir=path</a></td><td>插件目录</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_port">--port=port_num</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_port">port</a></td><td>用户连接数据库的TCP/IP端口号</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_prompt">--prompt=format_str</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_prompt">prompt</a></td><td>设置提示符为特定格式</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_protocol">--protocol=type</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_protocol">protocol</a></td><td>连接使用的协议</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_quick">--quick</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_quick">quick</a></td><td>不缓存每个查询结果</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_raw">--raw</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_raw">raw</a></td><td>不做转义转换打印出列值</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_reconnect">--reconnect</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_reconnect">reconnect</a></td><td>如果到服务器的连接断开，自动重连</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_safe-updates">--safe-updates</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_safe-updates">safe-updates</a></td><td>只允许指定where值的UPDATE和DELET语句执行</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_secure-auth">--secure-auth</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_secure-auth">secure-auth</a></td><td>不以旧格式（4.1.1之前）发送密码给服务器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_select_limit">--select_limit=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_select_limit">select_limit</a></td><td>当使用--safe-updates时，自动限制SELECT语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_server-public-key-path">--server-public-key-path=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_server-public-key-path">server-public-key-path=file_name</a></td><td>展示帮助信息并退出</td><td>5.6.6</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_show-warnings">--show-warnings</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_show-warnings">show-warnings</a></td><td>如果每条语句执行后有警告，则显示警告</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_sigint-ignore">--sigint-ignore</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_sigint-ignore">sigint-ignore</a></td><td>忽略SIGINT信号（典型的Control+C结果）</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_silent">--silent</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_silent">silent</a></td><td>安静模式</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_auto-rehash">--skip-auto-rehash</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_auto-rehash">skip-auto-rehash</a></td><td>禁用自动补全</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_skip-column-names">--skip-column-names</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_skip-column-names">skip-column-names</a></td><td>结果中不列出列名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_skip-line-numbers">--skip-line-numbers</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_skip-line-numbers">skip-line-numbers</a></td><td>跳过错误的行的值</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_named-commands">--skip-named-commands</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_named-commands">skip-named-commands</a></td><td>禁用全名的mysql命令</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_pager">--skip-pager</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_pager">skip-pager</a></td><td>禁用分页</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_reconnect">--skip-reconnect</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_reconnect">skip-reconnect</a></td><td>禁用重连</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_socket">--socket=path</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_socket">socket</a></td><td>连接localhost数据库</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-ca=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-ca</a></td><td>包含受信的SSL CA的文件路径</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-capath=dir_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-capath</a></td><td>包含可信的PEM格式的SSL CA认证的目录</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-cert=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-cert</a></td><td>用于建立安全连接的SSL认证文件名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-cipher=cipher_list</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-cipher</a></td><td>允许用于SSL加密的密码列表</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-crl=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-crl</a></td><td>包含认证撤销列表文件的路径</td><td>5.6.3</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-crlpath=dir_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-crlpath</a></td><td>包含认证撤销列表目录的路径</td><td>5.6.3</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-key=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-key</a></td><td>用于建立安全连接的SSL文件名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-verify-server-cert</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-verify-server-cert</a></td><td>当连接服务器时，用于验证主机的公共名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_table">--table</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_table">table</a></td><td>以制表格式展示结果</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_tee">--tee=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_tee">tee</a></td><td>追加输出的副本到指定文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_unbuffered">--unbuffered</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_unbuffered">unbuffered</a></td><td>每次查询后清除缓存</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_user">--user=user_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_user">user</a></td><td>用于连接服务器的MySQL用户名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_verbose">--verbose</a></td><td>&nbsp;</td><td>详细模式</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_version">--version</a></td><td>&nbsp;</td><td>展示版本信息并退出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_vertical">--vertical</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_vertical">vertical</a></td><td>垂直输出查询结果。（每列输出为一行）</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_wait">--wait</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_wait">wait</a></td><td>如果连接不能建立，则等待并重试，而非取消</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_xml">--xml</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_xml">xml</a></td><td>生成XML的输出</td><td>&nbsp;</td></tr></tbody></table>

* --help, -?

  展示帮助信息并退出。

* --auto-rehash

  启用自动补全。这个选项默认开启，使得数据库、表和字段名补全。使用--disable-auto-rehash禁用自动补全。这样mysql启动更快，但如果需要使用名字补全你必须发出rehash命令。
要补全名，输入第一部分并按Tab键。如果名字是唯一的，mysql自动补全。否则，你可以再次按Tab查看可能的以刚输入为首的名字。如果没有确实数据库，自动补全不生效。

* --auto-vertical-output

  如果结果集对当前的窗口来说太宽，则垂直方式展示结果，否则使用正常制表格式显示。（适用于以;和\G结尾的语句）

* --batch, -B

  以制表符分隔输出结果，每行数据在一行。有这个参数时，mysql不使用历史记录文件。
批量模式产生非制表格式的输出，并转移特殊字符。使用raw模式禁用字符转义，参见--raw参数的描述。

* --binary-mode

  这个选项有助于处理mysqlbinlog产生的可能包含BLOB值的输出。缺省的，mysql转换语句中的\r\n为\n，并视\0为语句结束符。--binary-mode禁用这个特性。它还在非交互模式（管道输入到mysql，或者使用source命令）下禁用所有除charset和delimiter之外的mysql命令。
这个选项在5.6.3被加入。

* --bind-address=ip_address

  在一台有多个网络接口的计算机上，这个选项可用于选择采用哪个接口来连接MySQL服务器。
这个选项从5.6.1开始支持。

* --character-set-dir=path

  字符集的安装目录。参考10.5节“字符集设置”。

* --column-names

  在结果中输出列名。

* --column-type-info, -m

  展示结果集元数据。

* --comments, -c

  是否保留发送给服务器的语句中的注释。默认是--skip-comments（丢弃注释），用--comments启用（保留注释）

* --connect-expired-password

  指示服务器客户端可以处理发送给服务器的密码过期设置。这对非交互式mysql调用很有用，因为一般的，服务器会断开试图非交互式客户端使用有密码过期设置的账号重连数据库。（参见6.3.6节，“密码过期和沙盒模式”）。这个选项在MySQL5.6.12加入。

* --database=db_name, -D db_name

 要使用的数据库。主要在参数文件中有用。

* --debug[=debug_options], -# [debug_options]

  写调试日志。典型的debug_options字符串是'd:t:o, file_name'。默认是'd:t:o,/tmp/mysql.trace'。

* --debug-check

  当程序退出时打印一些调试信息。

* --debug-info, -T

  程序退出时打印调试信息和内存及CPU使用统计数据。

* --default-auth=plugin

  客户端侧要使用的认证插件。参见6.3.7节，“插拔式认证”。

* --default-character-set=charset_name

  使用charset_name作为客户端和连接的默认字符集。
操作系统使用utf8或者别的多字节字符集是常出现的一个场景是，从mysql客户端的输出被不正确的格式化，因为MySQL客户端默认使用latin1字符集。往往可以使用这个选项强制客户端使用系统字符集来应对前面的问题。
参考10.5节“字符集设置”更多详情。

* --delimiter=str

  设置语句的分隔符。默认分隔符石句号（“；”）。

* --disable-named-commands

  禁用命名指令。仅使用\*格式，或者仅在命令在行首开始以句号结尾时使用。mysql默认启动时启用这个选项。然而，即使有这个选项，长格式的命令在第一行依然生效。参考4.5.1.2节，”mysql 命令“。

* --enable-cleartext-plugin

  启用mysql_clear_password明文认证插件。（参考6.3.7.7节，“客户端侧的明文认证插件”）。这个选项在MySQL5.6.7版本加入。

* --execute=statement, -e statement

  执行命令并退出。默认的输出格式与--batch模式生成的类似。参考4.2.3.1节“在命令行使用参数“的例子。有这个参数时，mysql不使用历史文件。

* --force，－f

  即使发生SQL错误依然继续事件。

* --histignore

  逗号分割的用于指示语句忽略记日志的一个或多个范式。这些范式添加到默认的范式列表（"IDENTIFIED*:*PASSWORD"）。这个选项指定的值影响语句纪录到历史文件。更多的信息，参见4.5.1.3节”mysql 记日志“。这个选项在MySQL5.6.8中加引入。

* --host＝host_name，－h host_name

  连接到指定主机的MySQL服务器上。

* --html，－H

  生成HTML格式结果。

* --ignore-spaces, -i

  忽略函数名后的空白。它的影响在IGNORE_SPACE SQL模式讨论中介绍（参考5.1.7节“服务器SQL模式”）

* --init-command=str

  连接服务器后执行的SQL语句。如果启用自动重连，这个语句重连后再次执行。

* --line-numbers

  写下错误的行号。使用--skip-line-numbers来禁用。

* --local-infile[={0|1}]

  启用或禁用LOCAL的 LOAD DATA INFILE功能。不给值，选项启用LOCAL。这个选项可以使用--local-infile=0或--local-infile=1显式启用或禁用LOCAL。如果服务器不支持，启用LOCAL没有效果。

* --named-commands, -G

  启用命名mysql命令。允许长格式的命令，而不只是段格式命令。比如quit和\g都能识别。使用--skip-named-commands来禁用命名mysql命令。参考4.5.1.2节“mysql命令”。

* --no-auto-rehash, -A

  这与--skip-auto-rehash有同样的效果。参考--auto-rehash的描述。

* --no-beep, -b

  错误发生时不开启蜂鸣。

* --one-database, -o

  忽略其他语句，除非默认数据库是命令行指明的库。这个选项是历史遗留的，应当谨慎使用。语句的过滤建立在USE语句上。

  初始时，mysql执行输入的语句，因为在命令行指定数据库名db_name等效于在输入的开始插入USE db_name命令。随后，对每个遇到的语句，mysql时接受或是拒绝后续的语句，取决于数据库名是否是命令行指定的名之一。语句的内容不重要。

  假设调用mysql处理以下语句集：

  ```sql
  DELETE FROM db2.t2;
  USE db2;
  DROP TABLE db1.t1;
  CREATE TABLE db1.t1 (i INT);
  USE db1;
  INSERT INTO t1 (i) VALUES(1);
  CREATE TABLE db2.t1 (j INT);
  ```

  如果命令行是mysql --force --one-database db1, mysql按以下方式处理输入：

  + --DELETE语句会执行，因为默认数据库是db1，即使语句指明了另一个库中的表。
  + --DROP TABLE和CREATE TABLE语句不会被执行，因为默认数据库不是db1，即使语句指明了db1中的表。
  + --INSERT和CRETE TABLE语句会执行，因为默认数据库是db1，即使CRETE TABLE语句指明了另一个库中的表。

* --pager[=command]

  使用给定的命令来给结果分页。如果命令忽略了，默认分页器是你的PAGER环境变量。有效的分页器有less, more, cat [>filename]等等。这个选项只在Unix环境并且交互模式下有效。要禁用分业，使用--skip-pager。参考4.5.1.2节，“mysql命令”，进一步讨论输出的分页。

* --password[=password], -p[password]

  password用于连接服务器时使用。如果你使用简短格式（－p），不能在选项和密码之间有空白。如果命令行--password或者-p选项后忽略了password值，mysql会提示输入密码。

  在命令行写明密码被认为是不安全的。参考6.1.2.1节“终端用户的密码安全纲要”。你可以使用密码文件以避免在命令行中写明密码。

* --pile, -N

  Windows系统上，使用命名管道连接服务器。这个选项仅适用于服务器支持命名管道连接。

* --plugin-dir=path

  查找插件的目录。如果使用了--default-auth选项来指定认证插件，但mysql自己没有找到插件时，这个选项就需要了。参考6.3.7“插拔式认证”。

* --port＝port_name, －P port_name

  用于连接的TCP/IP端口。

* --prompt=format_str

  设置提示符格式。默认是mysql>。提示符能包含的特殊序列见4.5.1.2节“mysql命令”描述。

* --protocol={TCP|SOCKET|PIPE|MEMORY}

  用于连接服务器的协议。当其他连接参数导致使用不同于你所期望的协议时，这个参数会有用。允许的只参考4.2.2节“连接到MySQL服务器”。

* --quick, -q

  不要缓存每次的查询结果，接收到行时就打印出来。如果输出挂起的话会拖慢服务器。有这个选项时，mysql不使用历史文件。

* --raw, -r

  表格式输出，列周围的“方框”使得一列能区分与其他列。非表格式输出（比如批量模式或--batch或--silent选项时产生的输出），特殊的字符被转义了，以便它们容易识别出来。换行、制表符、NUL及反斜线写作\n、\t、\0和\\。--raw选项禁用字符的转义。

  下面的例子阐述表格式与非表格式输出，及raw模式来禁用转义
  ```sql
  % mysql
  mysql> SELECT CHAR(92);
  +----------+
  | CHAR(92) |
  +----------+
  | \        |
  +----------+
  
  % mysql -s
  mysql> SELECT CHAR(92);
  CHAR(92)
  \\
  
  % mysql -s -r
  mysql> SELECT CHAR(92);
  CHAR(92)
  \
  ```

* --reconnect

  如果到服务器的连接断开了，自动重连。每次连接断开各尝试一次重连。要抑制重连，使用--skip-reconnect。

* --safe-updates, --i-am-a-dummy, -U

  仅允许使用关键字来指明修改哪些行的UPDATE和DELET语句。如果你在选项文件中设置了这个选项，你可以在命令行使用--safe-updates来覆盖它。参考4.5.1.6节“mysql贴士“来获取这个选项的更多信息。

* --secure-path

  不要用旧的（4.1之前）格式给服务器发送密码。这防止除使用新密码格式之外的服务器连接。在MySQL5.6.7中，这个选项默认开启；使用--skip-secure-path来禁用它。

  提示
  使用4.1之前的哈希算法的密码，比使用本地哈希算法的密码更不安全，应当避免使用。4.1之前的密码过时了，将来的MySQL发布版会移除对它的支持。

* --server-public-key-path=file_name

  包含服务器RSA公钥的文件的路径名。文件必须是PEM格式。公钥用于采用sha256_password插件加密客户端建立服务器连接时的密码。如果不需要加密时它被忽略了，如同客户端使用SSL连接来连接到服务器。

  若有需要，服务器发送公钥给客户端，所以不必要使用这个选项用于RSA密码加密。这样做更高效，因为服务器不需要发送秘钥。

  涉及sha256_password插件及怎样获取RSA公钥的更多的讨论，参考6.3.7.4节“SHA-256认证插件”。

  仅当MySQL增加OpenSSL的编译时这个选项才可用。在MySQL5.6.6时以--server-public-key之名加入，在5.6.7时更名为--server-public-key-path。

* --show-warnings

  使得警告信息在每条语句之后展示出来，如果有的话。这个选项适用于交互式和批量模式。

* --sigint-ignore

  忽略SIGINT信号（典型的键入Control+C的结果）。


* --silent, -s

  安静模式。产生更少的输出。这个选项可以多次给出，来产生更加少的输出。这个选项将产生非表格式输出并转义特殊字符。转义可以使用raw模式来禁用。参考--raw选项的描述。

* --skip-line-number, -t

  不要写发生错误的行数。当你需要比较包含错误信息的结果文件时有用。

* --socket=path, -S path

  连接到localhost时使用的Unix环境的socket文件，或者Windows环境的命名管道。

* --ssl*

  以--ssl开始的选项指示是否采用SSL连接服务器，以及指明在哪里查找SSL key和认证。参考6.3.9.4“SSL命令选项”。

* --table, -t

  以表格格式展示结果。这是交互模式下的默认效果，但能用于在批量模式下产生表格式输出。

* --tee=file_name

  追加输出的副本到指定文件。这个选项只适用于非交互模式。参考4.5.1.2节“mysql命令”的tee文件更多的讨论。

* --unbuffered, -n

  每次查询后都刷缓冲。

* --user=user_name, -u user_name

  连接服务器时的MySQL用户名。

* --verbose, -V

  详细模式。产生更多的关于程序行为的输出。这个选项可以写多次来产生更加多的输出。（比如，－v －v －v即使在批量模式下也产生表格式输出）

* --version, -V

  显示版本信息并退出。

* --vertical, -E

  垂直地打印结果（每个字段值在一行）。没有这个选项，你可以以\G结尾每个语句来指定垂直输出。

* --wait, -w

  如果连接不能建立，则等待并重试，而不是中止。

* --xml, -X

  生成XML输出。

  ```shell
  <field name="column_name">NULL</field>
  ```
  
  使用--xml时mysql输出结果跟mysqldump --xml类似。参考4.5.4节“mysqldump－一个数据库备份程序”了解详细。
  
  XML输出同样使用XML命名空间，如下所示：
  
  ```shell
  shell> mysql --xml -uroot -e "SHOW VARIABLES LIKE 'version%'"
  <?xml version="1.0"?>
  
  <resultset statement="SHOW VARIABLES LIKE 'version%'" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <row>
  <field name="Variable_name">version</field>
  <field name="Value">5.0.40-debug</field>
  </row>
  
  <row>
  <field name="Variable_name">version_comment</field>
  <field name="Value">Source distribution</field>
  </row>
  
  <row>
  <field name="Variable_name">version_compile_machine</field>
  <field name="Value">i686</field>
  </row>
  
  <row>
  <field name="Variable_name">version_compile_os</field>
  <field name="Value">suse-linux-gnu</field>
  </row>
  </resultset>
  ```

  （查看Bug#25946）

  你还可以使用--var_name=value来设定变量值。

* --connect_timeout

  连接超时前的秒数。（默认值是0）

* --max_allowed_packet

  客户端/服务器通信的最大缓冲大小。默认值是16MB，最大值是1GB。

* --max_join_size

  当使用--safe-updates时自动限制的连接中的行数。（默认值是1000000）

* --net_buffer_length

  TCP/IP及socket通信的缓冲大小。（默认值是16KB）

* --select_limit

  当使用--safe-updates时自动限制SELECT语句的大小。（默认时1000）

#### 4.5.1.2 mysql命令

mysql发送每条你提交的SQL语句给服务器执行。这里也有一些命令mysql自己解析。要看完整的命令列表，在mysql>提示符键入help或者\h。

```sql
mysql> help

List of all MySQL commands:
Note that all text commands must be first on line and end with ';'
?         (\?) Synonym for `help'.
clear     (\c) Clear command.
connect   (\r) Reconnect to the server. Optional arguments are db and host.
delimiter (\d) Set statement delimiter.
edit      (\e) Edit command with $EDITOR.
ego       (\G) Send command to mysql server, display result vertically.
exit      (\q) Exit mysql. Same as quit.
go        (\g) Send command to mysql server.
help      (\h) Display this help.
nopager   (\n) Disable pager, print to stdout.
notee     (\t) Don't write into outfile.
pager     (\P) Set PAGER [to_pager]. Print the query results via PAGER.
print     (\p) Print current command.
prompt    (\R) Change your mysql prompt.
quit      (\q) Quit mysql.
rehash    (\#) Rebuild completion hash.
source    (\.) Execute an SQL script file. Takes a file name as an argument.
status    (\s) Get status information from the server.
system    (\!) Execute a system shell command.
tee       (\T) Set outfile [to_outfile]. Append everything into given
               outfile.
use       (\u) Use another database. Takes database name as argument.
charset   (\C) Switch to another charset. Might be needed for processing
               binlog with multi-byte charsets.
warnings  (\W) Show warnings after every statement.
nowarning (\w) Don't show warnings after every statement.

For server side help, type 'help contents'
```

如果mysql是以--binary-mode选项启动，所有mysql命令都禁止，除了非交互模式（输入通过管道给mysql或者使用source命令加在）下的charset和delimiter。

每条命令都有长和短的格式。长格式对大小写不敏感；短格式敏感。长格式能以分号来可选的结尾，但短格式不能。

在多行注释/*...*/中不支持短格式的命令。

* help [arg], \h [arg], \? [arg], ?[arg]

  展示帮助信息，列出可用的mysql命令。

  如果给help提供了参数，mysql用它作为搜索字符串从服务器端的MySQL参考手册来获取帮助。更多的信息参考4.5.1.4节“mysql服务器端的帮助”。

* charset charset_name, \C charset_name

  修改默认的字符集，发出一条SET NAMES语句。如果启用了自动重连（不推荐），这使得客户端和服务器端的字符集保持同步，因为重连时会使用特定的字符集。

* clear, \C

  清空当前的输入。如果你正在输入并准备执行时改变了注意，使用这个命令。

* connect [db_name host_name]], \r [db_name host_name]]

  重连到服务器。可选的数据库名和主机名参数，可给定来指明默认的数据库或者运行中的主机。如果忽略了，使用当前值。

* delimiter str, \d str

  修改mysql解析时每条语句之间的分隔符。默认值时分号（“;”）。

  delimiter命令中可以指定引用或非引用的字符串作为分隔符。引用可以使用但引号（')，双引号（"）或者反引号（`）字符。要在引用中加入引号字符，要么用不同的引用字符引用，要么给引号字符反斜线（“\”）转义。应当当心在引用字符串之外的反斜线，因为它时MySQL的转义字符。没加引用的参数，分隔符取到第一个空白或者换行。加引用的参数，分隔符取到行内匹配的引用符为止。

  在任何地方mysql都解析分隔符实例为语句分隔符，除非在引用字符串中。定义一个可能在其他词中的分隔符时要小心。比如，如果你定一个分隔符为X，你将无法在语句中使用关键INDEX。mysql将此理解为INDE后跟了分隔符X。

  当mysql识别到分隔符不是默认的“;“时，这个字符实例不做解释直接发送给服务器。然而，服务器自己依然将”;“理解为语句分隔符并照此处理多个语句。这种行为会在服务器处理多语句执行（参考22.8.17节”C API支持多重语句执行“）时，以及在解析存储过程、函数、触发器、事件（参考19.1节”定义存储程序“）的本体时出现问题。

* edit, \e

  编辑当前输入语句。mysql检查EDITOR和可视化环境变量来决定使用哪个编辑器。如果两个变量都没设定，则默认编辑器为VI。

  edit命令只在Unix环境工作。

* ego, \G

  发送当前的一句给服务器执行，并使用垂直格式展示结果。

* exit, \q

  退出mysql。

* go, \g

  发送当前的语句给服务器执行。

* nopager, \n

  禁用输出分页。参见pager的描述

  nopager命令只在Unix环境工作。

* notee, \t

  禁止输出副本到tee文件。参见tee的描述。

* nowarning, \w

  启用每条语句后的告警信息显示。

* pager [command], \P [command]

  启用输出分页。使用--pager选项调用mysql时，可以在Unix程序环境如less、more或其他类似程序中交互式的浏览或搜索查询结果。如果你不指定选项的值，mysql检查PAGER环境变量，并用作分页。分页功能仅在交互模式下工作。

  输出的分页可以交互式的用pager命令启用及用nopager禁用。这个命令有可选参数；如果给出，分页程序设定为参数值。如果没有给出，分页器设定为命令行指定的值，如果都没有指定分页器则设定为标准输出。

  输出的分页仅在Unix环境工作，因为它使用popen()函数，而此函数在Windows环境不存在。对Windows环境，tee选项替代用于存储查询结果，尽管某些情况下它不如用pager浏览结果来得方便。

* print, \p

  打印当前输入语句而不执行。

* prompt [str], \R [str]

  重新设置mysql提示符为给定字符串。能用语提示符的特殊字符序列在本节后续介绍。

  如果你指定这个命令没有参数，mysql重置提示符为默认的mysql>。

* quit, \q

  退出mysql。

* rehash, \#

  当你在键入语句时，重建哈希补全来启用数据库、表、列名的补全。（参考--auto-rehash选项的描述）

* source file_name, \. file_name

  读入指明的文件， 并执行其中的语句。在Windows系统上，你可以指定目录分隔符为/或者\\。

* status, \s

  提供关于连接和使用的服务器信息。如果你在--safe-updates模式下，status同样打印出影响查询的mysql状态变量。

* system command, \!command

  使用默认的命令解释器执行给定的命令。

  system命令仅在Unix系统下工作。

* tee [file_name], \T [file_name]

  当使用--tee选项调用mysql时，你能纪录语句和它们的输出。所有屏幕的显示都追加到给定的文件中。这对调试也很有用。mysql在每条语句后在输出下次提示符之前，刷新结果到文件。追加功能仅在交互模式下工作。

  你能交互式的使用tee命令来启用这个特性。如果没有参数，则使用上次的文件。tee文件可以通过notee命令来禁用。执行tee来再次启用日志纪录。

* use db_name, \u db_name

  使用db_name为默认数据库。

* warnings, \W

  启用每条语句后的告警显示（如果有的话）。

这里有一些关于pager命令的贴士：

* 你能把它用于写入文件，输出结果只进入文件：
  ```sql
  mysql> pager cat > /tmp/log.txt
  ```
  你也可以传给它任何你想用于分页的程序：
  ```sql
  mysql> pager less -n -i -S
  ```

* 在前面的例子中，注意-S选项。当你浏览很宽的结果时它非常有用。有时很宽的结果在屏幕上很难阅读。less的-S选项能使结果集更易于阅读，因为你能使用左右键来水平滚动。你还能使用less中的-S来交互式的切换开启或关闭水平模式。阅读less的手册来获取更多信息：
  ```shell
  shell> man less
  ```

* less的-F和-X选项能用来退出less，如果结果能放在一页屏幕中，当没必要滚动时这很方便。
  ```sql
  mysql> pager less -n -i -S -F -X
  ```

* 你能使用很复杂的分页命令来处理查询结果：
  ```shell
  mysql> pager cat | tee /dr1/tmp/res.txt \
          | tee /dr2/tmp/res2.txt | less -n -i -s
  ```
  这个例子中，这个命令会把查询结果发送到挂载在/dr1和/dr2下的不同文件系统目录下的两个不同文件中，依然能使用less来在屏幕显示结果。

你还可以结果tee和pager的功能。使用tee文件同时分页到less命令，在使用less程序浏览结果的同时，一切信息同时都追加到文件中。使用pager命令调用Unix的tee与mysql内置的tee命令的区别是，即使你没有Unix的tee可用内置的tee功能依然能工作。内置的tee纪录打印到屏幕的任何信息，而pager调用的Unix tee不纪录那么多。额外地，tee文件纪录功能能在mysql中交互式的开启或关闭。当你想纪录某些查询而其他查询不想纪录时这就很有用了。

prompt命令重置默认的mysql>提示符。定义提示符的字符串能包含以下特殊字符。
<table summary="This table describes prompt command
          options that are used to configure the
          mysql&gt; prompt." border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">Option</th><th scope="col">Description</th></tr></thead><tbody><tr><td scope="row">\c</td><td>你每次提交都自增的计数器</td></tr><tr><td scope="row">\D</td><td>当前的完整时间</td></tr><tr><td scope="row">\d</td><td>默认的数据库</td></tr><tr><td scope="row">\h</td><td>服务器主机名</td></tr><tr><td scope="row">\l</td><td>当前的语句分隔符</td></tr><tr><td scope="row">\m</td><td>当前时间的分钟数</td></tr><tr><td scope="row">\n</td><td>新行符</td></tr><tr><td scope="row">\O</td><td>三个字母格式的当前的月份(Jan, Feb, …)</td></tr><tr><td scope="row">\o</td><td>当前月份的数字格式</td></tr><tr><td scope="row">\P</td><td>上午/下午</td></tr><tr><td scope="row">\p</td><td>当前的TCP/IP端口号或者ocket文件</td></tr><tr><td scope="row">\R</td><td>当前的时间，24小时制(0–23)</td></tr><tr><td scope="row">\r</td><td>当前的时间，标准的12小时制(1–12)</td></tr><tr><td scope="row">\S</td><td>分号</td></tr><tr><td scope="row">\s</td><td>当前时间的秒数</td></tr><tr><td scope="row">\t</td><td>制表符</td></tr><tr><td scope="row">\U</td><td><p>你完整的user_name@host_name帐户名<tr><td scope="row">\u</td><td>你的用户名</td></tr><tr><td scope="row">\v</td><td>服务器版本</td></tr><tr><td scope="row">\w</td><td>三字母格式(Mon, Tue, …)的当前星期数</td></tr><tr><td scope="row">\Y</td><td>当前年份，4位数字</td></tr><tr><td scope="row">\y</td><td>当前的年份，2位数字</td></tr><tr><td scope="row">\_</td><td>空白</td></tr><tr><td scope="row">\&nbsp;</td><td>空白(反斜线后有个空白符)</td></tr><tr><td scope="row">\'</td><td>单引号</td></tr><tr><td scope="row">\"</td><td>双引号</td></tr><tr><td scope="row">\\</td><td>反引号字符<tr><td scope="row">\<em class="replaceable"><code>x</em></td><td><p>
x，任意在上面没有列出的“x”</p></td></tr></tbody></table>

你能用很多方式设置提示符：

* 使用环境变量。你能使用MYSQL_PS1环境变量来设置提示符。比如：

  ```shell
  shell> export MYSQL_PS1="(\u@\h) [\d]> "
  ```

* 使用命令行选项。你能使用mysql命令的--prompt选项。比如：

  ```shell
  shell> mysql --prompt="(\u@\h) [\d]> "
  (user@host) [database]>
  ```
* 使用选项文件。你可以在MySQL选项文件中的[mysql]组中设置prompt选项。比如/etc/my.cnf或者你主目录的.my.cnf文件。比如：

  ```shell
  [mysql]
  prompt=(\\u@\\h) [\\d]>\\_
  ```
  这个例子中，注意使用了两个反斜线。如果在选项文件中使用prompt选项，建议使用双反斜线来引用特殊提示符。选项文件中的 允许的提示符选项集和特殊字符转义序列集有重叠。（参数文件中的转义序列规则见4.2.3.3节“使用选项文件”）这个重叠可能导致使用单反斜线时出问题。比如\s被理解为一个空白符而不是当前的秒数。下面的例子现实了怎样在选项文件中定义提示符来包含HH:MM:SS>格式。

  ```shell
  [mysql]
  prompt="\\r:\\m:\\s> "
  ```

* 交互式设置提示符。可以使用prompt（或者\R）命令来交互式修改提示符。

  比如：

  ```sql
  mysql> prompt (\u@\h) [\d]>\_
  PROMPT set o '(\u@\h) [\d]>\_'
  (user@host) [database]> 
  (user@host) [database]> prompt
  Returning to default PROMPT of mysql>
  mysql>
  ```

#### 4.5.1.3.mysql纪录日志

在Unix系统，mysql客户端执行语句后立即纪录到历史文件中。默认的，这个文件放在主目录下命名为.mysql_history。要指定一个不同的文件，修改MYSQL_HISTORY环境变量。

日志纪录怎样发生的

语句的纪录按以下规则进行：

* 语句只在交互模式下纪录。非交互模式的语句例子如从文件或管道读取。使用--batch或--execute选项也可以支持语句的纪录日志。

* 如果命中了“ignore”列表，语句被忽略而不纪录日志。这个列表后面描述。

* mysql单独纪录每个不忽略的、非空的语句。

* 如果一条不被忽略的语句跨越了多行（不包括行分隔符），mysql把多行连接起来形成一个完整的语句，换行符改为空白，再纪录结果，加上分隔符。

结果，一条跨越多行的语句会被纪录两次。考虑以下输入：

```sql
mysql> SELECT
    -> 'Today is'
    -> ,
    -> CURDATE()
    -> ;
```

这个例子中，当读取时mysql纪录"SELECT", "'Today is'", ",", "CURDATE()"和";"行。它同样纪录完整的语句，映射位SELECT\n'Today is'\n,\nCURDATE()为SELECT 'Today is', CURDATE()，外加行分隔符。因此，这些行会出现在日志中：

```
SELECT
'Today is'
,
CURDATE()
;
SELECT 'Today is', CURDATE();
```

在MySQL5.6.8中，mysql忽略不纪录有目的的匹配任意“ignore”列表中的模式。默认的，这个模式列表是”*IDENTIIFED*:*PASSWORD*“，以忽略引用了密码的语句。模式匹配不取分大小写。模式中，两个字符很特殊：

* ?匹配任意单字符。

* \*匹配任意长度的字符序列。

要指定更多的模式，使用--histignore选项，或者这是MYSQL_HISTIGNORE环境变量。（如果都设置了，选项值优先级高）取值应该是逗号分割的一个或多个模式列表，这个值会追加到默认模式列表中。

在命令行指定的模式可能需要引起来或者转义，以避免命令解释器特别对待它们。例如，要支持除涉及密码的语句之外的UPDATE和DELETE命令纪录到日志，这样调用mysql：

```shell
shell> mysql --histignore="*UPDATE*:*DELETE*"
```

控制历史文件

.mysql_history文件应当用严格的访问权限保护，因为敏感的信息可能被写入，比如包含密码的SQL语句。参考6.1.2.1节“终端用户的密码安全指导”。

如果你不希望维护一个历史文件，如果.mysql_history文件存在首先删掉它。然后使用下列方法之一来避免它再次被创建：

* 设置MYSQL_HISTFILE环境变量值为/dev/null，要使这个设置每次登陆都生效，把它放在shell登陆文件的中。

* 创建.mysql_history为/dev/null的软链接文件。这样做需要做一次：

  ```shell
  shell> ln -s /dev/null $HOME/.mysql_histofy
  ```


#### 4.5.1.4. mysql服务器端的帮助

```sql
mysql> help serach_string
```
如果你给help命令提供参数，mysql把它作为搜索字符串来从MySQL参考手册获取服务器端的帮助。这个命令的使用需要mysql数据库中的help表使用帮助信息初始化（参考5.1.10节“服务器端帮助”）。

如果没有匹配的搜索串，搜索会失败：

```sql
mysql> help me

Nothing found
Please try to run 'help contents' for a list of all accessible topics
```

使用help contents来查看帮助信息分类：

```sql
mysql> help contents
You asked for help about help category: "Contents"
For more information, type 'help <item>', where <item> is one of the
following categories:
   Account Management
   Administration
   Data Definition
   Data Manipulation
   Data Types
   Functions
   Functions and Modifiers for Use with GROUP BY
   Geographic Features
   Language Structure
   Plugins
   Storage Engines
   Stored Routines
   Table Maintenance
   Transactions
   Triggers
```

如果搜索字符串匹配了多个项，mysql列出匹配的主题列表：

```sql
mysql> help logs
Many help items for your request exist.
To make a more specific request, please type 'help <item>',
where <item> is one of the following topics:
   SHOW
   SHOW BINARY LOGS
   SHOW ENGINE
   SHOW LOGS
```

使用搜索结果的一个主题来查看这个主题的帮助：

```sql
mysql> help show binary logs
Name: 'SHOW BINARY LOGS'
Description:
Syntax:
SHOW BINARY LOGS
SHOW MASTER LOGS

Lists the binary log files on the server. This statement is used as
part of the procedure described in [purge-binary-logs], that shows how
to determine which logs can be purged.

mysql> SHOW BINARY LOGS;
+---------------+-----------+
| Log_name      | File_size |
+---------------+-----------+
| binlog.000015 |    724935 |
| binlog.000016 |    733481 |
+---------------+-----------+
```

搜索串可以包括通配符“%“和“_”。它们与LIKE模式匹配操作具有同样的意思。例如，HELP rep%返回以rep开始的主题列表：

```sql
mysql> HELP rep%
Many help items for your request exist.
To make a more specific request, please type 'help <item>',
where <item> is one of the following
topics:
   REPAIR TABLE
   REPEAT FUNCTION
   REPEAT LOOP
   REPLACE
   REPLACE FUNCTION
```


#### 4.5.1.5. 从Text文件中执行SQL语句
mysql客户端主要是交互式使用，像这样：

```shell
shell> mysql db_name
```

然而，也可以这样做，把SQL语句放到文件中，再告诉mysql从那个文件读输入。要这样做，创建一个文本文件text_file包含你希望执行的语句。再这样调用mysql：

```shell
shell> mysql db_name < text_file
```

如果文件首条语句是USE db_name，就没必要再命令行指定数据库名：

```shell
shell> mysql < text_file
```

如果你已经再运行mysql了，可以使用source或者\.命令来执行SQL脚本文件：

```mysql
mysql> source file_name
mysql> \. file_name
```

有时候你也许希望脚本给用户展示进度信息。要这样你可以插入一条这样的语句：

```mysql
SELECT '<info_to_display' AS ' ';
```
这个语句展示<info_to_display>的结果。

你还可以给mysql加--verbose选项，这会使得每条语句的结果之前展示语句本身。

mysql忽略文件头的Unicode字节序标志（BOM）字符。以前，mysql读取它们并发送给服务器，导致语法错误。BOM的存在不会导致mysql修改默认字符集。要修改，加--default-character-set=utf8这样的参数来启动mysql。

更多有关批量模式的信息，参考3.5节“使用mysql的批量模式“。


#### 4.5.1.6. mysql贴士

本节描述能有助于更高效使用mysql的技巧。

##### 4.5.1.6.1 编辑输入

mysql支持输入行的标记，这使得你能本地编辑当前的输入行，或者重调之前的输入行。例如，左右方向键用于在当前行水平移动，上下方向键用于在之前输入的行中上线移动。Backspace删除光标前的字符并在光标为止键入新字符。要输入这样，按Enter。

在Windows系统上，编辑快捷键跟windows的命令行支持的一样。在Unix系统，编辑快捷键取决于构建mysql时输入的库（比如libedit和readline库）。

libedit和readline库的文档在线可用。若想修改给定库允许的快捷键，在库文件的启动文件中绑定这些键。这是主目录下的libedit库的.edit文件和readline库的.inputrc文件。

例如，libedit库，Control+W删除当前行光标位置之前的所有信息，Control+U删除整行。在readline库，Control+W删除光标前的一个词，而Control+U删除当前光标之前的所有信息。如果mysql使用libedit构建，喜欢这两个快捷键映射readline行为的用户可以把下面行放在.editrc文件中（必要时创建）。

```
bind "^W" ed-delete-prev-word
bind "^U" vi-kill-line-prev
```

要看当前的快捷键绑定，暂时把bind明仔.editrc文件默认。mysql启动时会显示快捷键绑定。

##### 4.5.1.6.2. Windows平台的Unicode支持

Windows平台提供基于UTF-16LE的从命令行读写API。MySQL5.6.2，mysql的Windows客户端支持这些API。在5.6.3，Windows安装程序在MySQL菜单中创建名为MySQL command line client - Unicode的功能项。这个功能使用一些工具用Unicode来进行终端和MySQL服务器的通信。

要想手动利用这个功能，在一个使用兼容Unicode字体的终端运行mysql，并设置默认字符集为支持与服务器通信的Unicode字符集：

1. 打开终端窗口。

2. 选择窗口的属性，选择字体栏，挑选Lucida Console或其他兼容Unicode的字体。这是必要的，因为终端窗口默认使用一种不适合Unicode的DOS光栅字体。

3. 使用--default-character-set=utf8(或utf8mb4)选项执行mysql.exe。这个选项是必要的，因为utf16le不是一种支持连接的字符集。

有了这些修改后，mysql会借助Windows的API使用UTF-16LE与终端通信，并使用UTF-8与服务器通信。（如前所示，前面提到的菜单栏设置字体和字符集）。

要避免每次运行mysql时都进行这些步骤，你可以创建一个mysql.exe的快捷方式。快捷方式社会制终端字体为Lucida Console或其他兼容Unicode的字体，并传递--default-character-set=utf8(或utf8mb4)选项给mysql.exe。

或者，创建只包含字体的快捷方式，并在my.ini文件中的[mysql]组中设置字符集：

```
[mysql]
default-character-set=utf8
```

##### 4.5.1.6.3. 垂直显示查询结果

某些查询结果在垂直格式下更易读，而不是常用的水平格式。可以用\G替代分号来结束查询，结果就可以垂直显示了。例如，包含换行符的长文本值在垂直输出时更易读：

```sql
mysql> SELECT * FROM mails WHERE LENGTH(txt) < 300 LIMIT 300,1\G
*************************** 1. row ***************************
  msg_nro: 3068
     date: 2000-03-01 23:29:50
time_zone: +0200
mail_from: Monty
    reply: monty@no.spam.com
  mail_to: "Thimble Smith" <tim@no.spam.com>
      sbj: UTF-8
      txt: >>>>> "Thimble" == Thimble Smith writes:

Thimble> Hi.  I think this is a good idea.  Is anyone familiar
Thimble> with UTF-8 or Unicode? Otherwise, I'll put this on my
Thimble> TODO list and see what happens.

Yes, please do that.

Regards,
Monty
     file: inbox-jani-1
     hash: 190402944
1 row in set (0.09 sec)
```

##### 4.5.1.6.4. 使用--safe-updates选项

对初学者，一个有用的选项时--safe-updates（或者--i-am-a-dummy，效果一样）。当你提交一个DELETE FROM tbl_name语句但忘了WHERE子句时就很有用。通常这样的语句会删除表的所有行。有了--safe-updates，你只能指定键值识别数据时才能删除它们。这能避免意外。

当你使用--safe-updates选项时，mysql连接到MySQL服务器后提交以下语句：

```sql
SET sql_safe_updates=1, sql_select_limit=1000, max_join_size=1000000;
```

参考5.1.4节“服务器系统变量”。

这个SET语句有下列效果：

* 你不允许执行UPDATE和DELETE语句，除非你使用WHERE子句来约束键值，或者提供LIMIT子句，或者两者都有。例如：

```sql
UPDATE tbl_name SET not_key_column=val WHERE key_column=val;

UPDATE tbl_name SET not_key_column=val LIMIT 1;
```

* 服务器限制所有大的SELECT结果为1000行，除非语句包括LIMIT子句。

* 服务器中止可能需要检查超过1,000,000行数据组合的多表SELECT语句。

要指定1000和1,000,000之外的值，你可以使用--select_limit和--max_join_size选项来覆盖默认值：

```shell
shell> mysql --safe-updates --select_limit=500 --max_join_size=10000
```

##### 4.5.1.6.5. 禁用mysql自动重连

如果mysql客户端发送语句时断开了服务器连接，它会立即自动尝试重连一次服务器，并再次发送语句。然而，即使mysq成功重连了，你第一个连接已经结束并且你之前所有的会话对象和设置都丢了：临时表、autocommit模式、用户定义的会话变量。同样，任何当前的事务都回滚了。这种行为对你可能很危险，就像下面的例子中，服务器在第一和第二个语句之间关闭并再次打开，而你却不知道：

```sql
mysql> SET @a=1;
Query OK, 0 rows affected (0.05 sec)

mysql> INSERT INTO t VALUES(@a);
ERROR 2006: MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    1
Current database: test

Query OK, 1 row affected (1.30 sec)

mysql> SELECT * FROM t;
+------+
| a    |
+------+
| NULL |
+------+
1 row in set (0.05 sec)
```

@a用户变量在连接中已经丢了，并在重连后未定义。如果连接丢了就让mysql以错误退出很重要的话，你可以用--skip-reconnect选项来启动mysql客户端。

有关自动重连时及重连后对状态信息的影响的信息，参考22.8.16节“控制自动重连行为”。
