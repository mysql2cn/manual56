### 4.5.1. mysql—MySQL 命令行工具

mysql是一个简单的带有输入行编辑能力的SQL命令解析器。它支持交互和非交互式使用。当交互式使用时，查询结果以ASCII表格式展示。当非交互模式（例如作为过滤器）时，结果以制表符分隔格式展现。输出格式可以通过命令选项修改。

如果你遇到内存不足够保持大结果集的问题，使用--quick选项。这会强制mysql从服务器一次一行的去结果，而不是取整个结果集并在展示前缓冲在内存中。这个功能的实现依赖于使用客户端/服务器库中的mysql_use_result()C API函数，而不是mysql_store_result()函数。

使用mysql非常简单。像如下这样在命令提示符中调用它：
```shell
shell> mysql db_name
```
或者：
```shell
shell> mysql --user=user_name --password=your_password db_name
```
然后键入SQL语句，用“;"、\g或者\G结尾，再按Enter键

键入Control+C使mysql尝试杀死当前的语句。如果不能成功，或者语句被杀死之前再次键入Control+C，mysql则退出。

你可以像这样执行一个脚本文件中的SQL语句：
```shell
shell> mysql db_name < script.sql > output.tab
```

在Unix系统上，mysql客户端交互式记录被执行的语句到历史文件。参见章节4.5.1.3 "mysql日志记录"。

#### 4.5.1.1.mysql选项
mysql支持以下选项，这些选项可以在命令行中指定，或者在参数文件的[mysql]和[client]段中指定。mysql同样支持解析参数文件的选项，在章节4.2.3.4“影响参数文件解析的命令行选项”

表4.4.mysql选项
<table summary="mysql Options" border="1"><colgroup><col class="format"><col class="config_file"><col class="description"><col class="introduced"></colgroup><thead><tr><th scope="col">格式</th><th scope="col">参数文件</th><th scope="col">描述</th><th scope="col">加入参数的版本</th></tr></thead><tbody><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_auto-rehash">--auto-rehash</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_auto-rehash">auto-rehash</a></td><td>启用自动补全</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_auto-vertical-output">--auto-vertical-output</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_auto-vertical-output">auto-vertical-output</a></td><td>启用自动垂直展示结果集</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_batch">--batch</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_batch">batch</a></td><td>不使用历史文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_binary-mode">--binary-mode</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_binary-mode">binary-mode</a></td><td>禁用\r\n至\n的转换，并视\0为查询结尾标志</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_bind-address">--bind-address=ip_address</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_bind-address">bind-address</a></td><td>使用特定的网络接口连接MySQL服务器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_character-sets-dir">--character-sets-dir=path</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_character-sets-dir">character-sets-dir</a></td><td>设置默认字符集</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_column-names">--column-names</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_column-names">column-names</a></td><td>在结果中写入列名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_column-type-info">--column-type-info</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_column-type-info">column-type-info</a></td><td>显示结果集元数据</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_comments">--comments</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_comments">comments</a></td><td>是否保留或去掉发送给服务器的语句中的注释</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_compress">--compress</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_compress">compress</a></td><td>压缩客户端和服务器之间发送的所有信息</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_connect-expired-password">--connect-expired-password</a></td><td>&nbsp;</td><td>指示服务器客户端能够处理密码过期的沙盒模式</td><td>5.6.12</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_connect_timeout">--connect_timeout=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_connect_timeout">connect_timeout</a></td><td>连接超时之前的秒数</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_database">--database=dbname</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_database">database</a></td><td>要使用的数据库</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_debug">--debug[=debug_options]</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_debug">debug</a></td><td>写debug日志</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_debug-check">--debug-check</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_debug-check">debug-check</a></td><td>当程序退出时打印debug信息</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_debug-info">--debug-info</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_debug-info">debug-info</a></td><td>当程序退出时打印debug信息、内存和CPU统计数据</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_default-auth">--default-auth=plugin</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_default-auth">default-auth=plugin</a></td><td>要是用的认证插件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_default-character-set">--default-character-set=charset_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_default-character-set">default-character-set</a></td><td>使用这个字符集作为默认字符集</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_delimiter">--delimiter=str</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_delimiter">delimiter</a></td><td>设置语句分隔符</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_enable-cleartext-plugin">--enable-cleartext-plugin</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_enable-cleartext-plugin">enable-cleartext-plugin</a></td><td>启用明文认证插件</td><td>5.6.7</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_execute">--execute=statement</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_execute">execute</a></td><td>执行这个语句并退出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_force">--force</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_force">force</a></td><td>即使有SQL语句错误也继续执行</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_help">--help</a></td><td>&nbsp;</td><td>展示帮助信息并退出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_histignore">--histignore=pattern_list</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_histignore">histignore</a></td><td>指定哪些语句要忽略记录日志的范式规则Patterns specifying which statements to ignore for logging</td><td>5.6.8</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_host">--host=host_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_host">host</a></td><td>连接到指定主机上的MySQL服务器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_html">--html</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_html">html</a></td><td>生成HTML输出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ignore-spaces">--ignore-spaces</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ignore-spaces">ignore-spaces</a></td><td>忽略函数名后的空白</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_init-command">--init-command=str</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_init-command">init-command</a></td><td>连接后要执行的SQL语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_line-numbers">--line-numbers</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_line-numbers">line-numbers</a></td><td>写下错误的行信息</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_local-infile">--local-infile[={0|1}]</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_local-infile">local-infile</a></td><td>启用或禁用本地的LOAD TATA INFILE</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="option-file-options.html#option_general_login-path">--login-path=name</a></td><td>&nbsp;</td><td>从.mylogin.cnf读取登入路径选项</td><td>5.6.6</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_max_allowed_packet">--max_allowed_packet=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_max_allowed_packet">max_allowed_packet</a></td><td>从服务器发送或接收的最大允许的包长度</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_max_join_size">--max_join_size=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_max_join_size">max_join_size</a></td><td>当使用--safe-updates时自动限制表连接中的行数</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_named-commands">--named-commands</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_named-commands">named-commands</a></td><td>启用全名的mysql命令</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_net_buffer_length">--net_buffer_length=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_net_buffer_length">net_buffer_length</a></td><td>TCP/IP及socket通信的缓冲大小</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_no-auto-rehash">--no-auto-rehash</a></td><td>&nbsp;</td><td>禁用命令自动补全</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_no-beep">--no-beep</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_no-beep">no-beep</a></td><td>发生错误时禁止蜂鸣</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_one-database">--one-database</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_one-database">one-database</a></td><td>忽略除命令行指定数据库名之外库的语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_pager">--pager[=command]</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_pager">pager</a></td><td>使用给出的命令做查询分页器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_password">--password[=password]</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_password">password</a></td><td>连接数据库时使用的密码</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_pipe">--pipe</a></td><td>&nbsp;</td><td>在Windows上, 使用命名管道连接数据库</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_plugin-dir">--plugin-dir=path</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_plugin-dir">plugin-dir=path</a></td><td>插件目录</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_port">--port=port_num</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_port">port</a></td><td>用户连接数据库的TCP/IP端口号</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_prompt">--prompt=format_str</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_prompt">prompt</a></td><td>设置提示符为特定格式</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_protocol">--protocol=type</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_protocol">protocol</a></td><td>连接使用的协议</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_quick">--quick</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_quick">quick</a></td><td>不缓存每个查询结果</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_raw">--raw</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_raw">raw</a></td><td>不做转义转换打印出列值</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_reconnect">--reconnect</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_reconnect">reconnect</a></td><td>如果到服务器的连接断开，自动重连</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_safe-updates">--safe-updates</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_safe-updates">safe-updates</a></td><td>只允许指定where值的UPDATE和DELET语句执行</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_secure-auth">--secure-auth</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_secure-auth">secure-auth</a></td><td>不以旧格式（4.1.1之前）发送密码给服务器</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_select_limit">--select_limit=value</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_select_limit">select_limit</a></td><td>当使用--safe-updates时，自动限制SELECT语句</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_server-public-key-path">--server-public-key-path=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_server-public-key-path">server-public-key-path=file_name</a></td><td>展示帮助信息并退出</td><td>5.6.6</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_show-warnings">--show-warnings</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_show-warnings">show-warnings</a></td><td>如果每条语句执行后有警告，则显示警告</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_sigint-ignore">--sigint-ignore</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_sigint-ignore">sigint-ignore</a></td><td>忽略SIGINT信号（典型的Control+C结果）</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_silent">--silent</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_silent">silent</a></td><td>安静模式</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_auto-rehash">--skip-auto-rehash</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_auto-rehash">skip-auto-rehash</a></td><td>禁用自动命令补全</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_skip-column-names">--skip-column-names</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_skip-column-names">skip-column-names</a></td><td>结果中不列出列名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_skip-line-numbers">--skip-line-numbers</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_skip-line-numbers">skip-line-numbers</a></td><td>跳过错误的行的值</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_named-commands">--skip-named-commands</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_named-commands">skip-named-commands</a></td><td>禁用全名的mysql命令</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_pager">--skip-pager</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_pager">skip-pager</a></td><td>禁用分页</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_reconnect">--skip-reconnect</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_reconnect">skip-reconnect</a></td><td>禁用重连</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_socket">--socket=path</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_socket">socket</a></td><td>连接localhost数据库</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-ca=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-ca</a></td><td>包含受信的SSL CA的文件路径</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-capath=dir_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-capath</a></td><td>包含可信的PEM格式的SSL CA认证的目录</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-cert=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-cert</a></td><td>用于建立安全连接的SSL认证文件名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-cipher=cipher_list</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-cipher</a></td><td>允许用于SSL加密的密码列表</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-crl=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-crl</a></td><td>包含认证撤销列表文件的路径</td><td>5.6.3</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-crlpath=dir_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-crlpath</a></td><td>包含认证撤销列表目录的路径</td><td>5.6.3</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-key=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-key</a></td><td>用于建立安全连接的SSL文件名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_ssl">--ssl-verify-server-cert</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_ssl">ssl-verify-server-cert</a></td><td>当连接服务器时，用于验证主机的公共名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_table">--table</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_table">table</a></td><td>以制表格式展示结果</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_tee">--tee=file_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_tee">tee</a></td><td>追加输出的副本到指定文件</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_unbuffered">--unbuffered</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_unbuffered">unbuffered</a></td><td>每次查询后清除缓存</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_user">--user=user_name</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_user">user</a></td><td>用于连接服务器的MySQL用户名</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_verbose">--verbose</a></td><td>&nbsp;</td><td>详细模式</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_version">--version</a></td><td>&nbsp;</td><td>展示版本信息并退出</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_vertical">--vertical</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_vertical">vertical</a></td><td>垂直输出查询结果。（每列输出为一行）</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_wait">--wait</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_wait">wait</a></td><td>如果连接不能建立，则等待并重试，而非取消</td><td>&nbsp;</td></tr><tr><td scope="row"><a class="link" href="mysql-command-options.html#option_mysql_xml">--xml</a></td><td><a class="link" href="mysql-command-options.html#option_mysql_xml">xml</a></td><td>生成XML的输出</td><td>&nbsp;</td></tr></tbody></table>