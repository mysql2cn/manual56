# 22.8.8. C API预处理语句

## 22.8.8. C API预处理语句

MySQL client/server协议提供了预处理语句的功能。该功能要使用语句句柄数据结构 **MYSQL_STMT** ，该结构由 *mysql_stmt_init()* 初始化函数返回。预处理执行是多次执行一条语句的有效方式。查询语句首先会被解析以为执行做准备。随后，通过初始化函数返回的语句句柄，该语句将被执行一次或者多次。

对于执行多次的语句，预处理执行要比直接执行更快，这主要是因为查询只需解析一次。可是直接执行时，每次执行语句的时候都需解析一次。预处理执行还能减少网络流量，因为每次执行预处理语句时只需传输参数。

有些情况下预处理执行可能无法带来性能优势。要想得到最优的表现，最好分别测试一下预处理和非预处理方式，选择实际性能最好的一种。

预处理语句的另一个优势是它使用二进制协议，所以客户端和服务端的数据传输效率要更高。

能够使用预处理的SQL语句列表，请参考 [13.5，预处理语句的SQL语法]() 。

预处理语句涉及的表或者视图的元数据修改可以被自动探测到，在下次执行的时候相关语句将会自动重编译。更多信息，参考 [8.9.4，预处理语句以及存储程序的缓存]() 。
