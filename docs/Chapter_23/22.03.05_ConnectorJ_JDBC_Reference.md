# ConnectorJ_JDBC_Reference

###22.3.5.Connector/J (JDBC) Reference

这节包括MySQL的Connector/J的参考材料

####22.3.5.1.Driver/DataSource Class Names, URL Syntax and Configuration Properties for Connector/J

MySQL的Connector/J中实现了`java.sql.Driver`接口的类是`com.mysql.jdbc.Driver`。为了向后兼容MM.MySQL，`org.gjt.mm.mysql.Driver`类也是有用的，MM.MySQL是Connector/J之前的JDBC驱动。使用这个类注册驱动或者使用MySQL的Connector/J软件包。

#####JDBC RUL Format

MySQL的Connector/J所使用的JDBC URL格式如下，方括号([,])中是可选项：

```sql

jdbc:mysql://[host][,failoverhost...][:port]/[database] »
[?propertyName1][=propertyValue1][&propertyName2][=propertyValue2]...

```

如果主机名没有指定，默认使用`127.0.0.1`。如果端口没有指定，默认为`3306`,这是MySQL服务的默端口。

```sql

jdbc:mysql://[host:port],[host:port].../[database] »
[?propertyName1][=propertyValue1][&propertyName2][=propertyValue2]...

```

下面是一个连接URL的例子：

```sql

jdbc:mysql://localhost:3306/sakila?profileSQL=true

```

#####IPv6 Connections

对于IPv6连接，使用可选语法来指定URL中的主机，`address=(key=value)`。支持的键如下：

* `(protocol=tcp)`，或者`(protocol=pipe)`在Windows上是命名管道。
* `(path=path_to_pipe)`对于命名管道。
* `(host=hostname)`对于TCP连接。
* `(port=port_number)`对于TCP连接。

例如：

```sql

jdbc:mysql://address=(protocol=tcp)(host=localhost)(port=3306)(user=test)/db

```

任何其余参数被视为特定主机的属性，这些属性在约定的JDBC URL属性之后。当前允许每个主机覆盖多主机连接中的任何配置属性（用于容错，负载均衡或者复制）。限制覆盖用户名，密码，网络超时时间与声明和元数据缓存大小；每个主机其他属性的结果未定义。

#####Initial Database for Connecton

如果数据库没有指定，那么建立的连接没有默认的数据库。这种情况下，要么在连接实例上调用`setCatalog()`方法，要么在SQL语句中指定表名时使用数据库名（也就是，`SELECT dbname.tablename.colnameFROM dbname.tablename...`）。打开没有指定数据库的连接一般在构建像数据库GUI管理软件这样使用多个数据库的时候比较有用。

>#####注意
>使用`Connection.setCatalog()`方法来在JDBC应用中指定数据库，而不是使用`USE database`y语句。

#####Failover Support

MySQL Connector/J 支持容错。这使得驱动切换到任意数量的从库并继续执行只读查询。容错仅仅发生在连接在`autoCommit(true)`状态时，因为当一个事务执行中，容错不能是不可靠的。大多数应用服务和连接池在事务执行结束时将`autoCommit`设置为`true`。

容错功能有如下的行为：

* 如果URL属性`autoReconnect`是`false`：容错仅仅发生在连接初始化时，并且当驱动认定第一个主机重新可用时自动恢复会发生。
* 如果URL属性`autoReconnect`是`true`：当驱动认为连接失败（在每个查询之前会检查）时容错会发生，并且当驱动检测到第一台主机重新可用时，回滚到第一台主机（在`queriesBeforeRetryMaster`查询之后已经被解决）。

在两种情况中，无论何时链接到容错服务器，连接被设置为只读状态，所以查询企图修改数据的查询会抛出异常（这样的查询永远不会被MySQL服务器处理）。

#####Setting Configuration Properties

配置属性定义了Connector/J如何与MySQL服务器建立连接。除非另有注明，可以为`DataSource`对象或`Connection`对象设置属性。

配置属性能够以如下方式设置：

* 使用MySQL的JDBC驱动实现的`java.sql.DataSource`接口的类中的`set*()`方法（当使用`java.sql.DataSource`的实现时，这是建议的方式）：  
   * `com.mysql.jdbc.jdbc2.optional.MysqlDataSource`
   * `com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource`
* 作为`java.util.Properties`实例的Key/Value对传递给`DriverManager.getConnection()`或`Driver.connect()`。
* 作为JDBC URL的参数，传递给`java.sql.DriverManager.getConnection(),java.sql.Driver.connect()`或者实现了`javax.sql.DataSource`的类的`setURL()`方法。

>#####注意
>如果你使用的配置JDBC URL的方式是基于XML的，使用XML字符`&amp;`来分隔配置参数，因为&是XML的保留字符。

下表列出了所有的属性。

#####Connection/Authentication

<table summary="This table lists Connector/J Connection/Authentication
          connection properties." border="1"><colgroup><col class="cj_propstbl_prop_name"><col class="cj_propstbl_prop_defn"><col class="cj_propstbl_default"><col class="cj_propstbl_since_version"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td scope="row">user</td><td>The user to connect as</td><td>&nbsp;</td><td>all versions</td></tr><tr><td scope="row">password</td><td>The password to use when connecting</td><td>&nbsp;</td><td>all versions</td></tr><tr><td scope="row">socketFactory</td><td>The name of the class that the driver should use for creating socket
                connections to the server. This class must implement the
                interface 'com.mysql.jdbc.SocketFactory' and have public
                no-args constructor.</td><td>com.mysql.jdbc.StandardSocketFactory</td><td>3.0.3</td></tr><tr><td scope="row">connectTimeout</td><td>Timeout for socket connect (in milliseconds), with 0 being no timeout.
                Only works on JDK-1.4 or newer. Defaults to '0'.</td><td>0</td><td>3.0.1</td></tr><tr><td scope="row">socketTimeout</td><td>Timeout on network socket operations (0, the default means no timeout).</td><td>0</td><td>3.0.1</td></tr><tr><td scope="row">connectionLifecycleInterceptors</td><td>A comma-delimited list of classes that implement
                "com.mysql.jdbc.ConnectionLifecycleInterceptor" that
                should notified of connection lifecycle events
                (creation, destruction, commit, rollback, setCatalog and
                setAutoCommit) and potentially alter the execution of
                these commands. ConnectionLifecycleInterceptors are
                "stackable", more than one interceptor may be specified
                via the configuration property as a comma-delimited
                list, with the interceptors executed in order from left
                to right.</td><td>&nbsp;</td><td>5.1.4</td></tr><tr><td scope="row">useConfigs</td><td>Load the comma-delimited list of configuration properties before parsing
                the URL or applying user-specified properties. These
                configurations are explained in the 'Configurations' of
                the documentation.</td><td>&nbsp;</td><td>3.1.5</td></tr><tr><td scope="row">authenticationPlugins</td><td>Comma-delimited list of classes that implement
                com.mysql.jdbc.AuthenticationPlugin and which will be
                used for authentication unless disabled by
                "disabledAuthenticationPlugins" property.</td><td>&nbsp;</td><td>5.1.19</td></tr><tr><td scope="row">defaultAuthenticationPlugin</td><td>Name of a class implementing com.mysql.jdbc.AuthenticationPlugin which
                will be used as the default authentication plugin (see
                below). It is an error to use a class which is not
                listed in "authenticationPlugins" nor it is one of the
                built-in plugins. It is an error to set as default a
                plugin which was disabled with
                "disabledAuthenticationPlugins" property. It is an error
                to set this value to null or the empty string (i.e.
                there must be at least a valid default authentication
                plugin specified for the connection, meeting all
                constraints listed above).</td><td>com.mysql.jdbc.authentication.MysqlNativePasswordPlugin</td><td>5.1.19</td></tr><tr><td scope="row">disabledAuthenticationPlugins</td><td>Comma-delimited list of classes implementing
                com.mysql.jdbc.AuthenticationPlugin or mechanisms, i.e.
                "mysql_native_password". The authentication plugins or
                mechanisms listed will not be used for authentication
                which will fail if it requires one of them. It is an
                error to disable the default authentication plugin
                (either the one named by "defaultAuthenticationPlugin"
                property or the hard-coded one if
                "defaultAuthenticationPlugin" property is not set).</td><td>&nbsp;</td><td>5.1.19</td></tr><tr><td scope="row">disconnectOnExpiredPasswords</td><td>If "disconnectOnExpiredPasswords" is set to "false" and password is
                expired then server enters "sandbox" mode and sends
                ERR(08001, ER_MUST_CHANGE_PASSWORD) for all commands
                that are not needed to set a new password until a new
                password is set.</td><td>true</td><td>5.1.23</td></tr><tr><td scope="row">interactiveClient</td><td>Set the CLIENT_INTERACTIVE flag, which tells MySQL to timeout
                connections based on INTERACTIVE_TIMEOUT instead of
                WAIT_TIMEOUT</td><td>false</td><td>3.1.0</td></tr><tr><td scope="row">localSocketAddress</td><td>Hostname or IP address given to explicitly configure the interface that
                the driver will bind the client side of the TCP/IP
                connection to when connecting.</td><td>&nbsp;</td><td>5.0.5</td></tr><tr><td scope="row">propertiesTransform</td><td>An implementation of com.mysql.jdbc.ConnectionPropertiesTransform that
                the driver will use to modify URL properties passed to
                the driver before attempting a connection</td><td>&nbsp;</td><td>3.1.4</td></tr><tr><td scope="row">useCompression</td><td>Use zlib compression when communicating with the server (true/false)?
Defaults to 'false'.</td><td>false</td><td>3.0.17</td></tr></tbody></table>

#####Networking

<table summary="This table lists Connector/J Networking connection
          properties." border="1"><colgroup><col class="cj_propstbl_prop_name"><col class="cj_propstbl_prop_defn"><col class="cj_propstbl_default"><col class="cj_propstbl_since_version"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td scope="row">maxAllowedPacket</td><td>Maximum allowed packet size to send to server. If not set, the value of
                system variable 'max_allowed_packet' will be used to
                initialize this upon connecting. This value will not
                take effect if set larger than the value of
                'max_allowed_packet'.</td><td>-1</td><td>5.1.8</td></tr><tr><td scope="row">tcpKeepAlive</td><td>If connecting using TCP/IP, should the driver set SO_KEEPALIVE?</td><td>true</td><td>5.0.7</td></tr><tr><td scope="row">tcpNoDelay</td><td>If connecting using TCP/IP, should the driver set SO_TCP_NODELAY
                (disabling the Nagle Algorithm)?</td><td>true</td><td>5.0.7</td></tr><tr><td scope="row">tcpRcvBuf</td><td>If connecting using TCP/IP, should the driver set SO_RCV_BUF to the
                given value? The default value of '0', means use the
                platform default value for this property)</td><td>0</td><td>5.0.7</td></tr><tr><td scope="row">tcpSndBuf</td><td>If connecting using TCP/IP, should the driver set SO_SND_BUF to the
                given value? The default value of '0', means use the
                platform default value for this property)</td><td>0</td><td>5.0.7</td></tr><tr><td scope="row">tcpTrafficClass</td><td>If connecting using TCP/IP, should the driver set traffic class or
                type-of-service fields ?See the documentation for
java.net.Socket.setTrafficClass() for more information.</td><td>0</td><td>5.0.7</td></tr></tbody></table>

#####High Availability and Clustering.

<table summary="This table lists Connector/J High Availability and
          Clustering connection properties." border="1"><colgroup><col class="cj_propstbl_prop_name"><col class="cj_propstbl_prop_defn"><col class="cj_propstbl_default"><col class="cj_propstbl_since_version"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td scope="row">autoReconnect</td><td>Should the driver try to re-establish stale and/or dead connections? If
                enabled the driver will throw an exception for a queries
                issued on a stale or dead connection, which belong to
                the current transaction, but will attempt reconnect
                before the next query issued on the connection in a new
                transaction. The use of this feature is not recommended,
                because it has side effects related to session state and
                data consistency when applications don't handle
                SQLExceptions properly, and is only designed to be used
                when you are unable to configure your application to
                handle SQLExceptions resulting from dead and stale
                connections properly. Alternatively, as a last option,
                investigate setting the MySQL server variable
                "wait_timeout" to a high value, rather than the default
                of 8 hours.</td><td>false</td><td>1.1</td></tr><tr><td scope="row">autoReconnectForPools</td><td>Use a reconnection strategy appropriate for connection pools (defaults
                to 'false')</td><td>false</td><td>3.1.3</td></tr><tr><td scope="row">failOverReadOnly</td><td>When failing over in autoReconnect mode, should the connection be set to
                'read-only'?</td><td>true</td><td>3.0.12</td></tr><tr><td scope="row">maxReconnects</td><td>Maximum number of reconnects to attempt if autoReconnect is true,
                default is '3'.</td><td>3</td><td>1.1</td></tr><tr><td scope="row">reconnectAtTxEnd</td><td>If autoReconnect is set to true, should the driver attempt reconnections
                at the end of every transaction?</td><td>false</td><td>3.0.10</td></tr><tr><td scope="row">retriesAllDown</td><td>When using loadbalancing, the number of times the driver should cycle
                through available hosts, attempting to connect. Between
                cycles, the driver will pause for 250ms if no servers
                are available.</td><td>120</td><td>5.1.6</td></tr><tr><td scope="row">initialTimeout</td><td>If autoReconnect is enabled, the initial time to wait between re-connect
                attempts (in seconds, defaults to '2').</td><td>2</td><td>1.1</td></tr><tr><td scope="row">roundRobinLoadBalance</td><td>When autoReconnect is enabled, and failoverReadonly is false, should we
                pick hosts to connect to on a round-robin basis?</td><td>false</td><td>3.1.2</td></tr><tr><td scope="row">queriesBeforeRetryMaster</td><td>Number of queries to issue before falling back to master when failed
                over (when using multi-host failover). Whichever
                condition is met first, 'queriesBeforeRetryMaster' or
                'secondsBeforeRetryMaster' will cause an attempt to be
                made to reconnect to the master. Defaults to 50.</td><td>50</td><td>3.0.2</td></tr><tr><td scope="row">secondsBeforeRetryMaster</td><td>How long should the driver wait, when failed over, before attempting</td><td>30</td><td>3.0.2</td></tr><tr><td scope="row">selfDestructOnPingMaxOperations</td><td>=If set to a non-zero value, the driver will report close the connection
                and report failure when Connection.ping() or
                Connection.isValid(int) is called if the connection's
                count of commands sent to the server exceeds this value.</td><td>0</td><td>5.1.6</td></tr><tr><td scope="row">selfDestructOnPingSecondsLifetime</td><td>If set to a non-zero value, the driver will report close the connection
                and report failure when Connection.ping() or
                Connection.isValid(int) is called if the connection's
                lifetime exceeds this value.</td><td>0</td><td>5.1.6</td></tr><tr><td scope="row">resourceId</td><td>A globally unique name that identifies the resource that this datasource
                or connection is connected to, used for
                XAResource.isSameRM() when the driver can't determine
this value based on hostnames used in the URL</td><td>&nbsp;</td><td>5.0.1</td></tr></tbody></table>

#####Security

<table summary="This table lists Connector/J Security connection
          properties." border="1"><colgroup><col class="cj_propstbl_prop_name"><col class="cj_propstbl_prop_defn"><col class="cj_propstbl_default"><col class="cj_propstbl_since_version"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td scope="row">allowMultiQueries</td><td>Allow the use of ';' to delimit multiple queries during one statement
                (true/false), defaults to 'false', and does not affect
                the addBatch() and executeBatch() methods, which instead
                rely on rewriteBatchStatements.</td><td>false</td><td>3.1.1</td></tr><tr><td scope="row">useSSL</td><td>Use SSL when communicating with the server (true/false), defaults to
                'false'</td><td>false</td><td>3.0.2</td></tr><tr><td scope="row">requireSSL</td><td>Require SSL connection if useSSL=true? (defaults to 'false').</td><td>false</td><td>3.1.0</td></tr><tr><td scope="row">verifyServerCertificate</td><td>If "useSSL" is set to "true", should the driver verify the server's
                certificate? When using this feature, the keystore
                parameters should be specified by the
                "clientCertificateKeyStore*" properties, rather than
                system properties.</td><td>true</td><td>5.1.6</td></tr><tr><td scope="row">clientCertificateKeyStoreUrl</td><td>URL to the client certificate KeyStore (if not specified, use defaults)</td><td>&nbsp;</td><td>5.1.0</td></tr><tr><td scope="row">clientCertificateKeyStoreType</td><td>KeyStore type for client certificates (NULL or empty means use the
                default, which is "JKS". Standard keystore types
                supported by the JVM are "JKS" and "PKCS12", your
                environment may have more available depending on what
                security products are installed and available to the
                JVM.</td><td>JKS</td><td>5.1.0</td></tr><tr><td scope="row">clientCertificateKeyStorePassword</td><td>Password for the client certificates KeyStore</td><td>&nbsp;</td><td>5.1.0</td></tr><tr><td scope="row">trustCertificateKeyStoreUrl</td><td>URL to the trusted root certificate KeyStore (if not specified, use
                defaults)</td><td>&nbsp;</td><td>5.1.0</td></tr><tr><td scope="row">trustCertificateKeyStoreType</td><td>KeyStore type for trusted root certificates (NULL or empty means use the
                default, which is "JKS". Standard keystore types
                supported by the JVM are "JKS" and "PKCS12", your
                environment may have more available depending on what
                security products are installed and available to the
                JVM.</td><td>JKS</td><td>5.1.0</td></tr><tr><td scope="row">trustCertificateKeyStorePassword</td><td>Password for the trusted root certificates KeyStore</td><td>&nbsp;</td><td>5.1.0</td></tr><tr><td scope="row">allowLoadLocalInfile</td><td>Should the driver allow use of 'LOAD DATA LOCAL INFILE...' (defaults to
                'true').</td><td>true</td><td>3.0.3</td></tr><tr><td scope="row">allowUrlInLocalInfile</td><td>Should the driver allow URLs in 'LOAD DATA LOCAL INFILE' statements?</td><td>false</td><td>3.1.4</td></tr><tr><td scope="row">paranoid</td><td>Take measures to prevent exposure sensitive information in error
                messages and clear data structures holding sensitive
                data when possible? (defaults to 'false')</td><td>false</td><td>3.0.1</td></tr><tr><td scope="row">passwordCharacterEncoding</td><td>What character encoding is used for passwords? Leaving this set to the
                default value (null), uses the platform character set,
                which works for ISO8859_1 (i.e. "latin1") passwords. For
                passwords in other character encodings, the encoding
                will have to be specified with this property, as it's
not possible for the driver to auto-detect this.</td><td>&nbsp;</td><td>5.1.7</td></tr></tbody></table>

#####Performance Extensions

<table summary="This table lists Connector/J Performance Extensions
          connection properties." border="1"><colgroup><col class="cj_propstbl_prop_name"><col class="cj_propstbl_prop_defn"><col class="cj_propstbl_default"><col class="cj_propstbl_since_version"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td scope="row">callableStmtCacheSize</td><td>If 'cacheCallableStmts' is enabled, how many callable statements should
                be cached?</td><td>100</td><td>3.1.2</td></tr><tr><td scope="row">metadataCacheSize</td><td>The number of queries to cache ResultSetMetadata for if
                cacheResultSetMetaData is set to 'true' (default 50)</td><td>50</td><td>3.1.1</td></tr><tr><td scope="row">useLocalSessionState</td><td>Should the driver refer to the internal values of autocommit and
                transaction isolation that are set by
                Connection.setAutoCommit() and
                Connection.setTransactionIsolation() and transaction
                state as maintained by the protocol, rather than
                querying the database or blindly sending commands to the
                database for commit() or rollback() method calls?</td><td>false</td><td>3.1.7</td></tr><tr><td scope="row">useLocalTransactionState</td><td>Should the driver use the in-transaction state provided by the MySQL
                protocol to determine if a commit() or rollback() should
                actually be sent to the database?</td><td>false</td><td>5.1.7</td></tr><tr><td scope="row">prepStmtCacheSize</td><td>If prepared statement caching is enabled, how many prepared statements
                should be cached?</td><td>25</td><td>3.0.10</td></tr><tr><td scope="row">prepStmtCacheSqlLimit</td><td>If prepared statement caching is enabled, what's the largest SQL the
                driver will cache the parsing for?</td><td>256</td><td>3.0.10</td></tr><tr><td scope="row">parseInfoCacheFactory</td><td>Name of a class implementing com.mysql.jdbc.CacheAdapterFactory, which
                will be used to create caches for the parsed
                representation of client-side prepared statements.</td><td>com.mysql.jdbc.PerConnectionLRUFactory</td><td>5.1.1</td></tr><tr><td scope="row">serverConfigCacheFactory</td><td>Name of a class implementing
                com.mysql.jdbc.CacheAdapterFactory&lt;String,
                Map&lt;String, String&gt;&gt;, which will be used to
                create caches for MySQL server configuration values</td><td>com.mysql.jdbc.PerVmServerConfigCacheFactory</td><td>5.1.1</td></tr><tr><td scope="row">alwaysSendSetIsolation</td><td>Should the driver always communicate with the database when
                Connection.setTransactionIsolation() is called? If set
                to false, the driver will only communicate with the
                database when the requested transaction isolation is
                different than the whichever is newer, the last value
                that was set via Connection.setTransactionIsolation(),
                or the value that was read from the server when the
                connection was established. Note that
                useLocalSessionState=true will force the same behavior
                as alwaysSendSetIsolation=false, regardless of how
                alwaysSendSetIsolation is set.</td><td>true</td><td>3.1.7</td></tr><tr><td scope="row">maintainTimeStats</td><td>Should the driver maintain various internal timers to enable idle time
                calculations as well as more verbose error messages when
                the connection to the server fails? Setting this
                property to false removes at least two calls to
                System.getCurrentTimeMillis() per query.</td><td>true</td><td>3.1.9</td></tr><tr><td scope="row">useCursorFetch</td><td>If connected to MySQL &gt; 5.0.2, and setFetchSize() &gt; 0 on a
                statement, should that statement use cursor-based
                fetching to retrieve rows?</td><td>false</td><td>5.0.0</td></tr><tr><td scope="row">blobSendChunkSize</td><td>Chunk to use when sending BLOB/CLOBs via ServerPreparedStatements</td><td>1048576</td><td>3.1.9</td></tr><tr><td scope="row">cacheCallableStmts</td><td>Should the driver cache the parsing stage of CallableStatements</td><td>false</td><td>3.1.2</td></tr><tr><td scope="row">cachePrepStmts</td><td>Should the driver cache the parsing stage of PreparedStatements of
                client-side prepared statements, the "check" for
                suitability of server-side prepared and server-side
                prepared statements themselves?</td><td>false</td><td>3.0.10</td></tr><tr><td scope="row">cacheResultSetMetadata</td><td>Should the driver cache ResultSetMetaData for Statements and
                PreparedStatements? (Req. JDK-1.4+, true/false, default
                'false')</td><td>false</td><td>3.1.1</td></tr><tr><td scope="row">cacheServerConfiguration</td><td>Should the driver cache the results of 'SHOW VARIABLES' and 'SHOW
                COLLATION' on a per-URL basis?</td><td>false</td><td>3.1.5</td></tr><tr><td scope="row">defaultFetchSize</td><td>The driver will call setFetchSize(n) with this value on all
                newly-created Statements</td><td>0</td><td>3.1.9</td></tr><tr><td scope="row">dontTrackOpenResources</td><td>The JDBC specification requires the driver to automatically track and
                close resources, however if your application doesn't do
                a good job of explicitly calling close() on statements
                or result sets, this can cause memory leakage. Setting
                this property to true relaxes this constraint, and can
                be more memory efficient for some applications.</td><td>false</td><td>3.1.7</td></tr><tr><td scope="row">dynamicCalendars</td><td>Should the driver retrieve the default calendar when required, or cache
                it per connection/session?</td><td>false</td><td>3.1.5</td></tr><tr><td scope="row">elideSetAutoCommits</td><td>If using MySQL-4.1 or newer, should the driver only issue 'set
                autocommit=n' queries when the server's state doesn't
                match the requested state by
                Connection.setAutoCommit(boolean)?</td><td>false</td><td>3.1.3</td></tr><tr><td scope="row">enableQueryTimeouts</td><td>When enabled, query timeouts set via Statement.setQueryTimeout() use a
                shared java.util.Timer instance for scheduling. Even if
                the timeout doesn't expire before the query is
                processed, there will be memory used by the TimerTask
                for the given timeout which won't be reclaimed until the
                time the timeout would have expired if it hadn't been
                cancelled by the driver. High-load environments might
                want to consider disabling this functionality.</td><td>true</td><td>5.0.6</td></tr><tr><td scope="row">holdResultsOpenOverStatementClose</td><td>Should the driver close result sets on Statement.close() as required by
                the JDBC specification?</td><td>false</td><td>3.1.7</td></tr><tr><td scope="row">largeRowSizeThreshold</td><td>What size result set row should the JDBC driver consider "large", and
                thus use a more memory-efficient way of representing the
                row internally?</td><td>2048</td><td>5.1.1</td></tr><tr><td scope="row">loadBalanceStrategy</td><td>If using a load-balanced connection to connect to SQL nodes in a MySQL
                Cluster/NDB configuration (by using the URL prefix
                "jdbc:mysql:loadbalance://"), which load balancing
                algorithm should the driver use: (1) "random" - the
                driver will pick a random host for each request. This
                tends to work better than round-robin, as the randomness
                will somewhat account for spreading loads where requests
                vary in response time, while round-robin can sometimes
                lead to overloaded nodes if there are variations in
                response times across the workload. (2)
                "bestResponseTime" - the driver will route the request
                to the host that had the best response time for the
                previous transaction.</td><td>random</td><td>5.0.6</td></tr><tr><td scope="row">locatorFetchBufferSize</td><td>If 'emulateLocators' is configured to 'true', what size buffer should be
                used when fetching BLOB data for getBinaryInputStream?</td><td>1048576</td><td>3.2.1</td></tr><tr><td scope="row">rewriteBatchedStatements</td><td>Should the driver use multiqueries (irregardless of the setting of
                "allowMultiQueries") as well as rewriting of prepared
                statements for INSERT into multi-value inserts when
                executeBatch() is called? Notice that this has the
                potential for SQL injection if using plain
                java.sql.Statements and your code doesn't sanitize input
                correctly. Notice that for prepared statements,
                server-side prepared statements can not currently take
                advantage of this rewrite option, and that if you don't
                specify stream lengths when using
                PreparedStatement.set*Stream(), the driver won't be able
                to determine the optimum number of parameters per batch
                and you might receive an error from the driver that the
                resultant packet is too large.
                Statement.getGeneratedKeys() for these rewritten
                statements only works when the entire batch includes
                INSERT statements.</td><td>false</td><td>3.1.13</td></tr><tr><td scope="row">useDirectRowUnpack</td><td>Use newer result set row unpacking code that skips a copy from network
                buffers to a MySQL packet instance and instead reads
                directly into the result set row data buffers.</td><td>true</td><td>5.1.1</td></tr><tr><td scope="row">useDynamicCharsetInfo</td><td>Should the driver use a per-connection cache of character set
                information queried from the server when necessary, or
                use a built-in static mapping that is more efficient,
                but isn't aware of custom character sets or character
                sets implemented after the release of the JDBC driver?</td><td>true</td><td>5.0.6</td></tr><tr><td scope="row">useFastDateParsing</td><td>Use internal String-&gt;Date/Time/Timestamp conversion routines to avoid
                excessive object creation?</td><td>true</td><td>5.0.5</td></tr><tr><td scope="row">useFastIntParsing</td><td>Use internal String-&gt;Integer conversion routines to avoid excessive
                object creation?</td><td>true</td><td>3.1.4</td></tr><tr><td scope="row">useJvmCharsetConverters</td><td>Always use the character encoding routines built into the JVM, rather
                than using lookup tables for single-byte character sets?</td><td>false</td><td>5.0.1</td></tr><tr><td scope="row">useReadAheadInput</td><td>Use newer, optimized non-blocking, buffered input stream when reading
from the server?</td><td>true</td><td>3.1.5</td></tr></tbody></table>

#####Debugging/Profiling

<table summary="This table lists Connector/J Debugging/Profiling
          connection properties." border="1"><colgroup><col class="cj_propstbl_prop_name"><col class="cj_propstbl_prop_defn"><col class="cj_propstbl_default"><col class="cj_propstbl_since_version"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td scope="row">logger</td><td>The name of a class that implements "com.mysql.jdbc.log.Log" that will
                be used to log messages to. (default is
                "com.mysql.jdbc.log.StandardLogger", which logs to
                STDERR)</td><td>com.mysql.jdbc.log.StandardLogger</td><td>3.1.1</td></tr><tr><td scope="row">gatherPerfMetrics</td><td>Should the driver gather performance metrics, and report them via the
                configured logger every 'reportMetricsIntervalMillis'
                milliseconds?</td><td>false</td><td>3.1.2</td></tr><tr><td scope="row">profileSQL</td><td>Trace queries and their execution/fetch times to the configured logger
                (true/false) defaults to 'false'</td><td>false</td><td>3.1.0</td></tr><tr><td scope="row">profileSql</td><td>Deprecated, use 'profileSQL' instead. Trace queries and their
                execution/fetch times on STDERR (true/false) defaults to
                'false'</td><td>&nbsp;</td><td>2.0.14</td></tr><tr><td scope="row">reportMetricsIntervalMillis</td><td>If 'gatherPerfMetrics' is enabled, how often should they be logged (in
                ms)?</td><td>30000</td><td>3.1.2</td></tr><tr><td scope="row">maxQuerySizeToLog</td><td>Controls the maximum length/size of a query that will get logged when
                profiling or tracing</td><td>2048</td><td>3.1.3</td></tr><tr><td scope="row">packetDebugBufferSize</td><td>The maximum number of packets to retain when 'enablePacketDebug' is true</td><td>20</td><td>3.1.3</td></tr><tr><td scope="row">slowQueryThresholdMillis</td><td>If 'logSlowQueries' is enabled, how long should a query (in ms) before
                it is logged as 'slow'?</td><td>2000</td><td>3.1.2</td></tr><tr><td scope="row">slowQueryThresholdNanos</td><td>If 'useNanosForElapsedTime' is set to true, and this property is set to
                a non-zero value, the driver will use this threshold (in
                nanosecond units) to determine if a query was slow.</td><td>0</td><td>5.0.7</td></tr><tr><td scope="row">useUsageAdvisor</td><td>Should the driver issue 'usage' warnings advising proper and efficient
                usage of JDBC and MySQL Connector/J to the log
                (true/false, defaults to 'false')?</td><td>false</td><td>3.1.1</td></tr><tr><td scope="row">autoGenerateTestcaseScript</td><td>Should the driver dump the SQL it is executing, including server-side
                prepared statements to STDERR?</td><td>false</td><td>3.1.9</td></tr><tr><td scope="row">autoSlowLog</td><td>Instead of using slowQueryThreshold* to determine if a query is slow
                enough to be logged, maintain statistics that allow the
                driver to determine queries that are outside the 99th
                percentile?</td><td>true</td><td>5.1.4</td></tr><tr><td scope="row">clientInfoProvider</td><td>The name of a class that implements the
                com.mysql.jdbc.JDBC4ClientInfoProvider interface in
                order to support JDBC-4.0's
                Connection.get/setClientInfo() methods</td><td>com.mysql.jdbc.JDBC4CommentClientInfoProvider</td><td>5.1.0</td></tr><tr><td scope="row">dumpMetadataOnColumnNotFound</td><td>Should the driver dump the field-level metadata of a result set into the
                exception message when ResultSet.findColumn() fails?</td><td>false</td><td>3.1.13</td></tr><tr><td scope="row">dumpQueriesOnException</td><td>Should the driver dump the contents of the query sent to the server in
                the message for SQLExceptions?</td><td>false</td><td>3.1.3</td></tr><tr><td scope="row">enablePacketDebug</td><td>When enabled, a ring-buffer of 'packetDebugBufferSize' packets will be
                kept, and dumped when exceptions are thrown in key areas
                in the driver's code</td><td>false</td><td>3.1.3</td></tr><tr><td scope="row">explainSlowQueries</td><td>If 'logSlowQueries' is enabled, should the driver automatically issue an
                'EXPLAIN' on the server and send the results to the
                configured log at a WARN level?</td><td>false</td><td>3.1.2</td></tr><tr><td scope="row">includeInnodbStatusInDeadlockExceptions</td><td>Include the output of "SHOW ENGINE INNODB STATUS" in exception messages
                when deadlock exceptions are detected?</td><td>false</td><td>5.0.7</td></tr><tr><td scope="row">includeThreadDumpInDeadlockExceptions</td><td>Include a current Java thread dump in exception messages when deadlock
                exceptions are detected?</td><td>false</td><td>5.1.15</td></tr><tr><td scope="row">includeThreadNamesAsStatementComment</td><td>Include the name of the current thread as a comment visible in "SHOW
                PROCESSLIST", or in Innodb deadlock dumps, useful in
                correlation with
                "includeInnodbStatusInDeadlockExceptions=true" and
                "includeThreadDumpInDeadlockExceptions=true".</td><td>false</td><td>5.1.15</td></tr><tr><td scope="row">logSlowQueries</td><td>Should queries that take longer than 'slowQueryThresholdMillis' be
                logged?</td><td>false</td><td>3.1.2</td></tr><tr><td scope="row">logXaCommands</td><td>Should the driver log XA commands sent by MysqlXaConnection to the
                server, at the DEBUG level of logging?</td><td>false</td><td>5.0.5</td></tr><tr><td scope="row">profilerEventHandler</td><td>Name of a class that implements the interface
                com.mysql.jdbc.profiler.ProfilerEventHandler that will
                be used to handle profiling/tracing events.</td><td>com.mysql.jdbc.profiler.LoggingProfilerEventHandler</td><td>5.1.6</td></tr><tr><td scope="row">resultSetSizeThreshold</td><td>If the usage advisor is enabled, how many rows should a result set
                contain before the driver warns that it is suspiciously
                large?</td><td>100</td><td>5.0.5</td></tr><tr><td scope="row">traceProtocol</td><td>Should trace-level network protocol be logged?</td><td>false</td><td>3.1.2</td></tr><tr><td scope="row">useNanosForElapsedTime</td><td>For profiling/debugging functionality that measures elapsed time, should
                the driver try to use nanoseconds resolution if
available (JDK &gt;= 1.5)?</td><td>false</td><td>5.0.7</td></tr></tbody></table>

#####Miscellaneous

<table summary="This table lists Connector/J Miscellaneous connection
          properties." border="1"><colgroup><col class="cj_propstbl_prop_name"><col class="cj_propstbl_prop_defn"><col class="cj_propstbl_default"><col class="cj_propstbl_since_version"></colgroup><tbody><tr><td scope="row"><span class="bold"><strong> Property Name </strong></span></td><td><span class="bold"><strong> Definition </strong></span></td><td><span class="bold"><strong> Default Value </strong></span></td><td><span class="bold"><strong> Since Version </strong></span></td></tr><tr><td scope="row">useUnicode</td><td>Should the driver use Unicode character encodings when handling strings?
                Should only be used when the driver can't determine the
                character set mapping, or you are trying to 'force' the
                driver to use a character set that MySQL either doesn't
                natively support (such as UTF-8), true/false, defaults
                to 'true'</td><td>true</td><td>1.1g</td></tr><tr><td scope="row">characterEncoding</td><td>If 'useUnicode' is set to true, what character encoding should the
                driver use when dealing with strings? (defaults is to
                'autodetect')</td><td>&nbsp;</td><td>1.1g</td></tr><tr><td scope="row">characterSetResults</td><td>Character set to tell the server to return results as.</td><td>&nbsp;</td><td>3.0.13</td></tr><tr><td scope="row">connectionAttributes</td><td>A comma-delimited list of user-defined key:value pairs (in addition to
                standard MySQL-defined key:value pairs) to be passed to
                MySQL Server for display as connection attributes in the
                PERFORMANCE_SCHEMA.SESSION_CONNECT_ATTRS table. Example
                usage: connectionAttributes=key1:value1,key2:value2 This
                functionality is available for use with MySQL Server
                version 5.6 or later only. Earlier versions of MySQL
                Server do not support connection attributes, causing
                this configuration option will be ignored. Setting
                connectionAttributes=none will cause connection
                attribute processing to be bypassed, for situations
                where Connection creation/initialization speed is
                critical.</td><td>&nbsp;</td><td>5.1.25</td></tr><tr><td scope="row">connectionCollation</td><td>If set, tells the server to use this collation via 'set
                collation_connection'</td><td>&nbsp;</td><td>3.0.13</td></tr><tr><td scope="row">useBlobToStoreUTF8OutsideBMP</td><td>Tells the driver to treat [MEDIUM/LONG]BLOB columns as [LONG]VARCHAR
                columns holding text encoded in UTF-8 that has
                characters outside the BMP (4-byte encodings), which
                MySQL server can't handle natively.</td><td>false</td><td>5.1.3</td></tr><tr><td scope="row">utf8OutsideBmpExcludedColumnNamePattern</td><td>When "useBlobToStoreUTF8OutsideBMP" is set to "true", column names
                matching the given regex will still be treated as BLOBs
                unless they match the regex specified for
                "utf8OutsideBmpIncludedColumnNamePattern". The regex
                must follow the patterns used for the java.util.regex
                package.</td><td>&nbsp;</td><td>5.1.3</td></tr><tr><td scope="row">utf8OutsideBmpIncludedColumnNamePattern</td><td>Used to specify exclusion rules to
                "utf8OutsideBmpExcludedColumnNamePattern". The regex
                must follow the patterns used for the java.util.regex
                package.</td><td>&nbsp;</td><td>5.1.3</td></tr><tr><td scope="row">loadBalanceEnableJMX</td><td>Enables JMX-based management of load-balanced connection groups,
                including live addition/removal of hosts from
                load-balancing pool.</td><td>false</td><td>5.1.13</td></tr><tr><td scope="row">sessionVariables</td><td>A comma-separated list of name/value pairs to be sent as SET SESSION ...
                to the server when the driver connects.</td><td>&nbsp;</td><td>3.1.8</td></tr><tr><td scope="row">useColumnNamesInFindColumn</td><td>Prior to JDBC-4.0, the JDBC specification had a bug related to what
                could be given as a "column name" to ResultSet methods
                like findColumn(), or getters that took a String
                property. JDBC-4.0 clarified "column name" to mean the
                label, as given in an "AS" clause and returned by
                ResultSetMetaData.getColumnLabel(), and if no AS clause,
                the column name. Setting this property to "true" will
                give behavior that is congruent to JDBC-3.0 and earlier
                versions of the JDBC specification, but which because of
                the specification bug could give unexpected results.
                This property is preferred over
                "useOldAliasMetadataBehavior" unless you need the
                specific behavior that it provides with respect to
                ResultSetMetadata.</td><td>false</td><td>5.1.7</td></tr><tr><td scope="row">allowNanAndInf</td><td>Should the driver allow NaN or +/- INF values in
                PreparedStatement.setDouble()?</td><td>false</td><td>3.1.5</td></tr><tr><td scope="row">autoClosePStmtStreams</td><td>Should the driver automatically call .close() on streams/readers passed
                as arguments via set*() methods?</td><td>false</td><td>3.1.12</td></tr><tr><td scope="row">autoDeserialize</td><td>Should the driver automatically detect and de-serialize objects stored
                in BLOB fields?</td><td>false</td><td>3.1.5</td></tr><tr><td scope="row">blobsAreStrings</td><td>Should the driver always treat BLOBs as Strings - specifically to work
                around dubious metadata returned by the server for GROUP
                BY clauses?</td><td>false</td><td>5.0.8</td></tr><tr><td scope="row">capitalizeTypeNames</td><td>Capitalize type names in DatabaseMetaData? (usually only useful when
                using WebObjects, true/false, defaults to 'false')</td><td>true</td><td>2.0.7</td></tr><tr><td scope="row">clobCharacterEncoding</td><td>The character encoding to use for sending and retrieving TEXT,
                MEDIUMTEXT and LONGTEXT values instead of the configured
                connection characterEncoding</td><td>&nbsp;</td><td>5.0.0</td></tr><tr><td scope="row">clobberStreamingResults</td><td>This will cause a 'streaming' ResultSet to be automatically closed, and
                any outstanding data still streaming from the server to
                be discarded if another query is executed before all the
                data has been read from the server.</td><td>false</td><td>3.0.9</td></tr><tr><td scope="row">compensateOnDuplicateKeyUpdateCounts</td><td>Should the driver compensate for the update counts of "ON DUPLICATE KEY"
                INSERT statements (2 = 1, 0 = 1) when using prepared
                statements?</td><td>false</td><td>5.1.7</td></tr><tr><td scope="row">continueBatchOnError</td><td>Should the driver continue processing batch commands if one statement
                fails. The JDBC spec allows either way (defaults to
                'true').</td><td>true</td><td>3.0.3</td></tr><tr><td scope="row">createDatabaseIfNotExist</td><td>Creates the database given in the URL if it doesn't yet exist. Assumes
                the configured user has permissions to create databases.</td><td>false</td><td>3.1.9</td></tr><tr><td scope="row">emptyStringsConvertToZero</td><td>Should the driver allow conversions from empty string fields to numeric
                values of '0'?</td><td>true</td><td>3.1.8</td></tr><tr><td scope="row">emulateLocators</td><td>Should the driver emulate java.sql.Blobs with locators? With this
                feature enabled, the driver will delay loading the
                actual Blob data until the one of the retrieval methods
                (getInputStream(), getBytes(), and so forth) on the blob
                data stream has been accessed. For this to work, you
                must use a column alias with the value of the column to
                the actual name of the Blob. The feature also has the
                following restrictions: The SELECT that created the
                result set must reference only one table, the table must
                have a primary key; the SELECT must alias the original
                blob column name, specified as a string, to an alternate
                name; the SELECT must cover all columns that make up the
                primary key.</td><td>false</td><td>3.1.0</td></tr><tr><td scope="row">emulateUnsupportedPstmts</td><td>Should the driver detect prepared statements that are not supported by
                the server, and replace them with client-side emulated
                versions?</td><td>true</td><td>3.1.7</td></tr><tr><td scope="row">exceptionInterceptors</td><td>Comma-delimited list of classes that implement
                com.mysql.jdbc.ExceptionInterceptor. These classes will
                be instantiated one per Connection instance, and all
                SQLExceptions thrown by the driver will be allowed to be
                intercepted by these interceptors, in a chained fashion,
                with the first class listed as the head of the chain.</td><td>&nbsp;</td><td>5.1.8</td></tr><tr><td scope="row">functionsNeverReturnBlobs</td><td>Should the driver always treat data from functions returning BLOBs as
                Strings - specifically to work around dubious metadata
                returned by the server for GROUP BY clauses?</td><td>false</td><td>5.0.8</td></tr><tr><td scope="row">generateSimpleParameterMetadata</td><td>Should the driver generate simplified parameter metadata for
                PreparedStatements when no metadata is available either
                because the server couldn't support preparing the
                statement, or server-side prepared statements are
                disabled?</td><td>false</td><td>5.0.5</td></tr><tr><td scope="row">getProceduresReturnsFunctions</td><td>Pre-JDBC4 DatabaseMetaData API has only getProcedures() and
                getProcedureColumns() methods, so they return metadata
                info for both stored procedures and functions. JDBC4 was
                extended with getFunctions() and getFunctionColumns()
                methods and the expected behaviour of previous methods
                is not well defined. For JDBC4 and higher, default
                'true' value means that calls of
                DatabaseMetaData.getProcedures() and
                DatabaseMetaData.getProcedureColumns() return metadata
                for both procedures and function, as before, keeping
                back compatibility. Setting this property to false
                allows to decouple from pre-JDBC4 behaviour of
                DatabaseMetaData.getProcedures() and
                DatabaseMetaData.getProcedureColumns(), forcing these to
                return metadata for procedures only.</td><td>true</td><td>5.1.26</td></tr><tr><td scope="row">ignoreNonTxTables</td><td>Ignore non-transactional table warning for rollback? (defaults to
                'false').</td><td>false</td><td>3.0.9</td></tr><tr><td scope="row">jdbcCompliantTruncation</td><td>Should the driver throw java.sql.DataTruncation exceptions when data is
                truncated as is required by the JDBC specification when
                connected to a server that supports warnings (MySQL
                4.1.0 and newer)? This property has no effect if the
                server sql-mode includes STRICT_TRANS_TABLES.</td><td>true</td><td>3.1.2</td></tr><tr><td scope="row">loadBalanceAutoCommitStatementRegex</td><td>When load-balancing is enabled for auto-commit statements (via
                loadBalanceAutoCommitStatementThreshold), the statement
                counter will only increment when the SQL matches the
                regular expression. By default, every statement issued
                matches.</td><td>&nbsp;</td><td>5.1.15</td></tr><tr><td scope="row">loadBalanceAutoCommitStatementThreshold</td><td>When auto-commit is enabled, the number of statements which should be
                executed before triggering load-balancing to rebalance.
                Default value of 0 causes load-balanced connections to
                only rebalance when exceptions are encountered, or
                auto-commit is disabled and transactions are explicitly
                committed or rolled back.</td><td>0</td><td>5.1.15</td></tr><tr><td scope="row">loadBalanceBlacklistTimeout</td><td>Time in milliseconds between checks of servers which are unavailable, by
                controlling how long a server lives in the global
                blacklist.</td><td>0</td><td>5.1.0</td></tr><tr><td scope="row">loadBalanceConnectionGroup</td><td>Logical group of load-balanced connections within a classloader, used to
                manage different groups independently. If not specified,
                live management of load-balanced connections is
                disabled.</td><td>&nbsp;</td><td>5.1.13</td></tr><tr><td scope="row">loadBalanceExceptionChecker</td><td>Fully-qualified class name of custom exception checker. The class must
                implement com.mysql.jdbc.LoadBalanceExceptionChecker
                interface, and is used to inspect SQLExceptions and
                determine whether they should trigger fail-over to
                another host in a load-balanced deployment.</td><td>com.mysql.jdbc.StandardLoadBalanceExceptionChecker</td><td>5.1.13</td></tr><tr><td scope="row">loadBalancePingTimeout</td><td>Time in milliseconds to wait for ping response from each of
                load-balanced physical connections when using
                load-balanced Connection.</td><td>0</td><td>5.1.13</td></tr><tr><td scope="row">loadBalanceSQLExceptionSubclassFailover</td><td>Comma-delimited list of classes/interfaces used by default load-balanced
                exception checker to determine whether a given
                SQLException should trigger failover. The comparison is
                done using Class.isInstance(SQLException) using the
                thrown SQLException.</td><td>&nbsp;</td><td>5.1.13</td></tr><tr><td scope="row">loadBalanceSQLStateFailover</td><td>Comma-delimited list of SQLState codes used by default load-balanced
                exception checker to determine whether a given
                SQLException should trigger failover. The SQLState of a
                given SQLException is evaluated to determine whether it
                begins with any value in the comma-delimited list.</td><td>&nbsp;</td><td>5.1.13</td></tr><tr><td scope="row">loadBalanceValidateConnectionOnSwapServer</td><td>Should the load-balanced Connection explicitly check whether the
                connection is live when swapping to a new physical
                connection at commit/rollback?</td><td>false</td><td>5.1.13</td></tr><tr><td scope="row">maxRows</td><td>The maximum number of rows to return (0, the default means return all
                rows).</td><td>-1</td><td>all versions</td></tr><tr><td scope="row">netTimeoutForStreamingResults</td><td>What value should the driver automatically set the server setting
                'net_write_timeout' to when the streaming result sets
                feature is in use? (value has unit of seconds, the value
                '0' means the driver will not try and adjust this value)</td><td>600</td><td>5.1.0</td></tr><tr><td scope="row">noAccessToProcedureBodies</td><td>When determining procedure parameter types for CallableStatements, and
                the connected user can't access procedure bodies through
                "SHOW CREATE PROCEDURE" or select on mysql.proc should
                the driver instead create basic metadata (all parameters
                reported as IN VARCHARs, but allowing
                registerOutParameter() to be called on them anyway)
                instead of throwing an exception?</td><td>false</td><td>5.0.3</td></tr><tr><td scope="row">noDatetimeStringSync</td><td>Don't ensure that
                ResultSet.getDatetimeType().toString().equals(ResultSet.getString())</td><td>false</td><td>3.1.7</td></tr><tr><td scope="row">noTimezoneConversionForTimeType</td><td>Don't convert TIME values using the server timezone if
                'useTimezone'='true'</td><td>false</td><td>5.0.0</td></tr><tr><td scope="row">nullCatalogMeansCurrent</td><td>When DatabaseMetadataMethods ask for a 'catalog' parameter, does the
                value null mean use the current catalog? (this is not
                JDBC-compliant, but follows legacy behavior from earlier
                versions of the driver)</td><td>true</td><td>3.1.8</td></tr><tr><td scope="row">nullNamePatternMatchesAll</td><td>Should DatabaseMetaData methods that accept *pattern parameters treat
                null the same as '%' (this is not JDBC-compliant,
                however older versions of the driver accepted this
                departure from the specification)</td><td>true</td><td>3.1.8</td></tr><tr><td scope="row">overrideSupportsIntegrityEnhancementFacility</td><td>Should the driver return "true" for
                DatabaseMetaData.supportsIntegrityEnhancementFacility()
                even if the database doesn't support it to workaround
                applications that require this method to return "true"
                to signal support of foreign keys, even though the SQL
                specification states that this facility contains much
                more than just foreign key support (one such application
                being OpenOffice)?</td><td>false</td><td>3.1.12</td></tr><tr><td scope="row">padCharsWithSpace</td><td>If a result set column has the CHAR type and the value does not fill the
                amount of characters specified in the DDL for the
                column, should the driver pad the remaining characters
                with space (for ANSI compliance)?</td><td>false</td><td>5.0.6</td></tr><tr><td scope="row">pedantic</td><td>Follow the JDBC spec to the letter.</td><td>false</td><td>3.0.0</td></tr><tr><td scope="row">pinGlobalTxToPhysicalConnection</td><td>When using XAConnections, should the driver ensure that operations on a
                given XID are always routed to the same physical
                connection? This allows the XAConnection to support "XA
                START ... JOIN" after "XA END" has been called</td><td>false</td><td>5.0.1</td></tr><tr><td scope="row">populateInsertRowWithDefaultValues</td><td>When using ResultSets that are CONCUR_UPDATABLE, should the driver
                pre-populate the "insert" row with default values from
                the DDL for the table used in the query so those values
                are immediately available for ResultSet accessors? This
                functionality requires a call to the database for
                metadata each time a result set of this type is created.
                If disabled (the default), the default values will be
                populated by the an internal call to refreshRow() which
                pulls back default values and/or values changed by
                triggers.</td><td>false</td><td>5.0.5</td></tr><tr><td scope="row">processEscapeCodesForPrepStmts</td><td>Should the driver process escape codes in queries that are prepared?</td><td>true</td><td>3.1.12</td></tr><tr><td scope="row">queryTimeoutKillsConnection</td><td>If the timeout given in Statement.setQueryTimeout() expires, should the
                driver forcibly abort the Connection instead of
                attempting to abort the query?</td><td>false</td><td>5.1.9</td></tr><tr><td scope="row">relaxAutoCommit</td><td>If the version of MySQL the driver connects to does not support
                transactions, still allow calls to commit(), rollback()
                and setAutoCommit() (true/false, defaults to 'false')?</td><td>false</td><td>2.0.13</td></tr><tr><td scope="row">retainStatementAfterResultSetClose</td><td>Should the driver retain the Statement reference in a ResultSet after
                ResultSet.close() has been called. This is not
                JDBC-compliant after JDBC-4.0.</td><td>false</td><td>3.1.11</td></tr><tr><td scope="row">rollbackOnPooledClose</td><td>Should the driver issue a rollback() when the logical connection in a
                pool is closed?</td><td>true</td><td>3.0.15</td></tr><tr><td scope="row">runningCTS13</td><td>Enables workarounds for bugs in Sun's JDBC compliance testsuite version
                1.3</td><td>false</td><td>3.1.7</td></tr><tr><td scope="row">serverTimezone</td><td>Override detection/mapping of timezone. Used when timezone from server
                doesn't map to Java timezone</td><td>&nbsp;</td><td>3.0.2</td></tr><tr><td scope="row">statementInterceptors</td><td>A comma-delimited list of classes that implement
                "com.mysql.jdbc.StatementInterceptor" that should be
                placed "in between" query execution to influence the
                results. StatementInterceptors are "chainable", the
                results returned by the "current" interceptor will be
                passed on to the next in in the chain, from
                left-to-right order, as specified in this property.</td><td>&nbsp;</td><td>5.1.1</td></tr><tr><td scope="row">strictFloatingPoint</td><td>Used only in older versions of compliance test</td><td>false</td><td>3.0.0</td></tr><tr><td scope="row">strictUpdates</td><td>Should the driver do strict checking (all primary keys selected) of
                updatable result sets (true, false, defaults to 'true')?</td><td>true</td><td>3.0.4</td></tr><tr><td scope="row">tinyInt1isBit</td><td>Should the driver treat the datatype TINYINT(1) as the BIT type (because
                the server silently converts BIT -&gt; TINYINT(1) when
                creating tables)?</td><td>true</td><td>3.0.16</td></tr><tr><td scope="row">transformedBitIsBoolean</td><td>If the driver converts TINYINT(1) to a different type, should it use
                BOOLEAN instead of BIT for future compatibility with
                MySQL-5.0, as MySQL-5.0 has a BIT type?</td><td>false</td><td>3.1.9</td></tr><tr><td scope="row">treatUtilDateAsTimestamp</td><td>Should the driver treat java.util.Date as a TIMESTAMP for the purposes
                of PreparedStatement.setObject()?</td><td>true</td><td>5.0.5</td></tr><tr><td scope="row">ultraDevHack</td><td>Create PreparedStatements for prepareCall() when required, because
                UltraDev is broken and issues a prepareCall() for _all_
                statements? (true/false, defaults to 'false')</td><td>false</td><td>2.0.3</td></tr><tr><td scope="row">useAffectedRows</td><td>Don't set the CLIENT_FOUND_ROWS flag when connecting to the server (not
                JDBC-compliant, will break most applications that rely
                on "found" rows vs. "affected rows" for DML statements),
                but does cause "correct" update counts from "INSERT ...
                ON DUPLICATE KEY UPDATE" statements to be returned by
                the server.</td><td>false</td><td>5.1.7</td></tr><tr><td scope="row">useGmtMillisForDatetimes</td><td>Convert between session timezone and GMT before creating Date and
                Timestamp instances (value of "false" is legacy
                behavior, "true" leads to more JDBC-compliant behavior.</td><td>false</td><td>3.1.12</td></tr><tr><td scope="row">useHostsInPrivileges</td><td>Add '@hostname' to users in DatabaseMetaData.getColumn/TablePrivileges()
                (true/false), defaults to 'true'.</td><td>true</td><td>3.0.2</td></tr><tr><td scope="row">useInformationSchema</td><td>When connected to MySQL-5.0.7 or newer, should the driver use the
                INFORMATION_SCHEMA to derive information used by
                DatabaseMetaData?</td><td>false</td><td>5.0.0</td></tr><tr><td scope="row">useJDBCCompliantTimezoneShift</td><td>Should the driver use JDBC-compliant rules when converting
                TIME/TIMESTAMP/DATETIME values' timezone information for
                those JDBC arguments which take a java.util.Calendar
                argument? (Notice that this option is exclusive of the
                "useTimezone=true" configuration option.)</td><td>false</td><td>5.0.0</td></tr><tr><td scope="row">useLegacyDatetimeCode</td><td>Use code for DATE/TIME/DATETIME/TIMESTAMP handling in result sets and
                statements that consistently handles timezone
                conversions from client to server and back again, or use
                the legacy code for these datatypes that has been in the
                driver for backwards-compatibility?</td><td>true</td><td>5.1.6</td></tr><tr><td scope="row">useOldAliasMetadataBehavior</td><td>Should the driver use the legacy behavior for "AS" clauses on columns
                and tables, and only return aliases (if any) for
                ResultSetMetaData.getColumnName() or
                ResultSetMetaData.getTableName() rather than the
                original column/table name? In 5.0.x, the default value
                was true.</td><td>false</td><td>5.0.4</td></tr><tr><td scope="row">useOldUTF8Behavior</td><td>Use the UTF-8 behavior the driver did when communicating with 4.0 and
                older servers</td><td>false</td><td>3.1.6</td></tr><tr><td scope="row">useOnlyServerErrorMessages</td><td>Don't prepend 'standard' SQLState error messages to error messages
                returned by the server.</td><td>true</td><td>3.0.15</td></tr><tr><td scope="row">useSSPSCompatibleTimezoneShift</td><td>If migrating from an environment that was using server-side prepared
                statements, and the configuration property
                "useJDBCCompliantTimeZoneShift" set to "true", use
                compatible behavior when not using server-side prepared
                statements when sending TIMESTAMP values to the MySQL
                server.</td><td>false</td><td>5.0.5</td></tr><tr><td scope="row">useServerPrepStmts</td><td>Use server-side prepared statements if the server supports them?</td><td>false</td><td>3.1.0</td></tr><tr><td scope="row">useSqlStateCodes</td><td>Use SQL Standard state codes instead of 'legacy' X/Open/SQL state codes
                (true/false), default is 'true'</td><td>true</td><td>3.1.3</td></tr><tr><td scope="row">useStreamLengthsInPrepStmts</td><td>Honor stream length parameter in
                PreparedStatement/ResultSet.setXXXStream() method calls
                (true/false, defaults to 'true')?</td><td>true</td><td>3.0.2</td></tr><tr><td scope="row">useTimezone</td><td>Convert time/date types between client and server timezones (true/false,
                defaults to 'false')?</td><td>false</td><td>3.0.2</td></tr><tr><td scope="row">useUnbufferedInput</td><td>Don't use BufferedInputStream for reading data from the server</td><td>true</td><td>3.0.11</td></tr><tr><td scope="row">yearIsDateType</td><td>Should the JDBC driver treat the MySQL type "YEAR" as a java.sql.Date,
                or as a SHORT?</td><td>true</td><td>3.1.9</td></tr><tr><td scope="row">zeroDateTimeBehavior</td><td>What should happen when the driver encounters DATETIME values that are
                composed entirely of zeros (used by MySQL to represent
                invalid dates)? Valid values are "exception", "round"
and "convertToNull".</td><td>exception</td><td>3.1.4</td></tr></tbody></table>

Connector/J也支持使用Windows NT，Windows 2000或者是Windows XP上的命名管道来访问MySQL，这需要使用`socketFactory`属性将`NamedPipeSocketFactory`作为socket插件工厂。如果不实用`namedPipePath`属性，默认使用`\\.\pipe\MySQL`。如果使用`NamedPipeSocketFactory`，那么JDBC的url中的主机名和端口号就会被忽略。如果要启动这个特性，使用：
  
```sql

socketFactory=com.mysql.jdbc.NamedPipeSocketFactory

```

命名管道只在连接到运行JDBC驱动的那台主机上的MySQL服务时才可用。在简单的测试中，命名管道比标准的TCP/IP访问快30%-50%。然而，在不同的系统中，也会有差别，并且命名管道在很多Windows配置中比TCP/IP慢。

要创建自己的套接字工厂，参照下面的代码：

`com.mysql.jdbc.NamedPipeSocketFactory`或`com.mysql.jdbc.StandardSocketFactory`

#####22.3.5.1.1. Properties Files for the `useConfigs` Option

`useConfigs`连接选项在为特别场景指定联接选项时是很方便。可以使用的参数值对应于Connector/J的`mysql-connector-java-version-bin.jar`JAR文件中的`.properties`文件。例如，Connector/J 5.1.9驱动包括如下配置属性文件：

```sql

$ unzip mysql-connector-java-5.1.19-bin.jar '*/configs/*'
Archive: mysql-connector-java-5.1.19-bin.jar
creating: com/mysql/jdbc/configs/
inflating: com/mysql/jdbc/configs/3-0-Compat.properties 
inflating: com/mysql/jdbc/configs/5-0-Compat.properties 
inflating: com/mysql/jdbc/configs/clusterBase.properties 
inflating: com/mysql/jdbc/configs/coldFusion.properties 
inflating: com/mysql/jdbc/configs/fullDebug.properties 
inflating: com/mysql/jdbc/configs/maxPerformance.properties 
inflating: com/mysql/jdbc/configs/solarisMaxPerformance.properties 

```

要指定一种选项联接，设置` useConfigs=3-0-Compat,useConfigs=maxPerformance`等。下面的部分展示了部分`useConfigs`选项设置。更多详细信息，参考`.properties`文件中的注释。

#####3-0-Compat

```sql

emptyStringsConvertToZero=true
jdbcCompliantTruncation=false
noDatetimeStringSync=true
nullCatalogMeansCurrent=true
nullNamePatternMatchesAll=true
transformedBitIsBoolean=false
dontTrackOpenResources=true
zeroDateTimeBehavior=convertToNull
useServerPrepStmts=false
autoClosePStmtStreams=true
processEscapeCodesForPrepStmts=false
useFastDateParsing=false
populateInsertRowWithDefaultValues=false
useDirectRowUnpack=false

```

#####5-0-Compat

```sql

useDirectRowUnpack=false

```

#####clusterBase

```sql

autoReconnect=true
failOverReadOnly=false
roundRobinLoadBalance=true

```

#####coldFusion

```sql

useDynamicCharsetInfo=false
alwaysSendSetIsolation=false
useLocalSessionState=true
autoReconnect=true

```

#####fullDebug

```sql

profileSQL=true
gatherPerMetrics=true
useUsageAdvisor=true
logSlowQueries=true
explainSlowQueries=true
maxPerformance
cachePrepStmts=true
cacheCallableStmts=true
cacheServerConfiguration=true
useLocalSessionState=true
elideSetAutoCommits=true
alwaysSendSetIsolation=false
enableQueryTimeouts=false
solarisMaxPerformance
useUnbufferedInput=false
useReadAheadInput=false
maintainTimeStats=false

```

####22.3.5.2.JDBC API Implementation Notes

MySQL Connector/J带有所有的可公开获取的符合Sun公司的JDBC规范的测试套件。这一节给出关于接口层的详细描述，主要是关于实现决策，可能影响你使用MySQL Connector/J的编码应用。关于哪些功能必须实现或在JDBC规范的实现中允许多大的偏差，JDBC规范是含糊不清的。

* BLOB

从Connector/J 3.1.0版本开始就可以通过在JDBC URL中添加`emulateLocators=true`使用定位器模拟BLOB。使用这种方式，驱动将延迟加载实际的BLOB数据，直到检索其他数据时，然后在BLOB数据流上使用检索的方法（如`getInputStream()`，`getBytes()`等等）。

必须指定真实的BLOB列的别名，例如：

```sql

SELECT id, 'data' as blob_data from blobtable

```

必须遵循如下规则：

* `SELECT`只能查询一张表。表必须有一个主键.
* `SELECT`必须指定原始BLOB列名的别名，指定为一个字符串，用一个备用的名称。
* `SELECT`必须覆盖所有组成主键的列。

BLOB的实现不允许就地修改（它们是副本，正如`DatabaseMetaData.locatorsUpdateCopies`方法所指定的那样）。因为如此，使用对应的` PreparedStatement.setBlob()`或`ResultSet.updateBlob()`（对于可更新的结果集）方法将变化保存到数据库中。

* CallableStatement

从Connector/J 3.1.1开始支持存储过程，当连接到MySQL5.0版本或者更新的版本时，使用`CallableStatement`接口。当前还不支持`CallableStatement`的`getParameterMetaData()`。

* CLOB

CLOB的实现不允许就地修改（它们是副本，正如`DatabaseMetaData.locatorsUpdateCopies`方法所指定的那样）。因为如此，使用`PreparedStatement.setClob()`方法将变化保存到数据库中。JDBC API没有` ResultSet.updateClob()`方法。

* Connection

不想先前的Connector/J JDBC驱动（MM.MySQL），`isClosed()`方法不会ping服务器看服务器是否可用。按照JDBC规范，如果当前连接的`close()`方法被调用了，那么回返回true。如果需要去顶连接是否仍然有效，只需执行一个简单的查询，例如`SELECT 1`。如果连接不再有效了，JDBC驱动会抛出一个异常。

* DatabaseMetaData

外键信息（`getImportedKeys()/getExportedKeys()`和`getCrossReference()`）仅仅在`InnoDB`引擎的表中有效。JDBC驱动使用`SHOW　CREATE TABLE`来检索这些信息，这样如果其他存储引擎添加了对外键的支持，驱动可以透明的支持外键。

* PreparedStatement

PreparedStatement在JDBC驱动中实现了，因为MySQL没有提供语句预处理功能。因为如此，驱动没有实现`getParameterMetaData()`和`getMetaData()`，因为它将要求驱动有一套完整的SQL语法分析程序。

从MySQL Connector/J 3.1.0版本开始，当MySQL服务器支持时，服务器端可以使用预处理和二进制编码结果集。

当使用服务器端预处理功能处理由`setBinaryStream(), setAsciiStream(),setUnicodeStream(), setBlob(),or setClob()`方法设置的large参数时需谨慎。再次执行将large参数替换为非large参数的语句时，调用`clearParameters()`方法，并且重新设置所有参数。这样做的原因如下：

* 在服务器端预处理语句和客户端执行过程中，large数据仅仅在`PreparedStatement.execute()`被调用后传输。
* 一旦设置参数结束，客户端读取数据的流被关闭（）并且不能再被读取了。
* 如果一个参数从large改变为非large，驱动必须重置服务端预处理语句状态来允许参数被改变。这移除了所有的发送到服务器端的large数据，因此需要使用`setBinaryStream(), setAsciiStream(),setUnicodeStream(), setBlob()`或` setClob()`方法重新发送数据。

因此，要将参数的类型由large改变为非large，必须调用`clearParameters()`方法并且在语句被执行之前重行设置预处理语句所有的参数。

* ResultSet

结果集默认可以完整检索并且完全存储的内存中的，在大多数情况下这是最有效的操作方式，这也使得MySQL的网络协议涉及更加容易实现。如果正在使用的ResultSet包含大量行或非常大的值，并且因为内存限制不能在JVM中分配堆空间，那么可以通知驱动以流的形式返回结果，一次一行数据。

要使用这个功能，先以下面的方式创建`Statement`实例：

```java

stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
java.sql.ResultSet.CONCUR_READ_ONLY);
stmt.setFetchSize(Integer.MIN_VALUE);

```

正向、只读结果集，以及`Integer.MIN_VALUE`的组合用于指示驱动程序以“流”方式逐行处理结果集。此后，对于该语句创建的结果集，将按行检索。

对于该方式，有一些需注意的事项。在当前连接上执行任何其他查询之前，应读取结果集中的所有行（或关闭结果集），否则将抛出异常。

最早释放这些语句上的锁（不管是`MyISAM`的表级锁还是诸如`InnoDB`这样的引擎上的行级所）的时机是在语句执行完的时候。

如果语句在事务范围内，那么在事务执行完成之后，这些锁就释放了（这意味着语句需要先执行完毕）。与大多数数据库一样，直到语句上的结果集被读取或者语句的活动结果集被关闭，语句才执行结束。

因此，对于流式结果集，如果想维持对当前表的并发访问，那么尽快处理结果集。

* ResultSetMetaData

`isAutoIncrement()`方法仅仅在MySQL4.0或更高版本的服务器上起作用。

* Statement

当使用3.2.1版本之前的JDBC驱动的版本，并且连接到的服务器版本在5.0.3之前，`setFetchSize()`方法将不起作用，除非切换到了上面描述的流式结果集。

Connector/J 5.0.0和之后的版本包括对`Statement.cancel()`和`Statement.setQueryTimeout()`的支持。`Statement.cancel()`和`Statement.setQueryTimeout()`都需要服务器版本为5.0.0或之后，并且需要不通的连接来执行`KILL QUERY`语句。在`setQueryTimeout()`方法的实现中，会创建一个额外的线程来处理超时问题。

> #####注意#####
> 执行取消`setQueryTimeout()`语句失败会以`RuntimeException`的形式列出，而不是默默的失败，由于当前无法消除因为超时而被取消的线程阻塞，也无法以其他异常形式抛出。

> #####注意#####
> MySQl语句`KILL QUERY`（驱动正是使用这个语句来实现`Statement.cancel()`的）的结果是不确定的，因此，避免尽量避免使用`Statement.cancel()`。如果当前没有执行查询，下一个查询被服务器终止。这种竞争状况在Connector/J 5.1.8中有防范措施。

MySQL不支持SQL游标，并且JDBC驱动也不模拟游标功能，所以`setCursorName()`没有效果。

Connector/J 5.1.3和后续版本报下下面两个额外方法：

* `setLocalInfileInputStream()`设置`InputStream()`实例，这个实例将用于发送数据到MySQL服务器获取`LOAD DATA LOCAL INFILE`语句而不是表示给语句传递的路径参数`FileInputStream`和`URLInputStream`。

这个数据流将在执行`LOAD DATA LOCAL INFILE`语句过程中被读取，并且将自动被驱动关闭，所以在每次调用`execute*()`时需要重置，否则将会造成MySQL服务器获取数据来完成`LOAD DATA LOCAL INFILE`请求。

如果这个值被设置为`NULL`，那么驱动将使用`FileInputStream`或`URLInputStream`来按需求进行转换。

* `getLocalInfileInputStream()`返回`InputStream`实例，这个实例将响应`LOAD DATA LOCAL INFILE`语句，进而发送数据。

如果没有这样的流使用了`setLocalInfileInputStream()`，那么方法将返回`NULL`。

####22.3.5.3. Java,JDBC and MySQL Types

MySQL Connector/J 在处理MySQL数据类型和Java数据类型的转换时非常灵活。

一般来说，任何MySQL数据类型都能被转换为`java.lang.String`类型，任何数字类型可以被转换为Java数字类型，虽然可能会四舍五入，溢出或者丢失精度。

> #####注意
> 所有`TEXT`类型值都返回`Types.LOGNVARCHAR`类型值，但是对这些值调用`getPrecision()`的返回值不同（分别为65535, 255, 16777215和2147483647），调用方法`getColumnType()`则返回-1。这种行为是有意为之，即使`TINYTEXT`并不属于这种类型，但是考虑到它的大小，在`LONGVARCHAR`类别中。这是为了避免对相同的基类进行不容的处理方式。之所以`getColumnType()`返回`-1`是因为服务器内部是以`TEXT`类型处理的，与`BLOB`类型相似。
> 同时注意到，`getColumnTypeName()`将返回`VARCHAR`类型，即使`getColumnType()`返回`Types.LONGVARCHAR`，因为`VARCHAR`是数据库根据类型指定的列名。

按照JDBC规范的要求，从Connector/J 3.1.0版本开始，JDBC驱动将发出警告或抛出`DataTruncation`异常，除非连接通过将`jdbcCompliantTruncation`设置为false。

下表列出了各种正常工作的转换，第一列是一种或多种MySQL数据类型，第二列列出了一种或多种可将第一类的MySQL类型转换成的Java类型。

######Table 22.24. Connection Properties - Miscellaneous

<table summary="Connection Properties - Miscellaneous" border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">MySQL数据类型</th><th scope="col">Java数据类型</th></tr></thead><tbody><tr><td scope="row"><code class="literal">CHAR, VARCHAR, BLOB, TEXT, ENUM, and SET</code></td><td><code class="literal">java.lang.String, java.io.InputStream, java.io.Reader,
                java.sql.Blob, java.sql.Clob</code></td></tr><tr><td scope="row"><code class="literal">FLOAT, REAL, DOUBLE PRECISION, NUMERIC, DECIMAL, TINYINT,
                SMALLINT, MEDIUMINT, INTEGER, BIGINT</code></td><td><code class="literal">java.lang.String, java.lang.Short, java.lang.Integer,
                java.lang.Long, java.lang.Double,
java.math.BigDecimal</code></td></tr><tr><td scope="row"><code class="literal">DATE, TIME, DATETIME, TIMESTAMP</code></td><td><code class="literal">java.lang.String, java.sql.Date, java.sql.Timestamp</code></td></tr></tbody></table>

> #####注意#####
> 如果选择Java数字类型，但是这种类型的精度或容量比相应MySQL类型小，那么舍入，溢出或者丢失精度的现象会发生。

根据JDBC规范，`ResultSet.getObject()`方法利用了MySQL和Java之间的类型转换。`ResultSetMetaData.GetColumnClassName()`的返回值也在下表中列出了。更多的信息请参见`Java2平台`的`java.sql.Types`类。

#####Table 22.25. MySQL Types to Java Types for ResultSet.getObject()

<table summary="MySQL Types to Java Types for ResultSet.getObject()" border="1"><colgroup><col><col><col></colgroup><thead><tr><th scope="col">MySQL Type Name</th><th scope="col">Return value of <code class="literal">GetColumnClassName</code></th><th scope="col">Returned as Java Class</th></tr></thead><tbody><tr><td scope="row"><code class="literal">BIT(1)</code> (new in MySQL-5.0)</td><td><code class="literal">BIT</code></td><td><code class="classname">java.lang.Boolean</code></td></tr><tr><td scope="row"><code class="literal">BIT( &gt; 1)</code> (new in MySQL-5.0)</td><td><code class="literal">BIT</code></td><td><code class="classname">byte[]</code></td></tr><tr><td scope="row"><code class="literal">TINYINT</code></td><td><code class="literal">TINYINT</code></td><td><code class="classname">java.lang.Boolean</code> if the configuration property
                <code class="literal">tinyInt1isBit</code> is set to
                <code class="literal">true</code> (the default) and the storage
                size is 1, or <code class="classname">java.lang.Integer</code>
                if not.</td></tr><tr><td scope="row"><code class="literal">BOOL</code>, <code class="literal">BOOLEAN</code></td><td><code class="literal">TINYINT</code></td><td>See <code class="literal">TINYINT</code>, above as these are aliases for
                <code class="literal">TINYINT(1)</code>, currently.</td></tr><tr><td scope="row"><code class="literal">SMALLINT[(M)] [UNSIGNED]</code></td><td><code class="literal">SMALLINT [UNSIGNED]</code></td><td><code class="classname">java.lang.Integer</code> (regardless if
                <code class="literal">UNSIGNED</code> or not)</td></tr><tr><td scope="row"><code class="literal">MEDIUMINT[(M)] [UNSIGNED]</code></td><td><code class="literal">MEDIUMINT [UNSIGNED]</code></td><td><code class="classname">java.lang.Integer,</code> if <code class="literal">UNSIGNED</code>
                <code class="classname">java.lang.Long</code> (C/J 3.1 and
                earlier), or <code class="classname">java.lang.Integer</code>
                for C/J 5.0 and later</td></tr><tr><td scope="row"><code class="literal">INT,INTEGER[(M)] [UNSIGNED]</code></td><td><code class="literal">INTEGER [UNSIGNED]</code></td><td><code class="classname">java.lang.Integer</code>, if <code class="literal">UNSIGNED</code>
                <code class="classname">java.lang.Long</code></td></tr><tr><td scope="row"><code class="literal">BIGINT[(M)] [UNSIGNED]</code></td><td><code class="literal">BIGINT [UNSIGNED]</code></td><td><code class="classname">java.lang.Long</code>, if UNSIGNED
                <code class="classname">java.math.BigInteger</code></td></tr><tr><td scope="row"><code class="literal">FLOAT[(M,D)]</code></td><td><code class="literal">FLOAT</code></td><td><code class="classname">java.lang.Float</code></td></tr><tr><td scope="row"><code class="literal">DOUBLE[(M,B)]</code></td><td><code class="literal">DOUBLE</code></td><td><code class="classname">java.lang.Double</code></td></tr><tr><td scope="row"><code class="literal">DECIMAL[(M[,D])]</code></td><td><code class="literal">DECIMAL</code></td><td><code class="classname">java.math.BigDecimal</code></td></tr><tr><td scope="row"><code class="literal">DATE</code></td><td><code class="literal">DATE</code></td><td><code class="classname">java.sql.Date</code></td></tr><tr><td scope="row"><code class="literal">DATETIME</code></td><td><code class="literal">DATETIME</code></td><td><code class="classname">java.sql.Timestamp</code></td></tr><tr><td scope="row"><code class="literal">TIMESTAMP[(M)]</code></td><td><code class="literal">TIMESTAMP</code></td><td><code class="classname">java.sql.Timestamp</code></td></tr><tr><td scope="row"><code class="literal">TIME</code></td><td><code class="literal">TIME</code></td><td><code class="classname">java.sql.Time</code></td></tr><tr><td scope="row"><code class="literal">YEAR[(2|4)]</code></td><td><code class="literal">YEAR</code></td><td>If <code class="literal">yearIsDateType</code> configuration property is set to
                <code class="literal">false</code>, then the returned object type
                is <code class="classname">java.sql.Short</code>. If set to
                <code class="literal">true</code> (the default), then the returned
                object is of type <code class="classname">java.sql.Date</code>
                with the date


                set to January 1st, at midnight.</td></tr><tr><td scope="row"><code class="literal">CHAR(M)</code></td><td><code class="literal">CHAR</code></td><td><code class="classname">java.lang.String</code> (unless the character set for
                the column is <code class="literal">BINARY</code>, then
                <code class="classname">byte[]</code> is returned.</td></tr><tr><td scope="row"><code class="literal">VARCHAR(M) [BINARY]</code></td><td><code class="literal">VARCHAR</code></td><td><code class="classname">java.lang.String</code> (unless the character set for
                the column is <code class="literal">BINARY</code>, then
<code class="classname">byte[]</code> is returned.</td></tr><tr><td scope="row"><code class="literal">BINARY(M)</code></td><td><code class="literal">BINARY</code></td><td><code class="classname">byte[]</code></td></tr><tr><td scope="row"><code class="literal">VARBINARY(M)</code></td><td><code class="literal">VARBINARY</code></td><td><code class="classname">byte[]</code></td></tr><tr><td scope="row"><code class="literal">TINYBLOB</code></td><td><code class="literal">TINYBLOB</code></td><td><code class="classname">byte[]</code></td></tr><tr><td scope="row"><code class="literal">TINYTEXT</code></td><td><code class="literal">VARCHAR</code></td><td><code class="classname">java.lang.String</code></td></tr><tr><td scope="row"><code class="literal">BLOB</code></td><td><code class="literal">BLOB</code></td><td><code class="classname">byte[]</code></td></tr><tr><td scope="row"><code class="literal">TEXT</code></td><td><code class="literal">VARCHAR</code></td><td><code class="classname">java.lang.String</code></td></tr><tr><td scope="row"><code class="literal">MEDIUMBLOB</code></td><td><code class="literal">MEDIUMBLOB</code></td><td><code class="classname">byte[]</code></td></tr><tr><td scope="row"><code class="literal">MEDIUMTEXT</code></td><td><code class="literal">VARCHAR</code></td><td><code class="classname">java.lang.String</code></td></tr><tr><td scope="row"><code class="literal">LONGBLOB</code></td><td><code class="literal">LONGBLOB</code></td><td><code class="classname">byte[]</code></td></tr><tr><td scope="row"><code class="literal">LONGTEXT</code></td><td><code class="literal">VARCHAR</code></td><td><code class="classname">java.lang.String</code></td></tr><tr><td scope="row"><code class="literal">ENUM('value1','value2',...)</code></td><td><code class="literal">CHAR</code></td><td><code class="classname">java.lang.String</code></td></tr><tr><td scope="row"><code class="literal">SET('value1','value2',...)</code></td><td><code class="literal">CHAR</code></td><td><code class="classname">java.lang.String</code></td></tr></tbody></table>

####22.3.5.4.Using Character Sets and Unicode

所有JDBC驱动发送给MySQL服务器的字符串被自动的从原生的Java Unicode形式转换为客户端字符编码，包括所有通过`Statement.execute()`,`Statement.executeUpdate()`,`Statement.executeQuery()`执行的查询，同样的还有`PreparedStatement`和`CallableStatement`参数，但是这些参数不能使用`setBytes(), setBinaryStream(), setAsciiStream(), setUnicodeStream()and
setBlob()`这些函数设置。

#####Number of Encodings Per Connection

在MySQL服务器4.1或更高版本中，Connector/J 支持客户端和服务器端的单字符编码，并且任何在结果集中，支持服务器返回给客户端的任意数量字符编码。

在MySQL服务器4.1版本之前，Connector/J 支持每个连接单一字符编码，这要么可以从服务器端自动检测到，要么可以由用户使用`useUnicode`和`characterEncoding`属性配置。

#####Setting the Character Encoding

在客户端和服务器端的字符编码是在每个连接中自动检测的。在4.1.0或更高版本的服务器中，使用`character_set_server`设置服务器端编码，在4.1.0之前的版本中，使用`character_set`系统变量设置。驱动自动的使用服务器端设置的编码。更多信息请参考[10.1.3.1节 “Server Character Set and Collation”][10-1-3-1]

例如，要在Connector/J中使用4字节的UTF-8字符集，使用`character_set_server=utf8mb4`配置服务器，并且不使用`characterEncoding`，这样Connector/J会自动检测到UTF-8设置。

要在客户端覆盖掉自动检测到的编码，可以在连接MySQL服务器的URL中使用`characterEncoding`属性。

当在客户端指定了字符编码时，使用Java风格的名字。下表列出了MySQL字符集名字和对应的Java风格的字符集名：

#####Table 22.26. MySQL to Java Encoding Name Translations

<table summary="MySQL to Java Encoding Name Translations" border="1"><colgroup><col><col></colgroup><thead><tr><th scope="col">MySQL Character Set Name</th><th scope="col">Java-Style Character Encoding Name</th></tr></thead><tbody><tr><td scope="row"><code class="literal">ascii</code></td><td><code class="literal">US-ASCII</code></td></tr><tr><td scope="row"><code class="literal">big5</code></td><td><code class="literal">Big5</code></td></tr><tr><td scope="row"><code class="literal">gbk</code></td><td><code class="literal">GBK</code></td></tr><tr><td scope="row"><code class="literal">sjis</code></td><td><code class="literal">SJIS (or Cp932 or MS932 for MySQL Server &lt; 4.1.11)</code></td></tr><tr><td scope="row"><code class="literal">cp932</code></td><td><code class="literal">Cp932 or MS932 (MySQL Server &gt; 4.1.11)</code></td></tr><tr><td scope="row"><code class="literal">gb2312</code></td><td><code class="literal">EUC_CN</code></td></tr><tr><td scope="row"><code class="literal">ujis</code></td><td><code class="literal">EUC_JP</code></td></tr><tr><td scope="row"><code class="literal">euckr</code></td><td><code class="literal">EUC_KR</code></td></tr><tr><td scope="row"><code class="literal">latin1</code></td><td><code class="literal">Cp1252</code></td></tr><tr><td scope="row"><code class="literal">latin2</code></td><td><code class="literal">ISO8859_2</code></td></tr><tr><td scope="row"><code class="literal">greek</code></td><td><code class="literal">ISO8859_7</code></td></tr><tr><td scope="row"><code class="literal">hebrew</code></td><td><code class="literal">ISO8859_8</code></td></tr><tr><td scope="row"><code class="literal">cp866</code></td><td><code class="literal">Cp866</code></td></tr><tr><td scope="row"><code class="literal">tis620</code></td><td><code class="literal">TIS620</code></td></tr><tr><td scope="row"><code class="literal">cp1250</code></td><td><code class="literal">Cp1250</code></td></tr><tr><td scope="row"><code class="literal">cp1251</code></td><td><code class="literal">Cp1251</code></td></tr><tr><td scope="row"><code class="literal">cp1257</code></td><td><code class="literal">Cp1257</code></td></tr><tr><td scope="row"><code class="literal">macroman</code></td><td><code class="literal">MacRoman</code></td></tr><tr><td scope="row"><code class="literal">macce</code></td><td><code class="literal">MacCentralEurope</code></td></tr><tr><td scope="row"><code class="literal">utf8</code></td><td><code class="literal">UTF-8</code></td></tr><tr><td scope="row"><code class="literal">ucs2</code></td><td><code class="literal">UnicodeBig</code></td></tr></tbody></table>

> #####警告
> 不要与Connector/J同时使用`set name`语句，因为驱动无法检测到字符编码的改变，并且将继续使用在连接建立时检测到的字符编码。

####22.3.5.5. Connecting Securely Using SSL

在MySQL的Connector/J中SSL将加密JDBC驱动和服务器之间传输的数据（除了建立连接握手阶段）。开启SSL会导致性能的下降，性能下降程度依赖于多种因素，包括（单不限于）语句的大小，返回的数据量，服务器端的硬件，使用的SSL库，网络带宽等等。

要想使用SSL，必须满足如下条件：

* JDK包含JSSE（Java Secure Sockets Extension），像JDK-1.4.1或者更新版本。当前SSL不支持在JDK中加入JSSE，像JDK-1.2.x或者JDK-1.3.x版本，由于下面的JSSE漏洞：[http://developer.java.sun.com/developer/bugParade/bugs/4273544.html][http://developer.java.sun.com/developer/bugParade/bugs/4273544.html]
* MySQL服务器支持SSL，并且已经编译和配置为支持SSL，MySQL4.0.4或后续版本都可以。更多信息参考[6.3.9.2节，“Configuring MySQL for SSL”][6-3-9-2]
* 客户端证书（稍后介绍）


系统通过两个Java信任库文件起作用，其中一个文件包含有关服务器的证书信息（如下面的`truststore`文件）。另一个文件包含有关客户端的证书信息（如下面的`keystore`文件）。所有的java truststore文件通过密码保护，在创建的时候会传递给`keytool`一个合适的密码。你需要文件名和相密码来创建一个SSL连接。

首先，需要导入MySQL服务器的CA证书到Java truststore。MySQL服务器CA证书样本位于MySQL源码发行版的`SSL`子目录。SSL将使用MySQL服务器的CA来确定是否客户端正在与一个安全的MySQL服务器通信。或者使用由SSL提供者授权或提供的CA证书。

为了使用`keytool`在当前目录创建一个truststore，并且导入服务器的CA证书（`cacert.pem`），可以按照下面的示例做（假设`keytool`在当前路径中。`keytool`通常位于JDK或JRE的`bin`目录中）：

```sql

shell> keytool -import -alias mysqlServerCACert \
-file cacert.pem -keystore truststore

```

当提示为keystore文件输入密码时，输入密码。与`keytool`交互过程如下：

```sql

Enter keystore password: *********
Owner: EMAILADDRESS=walrus@example.com, CN=Walrus,
O=MySQL AB, L=Orenburg, ST=Some-State, C=RU
Issuer: EMAILADDRESS=walrus@example.com, CN=Walrus,
O=MySQL AB, L=Orenburg, ST=Some-State, C=RU
Serial number: 0
Valid from:
Fri Aug 02 16:55:53 CDT 2002 until: Sat Aug 02 16:55:53 CDT 2003
Certificate fingerprints:
MD5: 61:91:A0:F2:03:07:61:7A:81:38:66:DA:19:C4:8D:AB
SHA1: 25:77:41:05:D5:AD:99:8C:14:8C:CA:68:9C:2F:B8:89:C3:34:4D:6C
Trust this certificate? [no]: yes
Certificate was added to keystore

```

然后又两个选项：要么引入刚刚导入的与CA证书匹配的客户端证书，要么创建一个客户端证书。

导入一个存在的证书的格式为DER格式。可以使用`openssl`来将已经存在的证书转换为该格式，例如：

```sql

shell> openssl x509 -outform DER -in client-cert.pem -out client.cert

```

现在使用`keytool`将转换好的证书导入到truststore：

```sql

shell> keytool -import -file client.cert -keystore keystore -alias mysqlClientCertificate

```

为了生成客户端证书，使用`keytool`创建一个合适的证书并且添加到`keytool`文件中：

```sql

shell> keytool -genkey -keyalg rsa \
-alias mysqlClientCertificate -keystore keystore 

```

Keytool将给出接下来的提示信息，并且在当前目录中创建一个名为`keystore`的keystore文件。

keytool的相应信息如下：

```sql

Enter keystore password: *********
What is your first and last name?
[Unknown]: Matthews
What is the name of your organizational unit?
[Unknown]: Software Development
What is the name of your organization?
[Unknown]: MySQL AB
What is the name of your City or Locality?
[Unknown]: Flossmoor
What is the name of your State or Province?
[Unknown]: IL
What is the two-letter country code for this unit?
[Unknown]: US
Is <CN=Matthews, OU=Software Development, O=MySQL AB,
L=Flossmoor, ST=IL, C=US> correct?
[no]: y
Enter key password for <mysqlClientCertificate>
(RETURN if same as keystore password):

```

最后，要想通过JSSE来使用keystrore和已经生成的truststore，就需要在启动JVM时设置下面的系统属性，用创建的keystore文件的路径替换`path_to_keystore_file`，再用生成的truststore文件路径替换`path_to_truststore_file`，并且为每个属性使用合适的密码。可以使用命令行来设置：

```sql

-Djavax.net.ssl.keyStore=path_to_keystore_file
-Djavax.net.ssl.keyStorePassword=password
-Djavax.net.ssl.trustStore=path_to_truststore_file
-Djavax.net.ssl.trustStorePassword=password

```

也可以在应用程序中直接设置：

```sql

System.setProperty("javax.net.ssl.keyStore","path_to_keystore_file");
System.setProperty("javax.net.ssl.keyStorePassword","password");
System.setProperty("javax.net.ssl.trustStore","path_to_truststore_file");
System.setProperty("javax.net.ssl.trustStorePassword","password");

```

同时，需要将配置MySQL Connector/J的连接属性`useSSL`属性设置为`true`，设置该属性可以通过在URL中添加`useSSL=true`，或者在传递给`DriverManager.getConnection()`的`java.util.Properties`实例中设置`useSSL`属性为`true`。

可以通过开启JSSE调试（如下面所述）测试SSL是否起作用，然后查找key：

```sql

...
*** ClientHello, v3.1
RandomCookie: GMT: 1018531834 bytes = { 199, 148, 180, 215, 74, 12, »
54, 244, 0, 168, 55, 103, 215, 64, 16, 138, 225, 190, 132, 153, 2, »
217, 219, 239, 202, 19, 121, 78 }
Session ID: {}
Cipher Suites: { 0, 5, 0, 4, 0, 9, 0, 10, 0, 18, 0, 19, 0, 3, 0, 17 }
Compression Methods: { 0 }
***
[write] MD5 and SHA1 hashes: len = 59
0000: 01 00 00 37 03 01 3D B6 90 FA C7 94 B4 D7 4A 0C ...7..=.......J.
0010: 36 F4 00 A8 37 67 D7 40 10 8A E1 BE 84 99 02 D9 6...7g.@........
0020: DB EF CA 13 79 4E 00 00 10 00 05 00 04 00 09 00 ....yN..........
0030: 0A 00 12 00 13 00 03 00 11 01 00 ...........
main, WRITE: SSL v3.1 Handshake, length = 59
main, READ: SSL v3.1 Handshake, length = 74
\*** ServerHello, v3.1
RandomCookie: GMT: 1018577560 bytes = { 116, 50, 4, 103, 25, 100, 58, »
202, 79, 185, 178, 100, 215, 66, 254, 21, 83, 187, 190, 42, 170, 3, »
132, 110, 82, 148, 160, 92 }
Session ID: {163, 227, 84, 53, 81, 127, 252, 254, 178, 179, 68, 63, »
182, 158, 30, 11, 150, 79, 170, 76, 255, 92, 15, 226, 24, 17, 177, »
219, 158, 177, 187, 143}
Cipher Suite: { 0, 5 }
Compression Method: 0
\***
%% Created: [Session-1, SSL_RSA_WITH_RC4_128_SHA]
** SSL_RSA_WITH_RC4_128_SHA
[read] MD5 and SHA1 hashes: len = 74
0000: 02 00 00 46 03 01 3D B6 43 98 74 32 04 67 19 64 ...F..=.C.t2.g.d
0010: 3A CA 4F B9 B2 64 D7 42 FE 15 53 BB BE 2A AA 03 :.O..d.B..S..*..
0020: 84 6E 52 94 A0 5C 20 A3 E3 54 35 51 7F FC FE B2 .nR..\ ..T5Q....
0030: B3 44 3F B6 9E 1E 0B 96 4F AA 4C FF 5C 0F E2 18 .D?.....O.L.\...
0040: 11 B1 DB 9E B1 BB 8F 00 05 00 ..........
main, READ: SSL v3.1 Handshake, length = 1712
...

```

当设置了属性`Djavax.net.debug=all`后，JSSE可提供调试功能（到`stdout`）。这将告诉用户keystore和truststore正在被使用，以及在SSL握手和证书交换过程中将出现什么。当尝试进行SSL连接时，如果不确定哪部分不能工作，该设置十分有用。

####22.3.5.6. Connecting Using PAM Authentication

使用Connector/J5.1.21或者更高版本的Java应用程序可以使用可插拔的认证模（pluggable authentication module，PAM）块连接到MySQL服务器。

要想使PAN认证工作，必须满足一下条件：

* MySQL服务器支持PAM认证：如商业发型版本MySQL5.5.16或者更高版本。参见[ 6.3.7.5节, “The PAM Authentication Plugin”][6-3-7-5]获取更多信息。Connector/J实现了同样的明文认证方式，如[6.3.7.7节, “The Cleartext ClientSide Authentication Plugin”][6-3-7-7]
* SSL功能，如[22.3.5.5节, “Connecting Securely Using SSL”][22-3-5-5]所述。因为PAM认证策略发送原始的密码给服务器，所以与服务器的连接必须加密。

PAM认证支持在Connector/J5.1.21是默认开启的，所以不需要额外的配置。

如果要禁用PAM认证，在以逗号分隔的`disabledAuthenticationPlugins`连接选项参数中指定`mysql_clear_password`或`com.mysql.jdbc.authentication.MysqlClearPasswordPlugin`。参见[22.3.5.1节, “Driver/Datasource Class Names, URL Syntax and Configuration Properties for Connector/J”][22-3-5-1]获取更多关于连接选项的信息。

####22.3.5.7. Using Master/Slave Replication with ReplicationConnection

在Connector/J3.1.7或者更高版本，提供了1个驱动程序变体，它能自动发出读／写主服务器的查询，或根据`Connection.getReadOnly()`的状态对从主机集群进行故障切换或轮询负载均衡。

应用程序通过调用`Connection.setReadOnly(true)`发出信号，声明该事物为只读，这个具有复制意识的连接将使用其中一个连接，这个连接通过使用轮询策略保证每个主机的负载均衡（给定的连接与从主机密切相关，除非从主机被移除）。如果正在写事物，或者是对时间敏感的读事物（记住，在MySQL中复制是异步的），设置连接非只读，通过调用`Connection.setReadOnly(false)`并且驱动将保证后续的调用发送到MySQL主服务器。驱动负责传播当前的自动提交状态，隔离级别以及用于完成该负载平衡功能的所有连接之间的数据字典。

要想启用该功能，那么在配置应用程序的数据库连接池，或者在创建独立应用程序的JDBC驱动实例时使用`com.mysql.jdbc.ReplicationDriver`类。由于它接收与标准MySQL的JDBC驱动同样的URL格式，`ReplicationDriver`目前不能与基于`java.sql.DriverManager`一起使用，除非它是唯一一个由`DriverManager`注册的MySQL的JDBC驱动。

下面是一个简单的例子，关于`ReplicationDriver`在独立的应用程序中如何使用：

```java

import java.sql.Connection;
import java.sql.ResultSet;
import java.util.Properties;
import com.mysql.jdbc.ReplicationDriver;
public class ReplicationDriverDemo {
public static void main(String[] args) throws Exception {
ReplicationDriver driver = new ReplicationDriver();
Properties props = new Properties();
// We want this for failover on the slaves
props.put("autoReconnect", "true");
// We want to load balance between the slaves
props.put("roundRobinLoadBalance", "true");
props.put("user", "foo");
props.put("password", "bar");
//
// Looks like a normal MySQL JDBC url, with a
// comma-separated list of hosts, the first
// being the 'master', the rest being any number
// of slaves that the driver will load balance against
//
Connection conn =
driver.connect("jdbc:mysql:replication://master,slave1,slave2,slave3/test",
props);
//
// Perform read/write work on the master
// by setting the read-only flag to "false"
//
conn.setReadOnly(false);
conn.setAutoCommit(false);
conn.createStatement().executeUpdate("UPDATE some_table ....");
conn.commit();
//
// Now, do a query from a slave, the driver automatically picks one
// from the list
//
conn.setReadOnly(true);
ResultSet rs =
conn.createStatement().executeQuery("SELECT a,b FROM alt_table");
.......
}
}

```

考虑负责JDBC连接池负载均衡的工具，这个工具提供了对标准JDBC驱动的封装，并且使用户使用包含对系统故障的检查和负载不均衡检查的数据库连接池。更多信息参见[Load Balancing JDBC Pool (lbpool)][load-balance-jdbc-pool]。

####22.3.5.8. Mapping MySQL Error Numbers to JDBC SQLState Codes

下表提供了与MySQL错误码对应的`SQLState`值映射：

######Table 22.27. Mapping of MySQL Error Numbers to SQLStates

<table summary="Mapping of MySQL Error Numbers to SQLStates" border="1"><colgroup><col width="20"><col width="40"><col width="20"><col width="20"></colgroup><thead><tr><th scope="col">MySQL Error Number</th><th scope="col">MySQL Error Name</th><th scope="col">Legacy (X/Open) SQLState</th><th scope="col">SQL Standard SQLState</th></tr></thead><tbody><tr><td scope="row">1022</td><td>ER_DUP_KEY</td><td>S1000</td><td>23000</td></tr><tr><td scope="row">1037</td><td>ER_OUTOFMEMORY</td><td>S1001</td><td>HY001</td></tr><tr><td scope="row">1038</td><td>ER_OUT_OF_SORTMEMORY</td><td>S1001</td><td>HY001</td></tr><tr><td scope="row">1040</td><td>ER_CON_COUNT_ERROR</td><td>08004</td><td>08004</td></tr><tr><td scope="row">1042</td><td>ER_BAD_HOST_ERROR</td><td>08004</td><td>08S01</td></tr><tr><td scope="row">1043</td><td>ER_HANDSHAKE_ERROR</td><td>08004</td><td>08S01</td></tr><tr><td scope="row">1044</td><td>ER_DBACCESS_DENIED_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1045</td><td>ER_ACCESS_DENIED_ERROR</td><td>28000</td><td>28000</td></tr><tr><td scope="row">1047</td><td>ER_UNKNOWN_COM_ERROR</td><td>08S01</td><td>HY000</td></tr><tr><td scope="row">1050</td><td>ER_TABLE_EXISTS_ERROR</td><td>S1000</td><td>42S01</td></tr><tr><td scope="row">1051</td><td>ER_BAD_TABLE_ERROR</td><td>42S02</td><td>42S02</td></tr><tr><td scope="row">1052</td><td>ER_NON_UNIQ_ERROR</td><td>S1000</td><td>23000</td></tr><tr><td scope="row">1053</td><td>ER_SERVER_SHUTDOWN</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1054</td><td>ER_BAD_FIELD_ERROR</td><td>S0022</td><td>42S22</td></tr><tr><td scope="row">1055</td><td>ER_WRONG_FIELD_WITH_GROUP</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1056</td><td>ER_WRONG_GROUP_FIELD</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1057</td><td>ER_WRONG_SUM_SELECT</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1058</td><td>ER_WRONG_VALUE_COUNT</td><td>21S01</td><td>21S01</td></tr><tr><td scope="row">1059</td><td>ER_TOO_LONG_IDENT</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1060</td><td>ER_DUP_FIELDNAME</td><td>S1009</td><td>42S21</td></tr><tr><td scope="row">1061</td><td>ER_DUP_KEYNAME</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1062</td><td>ER_DUP_ENTRY</td><td>S1009</td><td>23000</td></tr><tr><td scope="row">1063</td><td>ER_WRONG_FIELD_SPEC</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1064</td><td>ER_PARSE_ERROR</td><td>42000</td><td>42000</td></tr><tr><td scope="row">1065</td><td>ER_EMPTY_QUERY</td><td>42000</td><td>42000</td></tr><tr><td scope="row">1066</td><td>ER_NONUNIQ_TABLE</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1067</td><td>ER_INVALID_DEFAULT</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1068</td><td>ER_MULTIPLE_PRI_KEY</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1069</td><td>ER_TOO_MANY_KEYS</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1070</td><td>ER_TOO_MANY_KEY_PARTS</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1071</td><td>ER_TOO_LONG_KEY</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1072</td><td>ER_KEY_COLUMN_DOES_NOT_EXITS</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1073</td><td>ER_BLOB_USED_AS_KEY</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1074</td><td>ER_TOO_BIG_FIELDLENGTH</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1075</td><td>ER_WRONG_AUTO_KEY</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1080</td><td>ER_FORCING_CLOSE</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1081</td><td>ER_IPSOCK_ERROR</td><td>08S01</td><td>08S01</td></tr><tr><td scope="row">1082</td><td>ER_NO_SUCH_INDEX</td><td>S1009</td><td>42S12</td></tr><tr><td scope="row">1083</td><td>ER_WRONG_FIELD_TERMINATORS</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1084</td><td>ER_BLOBS_AND_NO_TERMINATED</td><td>S1009</td><td>42000</td></tr><tr><td scope="row">1090</td><td>ER_CANT_REMOVE_ALL_FIELDS</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1091</td><td>ER_CANT_DROP_FIELD_OR_KEY</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1101</td><td>ER_BLOB_CANT_HAVE_DEFAULT</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1102</td><td>ER_WRONG_DB_NAME</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1103</td><td>ER_WRONG_TABLE_NAME</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1104</td><td>ER_TOO_BIG_SELECT</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1106</td><td>ER_UNKNOWN_PROCEDURE</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1107</td><td>ER_WRONG_PARAMCOUNT_TO_PROCEDURE</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1109</td><td>ER_UNKNOWN_TABLE</td><td>S1000</td><td>42S02</td></tr><tr><td scope="row">1110</td><td>ER_FIELD_SPECIFIED_TWICE</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1112</td><td>ER_UNSUPPORTED_EXTENSION</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1113</td><td>ER_TABLE_MUST_HAVE_COLUMNS</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1115</td><td>ER_UNKNOWN_CHARACTER_SET</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1118</td><td>ER_TOO_BIG_ROWSIZE</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1120</td><td>ER_WRONG_OUTER_JOIN</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1121</td><td>ER_NULL_COLUMN_IN_INDEX</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1129</td><td>ER_HOST_IS_BLOCKED</td><td>08004</td><td>HY000</td></tr><tr><td scope="row">1130</td><td>ER_HOST_NOT_PRIVILEGED</td><td>08004</td><td>HY000</td></tr><tr><td scope="row">1131</td><td>ER_PASSWORD_ANONYMOUS_USER</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1132</td><td>ER_PASSWORD_NOT_ALLOWED</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1133</td><td>ER_PASSWORD_NO_MATCH</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1136</td><td>ER_WRONG_VALUE_COUNT_ON_ROW</td><td>S1000</td><td>21S01</td></tr><tr><td scope="row">1138</td><td>ER_INVALID_USE_OF_NULL</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1139</td><td>ER_REGEXP_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1140</td><td>ER_MIX_OF_GROUP_FUNC_AND_FIELDS</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1141</td><td>ER_NONEXISTING_GRANT</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1142</td><td>ER_TABLEACCESS_DENIED_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1143</td><td>ER_COLUMNACCESS_DENIED_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1144</td><td>ER_ILLEGAL_GRANT_FOR_TABLE</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1145</td><td>ER_GRANT_WRONG_HOST_OR_USER</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1146</td><td>ER_NO_SUCH_TABLE</td><td>S1000</td><td>42S02</td></tr><tr><td scope="row">1147</td><td>ER_NONEXISTING_TABLE_GRANT</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1148</td><td>ER_NOT_ALLOWED_COMMAND</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1149</td><td>ER_SYNTAX_ERROR</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1152</td><td>ER_ABORTING_CONNECTION</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1153</td><td>ER_NET_PACKET_TOO_LARGE</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1154</td><td>ER_NET_READ_ERROR_FROM_PIPE</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1155</td><td>ER_NET_FCNTL_ERROR</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1156</td><td>ER_NET_PACKETS_OUT_OF_ORDER</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1157</td><td>ER_NET_UNCOMPRESS_ERROR</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1158</td><td>ER_NET_READ_ERROR</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1159</td><td>ER_NET_READ_INTERRUPTED</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1160</td><td>ER_NET_ERROR_ON_WRITE</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1161</td><td>ER_NET_WRITE_INTERRUPTED</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1162</td><td>ER_TOO_LONG_STRING</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1163</td><td>ER_TABLE_CANT_HANDLE_BLOB</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1164</td><td>ER_TABLE_CANT_HANDLE_AUTO_INCREMENT</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1166</td><td>ER_WRONG_COLUMN_NAME</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1167</td><td>ER_WRONG_KEY_COLUMN</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1169</td><td>ER_DUP_UNIQUE</td><td>S1000</td><td>23000</td></tr><tr><td scope="row">1170</td><td>ER_BLOB_KEY_WITHOUT_LENGTH</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1171</td><td>ER_PRIMARY_CANT_HAVE_NULL</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1172</td><td>ER_TOO_MANY_ROWS</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1173</td><td>ER_REQUIRES_PRIMARY_KEY</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1177</td><td>ER_CHECK_NO_SUCH_TABLE</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1178</td><td>ER_CHECK_NOT_IMPLEMENTED</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1179</td><td>ER_CANT_DO_THIS_DURING_AN_TRANSACTION</td><td>S1000</td><td>25000</td></tr><tr><td scope="row">1184</td><td>ER_NEW_ABORTING_CONNECTION</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1189</td><td>ER_MASTER_NET_READ</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1190</td><td>ER_MASTER_NET_WRITE</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1203</td><td>ER_TOO_MANY_USER_CONNECTIONS</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1205</td><td>ER_LOCK_WAIT_TIMEOUT</td><td>41000</td><td>41000</td></tr><tr><td scope="row">1207</td><td>ER_READ_ONLY_TRANSACTION</td><td>S1000</td><td>25000</td></tr><tr><td scope="row">1211</td><td>ER_NO_PERMISSION_TO_CREATE_USER</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1213</td><td>ER_LOCK_DEADLOCK</td><td>41000</td><td>40001</td></tr><tr><td scope="row">1216</td><td>ER_NO_REFERENCED_ROW</td><td>S1000</td><td>23000</td></tr><tr><td scope="row">1217</td><td>ER_ROW_IS_REFERENCED</td><td>S1000</td><td>23000</td></tr><tr><td scope="row">1218</td><td>ER_CONNECT_TO_MASTER</td><td>S1000</td><td>08S01</td></tr><tr><td scope="row">1222</td><td>ER_WRONG_NUMBER_OF_COLUMNS_IN_SELECT</td><td>S1000</td><td>21000</td></tr><tr><td scope="row">1226</td><td>ER_USER_LIMIT_REACHED</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1230</td><td>ER_NO_DEFAULT</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1231</td><td>ER_WRONG_VALUE_FOR_VAR</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1232</td><td>ER_WRONG_TYPE_FOR_VAR</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1234</td><td>ER_CANT_USE_OPTION_HERE</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1235</td><td>ER_NOT_SUPPORTED_YET</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1239</td><td>ER_WRONG_FK_DEF</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1241</td><td>ER_OPERAND_COLUMNS</td><td>S1000</td><td>21000</td></tr><tr><td scope="row">1242</td><td>ER_SUBQUERY_NO_1_ROW</td><td>S1000</td><td>21000</td></tr><tr><td scope="row">1247</td><td>ER_ILLEGAL_REFERENCE</td><td>S1000</td><td>42S22</td></tr><tr><td scope="row">1248</td><td>ER_DERIVED_MUST_HAVE_ALIAS</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1249</td><td>ER_SELECT_REDUCED</td><td>S1000</td><td>01000</td></tr><tr><td scope="row">1250</td><td>ER_TABLENAME_NOT_ALLOWED_HERE</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1251</td><td>ER_NOT_SUPPORTED_AUTH_MODE</td><td>S1000</td><td>08004</td></tr><tr><td scope="row">1252</td><td>ER_SPATIAL_CANT_HAVE_NULL</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1253</td><td>ER_COLLATION_CHARSET_MISMATCH</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1261</td><td>ER_WARN_TOO_FEW_RECORDS</td><td>S1000</td><td>01000</td></tr><tr><td scope="row">1262</td><td>ER_WARN_TOO_MANY_RECORDS</td><td>S1000</td><td>01000</td></tr><tr><td scope="row">1263</td><td>ER_WARN_NULL_TO_NOTNULL</td><td>S1000</td><td>01000</td></tr><tr><td scope="row">1264</td><td>ER_WARN_DATA_OUT_OF_RANGE</td><td>S1000</td><td>01000</td></tr><tr><td scope="row">1265</td><td>ER_WARN_DATA_TRUNCATED</td><td>S1000</td><td>01000</td></tr><tr><td scope="row">1280</td><td>ER_WRONG_NAME_FOR_INDEX</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1281</td><td>ER_WRONG_NAME_FOR_CATALOG</td><td>S1000</td><td>42000</td></tr><tr><td scope="row">1286</td><td>ER_UNKNOWN_STORAGE_ENGINE</td><td>S1000</td><td>42000</td></tr></tbody></table>





[10-1-3-1]:../Chapter_10/10.01.03_Specifying_Character_Sets_and_Collations.md
[http://developer.java.sun.com/developer/bugParade/bugs/4273544.html]:http://developer.java.sun.com/developer/bugParade/bugs/4273544.html
[6-3-9-2]:../Chapter_06/06.03.09_Using_SSL_for_Secure_Connections.md
[6-3-7-5]:../Chapter_06/06.03.07_Pluggable_Authentication.md
[6-3-7-7]:../Chapter_06/06.03.07_Pluggable_Authentication.md
[22-3-5-1]:22.03.05_ConnectorJ_JDBC_Reference.md
[load-balance-jdbc-pool]:http://code.tailrank.com/lbpool