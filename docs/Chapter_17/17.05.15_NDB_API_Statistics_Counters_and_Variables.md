hucha### 17.5.15. NDB API统计计数器与变量 ###

与执行操作或者NDB[md]对象影响有关的大量统计计数器的类型都是可视的。这些操作包含事务启动和关闭(终止)；主键和非主键操作；表扫描，范围扫描以及pruned扫描；等待各种操作完成时线程阻塞；NDBCLUSTER发送和接收的数据以及事件；不管何时NDB API被唤醒或者通过数据节点发送接收数据，NDB内核里面的计数器都会增加。mysqld[md]揭露了这些计数器作为系统状态变量；它们的值可以在SHOW STATUS[md]的输出信息中读到，或者从INFORMATION\_SCHEMA.SESSION\_STATUS[md]表里查询得到，或者从INFORMATION\_SCHEMA.GLOBAL\_STATUS[md]表里面查询得到。通过比较NDB[md]表上语句执行前后的值，你可以观察在API级别上所采取的相应行动，从而得到执行语句的成本。   

你可以使用如下SHOW STATUS[md]语句列出所有变量值：   

	mysql> SHOW STATUS LIKE 'ndb_api%';
	+--------------------------------------------+----------+
	| Variable_name                              | Value    |
	+--------------------------------------------+----------+
	| Ndb_api_wait_exec_complete_count_session   | 0        |
	| Ndb_api_wait_scan_result_count_session     | 0        |
	| Ndb_api_wait_meta_request_count_session    | 0        |
	| Ndb_api_wait_nanos_count_session           | 0        |
	| Ndb_api_bytes_sent_count_session           | 0        |
	| Ndb_api_bytes_received_count_session       | 0        |
	| Ndb_api_trans_start_count_session          | 0        |
	| Ndb_api_trans_commit_count_session         | 0        |
	| Ndb_api_trans_abort_count_session          | 0        |
	| Ndb_api_trans_close_count_session          | 0        |
	| Ndb_api_pk_op_count_session                | 0        |
	| Ndb_api_uk_op_count_session                | 0        |
	| Ndb_api_table_scan_count_session           | 0        |
	| Ndb_api_range_scan_count_session           | 0        |
	| Ndb_api_pruned_scan_count_session          | 0        |
	| Ndb_api_scan_batch_count_session           | 0        |
	| Ndb_api_read_row_count_session             | 0        |
	| Ndb_api_trans_local_read_row_count_session | 0        |
	| Ndb_api_event_data_count_injector          | 0        |
	| Ndb_api_event_nondata_count_injector       | 0        |
	| Ndb_api_event_bytes_count_injector         | 0        |
	| Ndb_api_wait_exec_complete_count_slave     | 0        |
	| Ndb_api_wait_scan_result_count_slave       | 0        |
	| Ndb_api_wait_meta_request_count_slave      | 0        |
	| Ndb_api_wait_nanos_count_slave             | 0        |
	| Ndb_api_bytes_sent_count_slave             | 0        |
	| Ndb_api_bytes_received_count_slave         | 0        |
	| Ndb_api_trans_start_count_slave            | 0        |
	| Ndb_api_trans_commit_count_slave           | 0        |
	| Ndb_api_trans_abort_count_slave            | 0        |
	| Ndb_api_trans_close_count_slave            | 0        |
	| Ndb_api_pk_op_count_slave                  | 0        |
	| Ndb_api_uk_op_count_slave                  | 0        |
	| Ndb_api_table_scan_count_slave             | 0        |
	| Ndb_api_range_scan_count_slave             | 0        |
	| Ndb_api_pruned_scan_count_slave            | 0        |
	| Ndb_api_scan_batch_count_slave             | 0        |
	| Ndb_api_read_row_count_slave               | 0        |
	| Ndb_api_trans_local_read_row_count_slave   | 0        |
	| Ndb_api_wait_exec_complete_count           | 2        |
	| Ndb_api_wait_scan_result_count             | 3        |
	| Ndb_api_wait_meta_request_count            | 27       |
	| Ndb_api_wait_nanos_count                   | 45612023 |
	| Ndb_api_bytes_sent_count                   | 992      |
	| Ndb_api_bytes_received_count               | 9640     |
	| Ndb_api_trans_start_count                  | 2        |
	| Ndb_api_trans_commit_count                 | 1        |
	| Ndb_api_trans_abort_count                  | 0        |
	| Ndb_api_trans_close_count                  | 2        |
	| Ndb_api_pk_op_count                        | 1        |
	| Ndb_api_uk_op_count                        | 0        |
	| Ndb_api_table_scan_count                   | 1        |
	| Ndb_api_range_scan_count                   | 0        |
	| Ndb_api_pruned_scan_count                  | 0        |
	| Ndb_api_scan_batch_count                   | 0        |
	| Ndb_api_read_row_count                     | 1        |
	| Ndb_api_trans_local_read_row_count         | 1        |
	| Ndb_api_event_data_count                   | 0        |
	| Ndb_api_event_nondata_count                | 0        |
	| Ndb_api_event_bytes_count                  | 0        |
	+--------------------------------------------+----------+
	60 rows in set (0.02 sec)


这些变量值在INFORMATION\_SCHEMA库上的SESSION\_STATUS 和 GLOBAL\_STATUS表上也是可视的，如这里所示：  

	mysql> SELECT * FROM INFORMATION_SCHEMA.SESSION_STATUS 
	    ->   WHERE VARIABLE_NAME LIKE 'ndb_api%';
	+--------------------------------------------+----------------+
	| VARIABLE_NAME                              | VARIABLE_VALUE |
	+--------------------------------------------+----------------+
	| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SESSION   | 2              |
	| NDB_API_WAIT_SCAN_RESULT_COUNT_SESSION     | 0              |
	| NDB_API_WAIT_META_REQUEST_COUNT_SESSION    | 1              |
	| NDB_API_WAIT_NANOS_COUNT_SESSION           | 8144375        |
	| NDB_API_BYTES_SENT_COUNT_SESSION           | 68             |
	| NDB_API_BYTES_RECEIVED_COUNT_SESSION       | 84             |
	| NDB_API_TRANS_START_COUNT_SESSION          | 1              |
	| NDB_API_TRANS_COMMIT_COUNT_SESSION         | 1              |
	| NDB_API_TRANS_ABORT_COUNT_SESSION          | 0              |
	| NDB_API_TRANS_CLOSE_COUNT_SESSION          | 1              |
	| NDB_API_PK_OP_COUNT_SESSION                | 1              |
	| NDB_API_UK_OP_COUNT_SESSION                | 0              |
	| NDB_API_TABLE_SCAN_COUNT_SESSION           | 0              |
	| NDB_API_RANGE_SCAN_COUNT_SESSION           | 0              |
	| NDB_API_PRUNED_SCAN_COUNT_SESSION          | 0              |
	| NDB_API_SCAN_BATCH_COUNT_SESSION           | 0              |
	| NDB_API_READ_ROW_COUNT_SESSION             | 1              |
	| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SESSION | 1              |
	| NDB_API_EVENT_DATA_COUNT_INJECTOR          | 0              |
	| NDB_API_EVENT_NONDATA_COUNT_INJECTOR       | 0              |
	| NDB_API_EVENT_BYTES_COUNT_INJECTOR         | 0              |
	| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SLAVE     | 0              |
	| NDB_API_WAIT_SCAN_RESULT_COUNT_SLAVE       | 0              |
	| NDB_API_WAIT_META_REQUEST_COUNT_SLAVE      | 0              |
	| NDB_API_WAIT_NANOS_COUNT_SLAVE             | 0              |
	| NDB_API_BYTES_SENT_COUNT_SLAVE             | 0              |
	| NDB_API_BYTES_RECEIVED_COUNT_SLAVE         | 0              |
	| NDB_API_TRANS_START_COUNT_SLAVE            | 0              |
	| NDB_API_TRANS_COMMIT_COUNT_SLAVE           | 0              |
	| NDB_API_TRANS_ABORT_COUNT_SLAVE            | 0              |
	| NDB_API_TRANS_CLOSE_COUNT_SLAVE            | 0              |
	| NDB_API_PK_OP_COUNT_SLAVE                  | 0              |
	| NDB_API_UK_OP_COUNT_SLAVE                  | 0              |
	| NDB_API_TABLE_SCAN_COUNT_SLAVE             | 0              |
	| NDB_API_RANGE_SCAN_COUNT_SLAVE             | 0              |
	| NDB_API_PRUNED_SCAN_COUNT_SLAVE            | 0              |
	| NDB_API_SCAN_BATCH_COUNT_SLAVE             | 0              |
	| NDB_API_READ_ROW_COUNT_SLAVE               | 0              |
	| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SLAVE   | 0              |
	| NDB_API_WAIT_EXEC_COMPLETE_COUNT           | 4              |
	| NDB_API_WAIT_SCAN_RESULT_COUNT             | 3              |
	| NDB_API_WAIT_META_REQUEST_COUNT            | 28             |
	| NDB_API_WAIT_NANOS_COUNT                   | 53756398       |
	| NDB_API_BYTES_SENT_COUNT                   | 1060           |
	| NDB_API_BYTES_RECEIVED_COUNT               | 9724           |
	| NDB_API_TRANS_START_COUNT                  | 3              |
	| NDB_API_TRANS_COMMIT_COUNT                 | 2              |
	| NDB_API_TRANS_ABORT_COUNT                  | 0              |
	| NDB_API_TRANS_CLOSE_COUNT                  | 3              |
	| NDB_API_PK_OP_COUNT                        | 2              |
	| NDB_API_UK_OP_COUNT                        | 0              |
	| NDB_API_TABLE_SCAN_COUNT                   | 1              |
	| NDB_API_RANGE_SCAN_COUNT                   | 0              |
	| NDB_API_PRUNED_SCAN_COUNT                  | 0              |
	| NDB_API_SCAN_BATCH_COUNT                   | 0              |
	| NDB_API_READ_ROW_COUNT                     | 2              |
	| NDB_API_TRANS_LOCAL_READ_ROW_COUNT         | 2              |
	| NDB_API_EVENT_DATA_COUNT                   | 0              |
	| NDB_API_EVENT_NONDATA_COUNT                | 0              |
	| NDB_API_EVENT_BYTES_COUNT                  | 0              |
	+--------------------------------------------+----------------+
	60 rows in set (0.00 sec)
	
	mysql> SELECT * FROM INFORMATION_SCHEMA.GLOBAL_STATUS 
	    ->     WHERE VARIABLE_NAME LIKE 'ndb_api%';
	+--------------------------------------------+----------------+
	| VARIABLE_NAME                              | VARIABLE_VALUE |
	+--------------------------------------------+----------------+
	| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SESSION   | 2              |
	| NDB_API_WAIT_SCAN_RESULT_COUNT_SESSION     | 0              |
	| NDB_API_WAIT_META_REQUEST_COUNT_SESSION    | 1              |
	| NDB_API_WAIT_NANOS_COUNT_SESSION           | 8144375        |
	| NDB_API_BYTES_SENT_COUNT_SESSION           | 68             |
	| NDB_API_BYTES_RECEIVED_COUNT_SESSION       | 84             |
	| NDB_API_TRANS_START_COUNT_SESSION          | 1              |
	| NDB_API_TRANS_COMMIT_COUNT_SESSION         | 1              |
	| NDB_API_TRANS_ABORT_COUNT_SESSION          | 0              |
	| NDB_API_TRANS_CLOSE_COUNT_SESSION          | 1              |
	| NDB_API_PK_OP_COUNT_SESSION                | 1              |
	| NDB_API_UK_OP_COUNT_SESSION                | 0              |
	| NDB_API_TABLE_SCAN_COUNT_SESSION           | 0              |
	| NDB_API_RANGE_SCAN_COUNT_SESSION           | 0              |
	| NDB_API_PRUNED_SCAN_COUNT_SESSION          | 0              |
	| NDB_API_SCAN_BATCH_COUNT_SESSION           | 0              |
	| NDB_API_READ_ROW_COUNT_SESSION             | 1              |
	| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SESSION | 1              |
	| NDB_API_EVENT_DATA_COUNT_INJECTOR          | 0              |
	| NDB_API_EVENT_NONDATA_COUNT_INJECTOR       | 0              |
	| NDB_API_EVENT_BYTES_COUNT_INJECTOR         | 0              |
	| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SLAVE     | 0              |
	| NDB_API_WAIT_SCAN_RESULT_COUNT_SLAVE       | 0              |
	| NDB_API_WAIT_META_REQUEST_COUNT_SLAVE      | 0              |
	| NDB_API_WAIT_NANOS_COUNT_SLAVE             | 0              |
	| NDB_API_BYTES_SENT_COUNT_SLAVE             | 0              |
	| NDB_API_BYTES_RECEIVED_COUNT_SLAVE         | 0              |
	| NDB_API_TRANS_START_COUNT_SLAVE            | 0              |
	| NDB_API_TRANS_COMMIT_COUNT_SLAVE           | 0              |
	| NDB_API_TRANS_ABORT_COUNT_SLAVE            | 0              |
	| NDB_API_TRANS_CLOSE_COUNT_SLAVE            | 0              |
	| NDB_API_PK_OP_COUNT_SLAVE                  | 0              |
	| NDB_API_UK_OP_COUNT_SLAVE                  | 0              |
	| NDB_API_TABLE_SCAN_COUNT_SLAVE             | 0              |
	| NDB_API_RANGE_SCAN_COUNT_SLAVE             | 0              |
	| NDB_API_PRUNED_SCAN_COUNT_SLAVE            | 0              |
	| NDB_API_SCAN_BATCH_COUNT_SLAVE             | 0              |
	| NDB_API_READ_ROW_COUNT_SLAVE               | 0              |
	| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SLAVE   | 0              |
	| NDB_API_WAIT_EXEC_COMPLETE_COUNT           | 4              |
	| NDB_API_WAIT_SCAN_RESULT_COUNT             | 3              |
	| NDB_API_WAIT_META_REQUEST_COUNT            | 28             |
	| NDB_API_WAIT_NANOS_COUNT                   | 53756398       |
	| NDB_API_BYTES_SENT_COUNT                   | 1060           |
	| NDB_API_BYTES_RECEIVED_COUNT               | 9724           |
	| NDB_API_TRANS_START_COUNT                  | 3              |
	| NDB_API_TRANS_COMMIT_COUNT                 | 2              |
	| NDB_API_TRANS_ABORT_COUNT                  | 0              |
	| NDB_API_TRANS_CLOSE_COUNT                  | 3              |
	| NDB_API_PK_OP_COUNT                        | 2              |
	| NDB_API_UK_OP_COUNT                        | 0              |
	| NDB_API_TABLE_SCAN_COUNT                   | 1              |
	| NDB_API_RANGE_SCAN_COUNT                   | 0              |
	| NDB_API_PRUNED_SCAN_COUNT                  | 0              |
	| NDB_API_SCAN_BATCH_COUNT                   | 0              |
	| NDB_API_READ_ROW_COUNT                     | 2              |
	| NDB_API_TRANS_LOCAL_READ_ROW_COUNT         | 2              |
	| NDB_API_EVENT_DATA_COUNT                   | 0              |
	| NDB_API_EVENT_NONDATA_COUNT                | 0              |
	| NDB_API_EVENT_BYTES_COUNT                  | 0              |
	+--------------------------------------------+----------------+
	60 rows in set (0.00 sec)


每一个Ndb[md]对象有自己的计数器。对于优化或者监控NBD API应用能读取计数器值。对于同时使用超过一个NDB对象的多线程客户端来说，可以从所有的属于给定的Ndb\_cluster\_connection[md]的Ndb[md]对象，获得计数器统计视图。    

4个计数器集合是暴露的。一个集合仅仅适用于当前的会话；剩下的3个集合是全局性的。在mysql客户端里面，尽管他们的值可以在会话或者全局状态参数里面获取。这个意味着说明了，对于NDB API统计状态参数的报告值来说，与SHOW STATUS相关的SESSION或者GLOBAL关键字没有影响，不管这个值是从SESSION\_STATUS[md]还是GLOBAL\_STATUS[md]表的对等的列获取的值，这些参数的值都是一样的。   

•   会话计数器 (会话细节)   
会话计数器涉及到仅仅被当前会话使用的Ndb对象。其他MySQL客户端的Ndb对象的使用不会影响这个计数。   

为了减少与标准的MySQL会话参数使用的混乱，我们提出作为“\_sessio变量”作为前导下划线的NDB API会话计数器保持一致。   

•   Slave计数器(全局)
有关被复制从库SQL线程使用的NDB对象计数器集合。如果没有的话，如果mysqld[md]不是作为一个复制从库运行，或者没有适用NDb[md]表，那么所有的计数器为0。   

我们选择以“_slave变量”为前导下划线的状态变量。   

•  注射计数器(全局)   
涉及到通过二进制注射线程用来监听集群事件的Ndb[md]对象的注射计数器。即便当没有写二进制日志，附属于mysql集群的mysqld程序继续监听一些事件，比如数据库变更。   

我们指的是与 如同“_injector变量”为前导下划线的NDB API注射计数器保持一致的状态变量。   

•  服务器计数器 (全局)   

有关当前通过mysqld[md]进程使用的所有Ndb[md]对象的计数器集合。这个包含所有的MySQL客户端应用，从库SQL线程(如果有)，二进制注射，以及NDB[md]通用线程。   

我们这里指的是与“全局变量”或者“mysql-级别变量”保持一致的状态参数。   


通过过滤变量名(连同普通的前缀Ndb\_api)的session,slave,或者injector子串，你可以获得这些一组变量的值。对于_session变量，可以通过如下显示做到这一点：   

	mysql> SHOW STATUS LIKE 'ndb_api%session';
	+--------------------------------------------+---------+
	| Variable_name                              | Value   |
	+--------------------------------------------+---------+
	| Ndb_api_wait_exec_complete_count_session   | 2       |
	| Ndb_api_wait_scan_result_count_session     | 0       |
	| Ndb_api_wait_meta_request_count_session    | 1       |
	| Ndb_api_wait_nanos_count_session           | 8144375 |
	| Ndb_api_bytes_sent_count_session           | 68      |
	| Ndb_api_bytes_received_count_session       | 84      |
	| Ndb_api_trans_start_count_session          | 1       |
	| Ndb_api_trans_commit_count_session         | 1       |
	| Ndb_api_trans_abort_count_session          | 0       |
	| Ndb_api_trans_close_count_session          | 1       |
	| Ndb_api_pk_op_count_session                | 1       |
	| Ndb_api_uk_op_count_session                | 0       |
	| Ndb_api_table_scan_count_session           | 0       |
	| Ndb_api_range_scan_count_session           | 0       |
	| Ndb_api_pruned_scan_count_session          | 0       |
	| Ndb_api_scan_batch_count_session           | 0       |
	| Ndb_api_read_row_count_session             | 1       |
	| Ndb_api_trans_local_read_row_count_session | 1       |
	+--------------------------------------------+---------+
	18 rows in set (0.50 sec)

去获得NDB API mysqld-level状态变量列表，对于变量名通过ndb\_api开始和\_count结尾过滤，如下：   

	mysql> SELECT * FROM INFORMATION_SCHEMA.SESSION_STATUS 
	    ->     WHERE VARIABLE_NAME LIKE 'ndb_api%count';
	+------------------------------------+----------------+
	| VARIABLE_NAME                      | VARIABLE_VALUE |
	+------------------------------------+----------------+
	| NDB_API_WAIT_EXEC_COMPLETE_COUNT   | 4              |
	| NDB_API_WAIT_SCAN_RESULT_COUNT     | 3              |
	| NDB_API_WAIT_META_REQUEST_COUNT    | 28             |
	| NDB_API_WAIT_NANOS_COUNT           | 53756398       |
	| NDB_API_BYTES_SENT_COUNT           | 1060           |
	| NDB_API_BYTES_RECEIVED_COUNT       | 9724           |
	| NDB_API_TRANS_START_COUNT          | 3              |
	| NDB_API_TRANS_COMMIT_COUNT         | 2              |
	| NDB_API_TRANS_ABORT_COUNT          | 0              |
	| NDB_API_TRANS_CLOSE_COUNT          | 3              |
	| NDB_API_PK_OP_COUNT                | 2              |
	| NDB_API_UK_OP_COUNT                | 0              |
	| NDB_API_TABLE_SCAN_COUNT           | 1              |
	| NDB_API_RANGE_SCAN_COUNT           | 0              |
	| NDB_API_PRUNED_SCAN_COUNT          | 0              |
	| NDB_API_SCAN_BATCH_COUNT           | 0              |
	| NDB_API_READ_ROW_COUNT             | 2              |
	| NDB_API_TRANS_LOCAL_READ_ROW_COUNT | 2              |
	| NDB_API_EVENT_DATA_COUNT           | 0              |
	| NDB_API_EVENT_NONDATA_COUNT        | 0              |
	| NDB_API_EVENT_BYTES_COUNT          | 0              |
	+------------------------------------+----------------+
	21 rows in set (0.09 sec)

并不是所有的计数器都在这4个状态变量集合中反映出来，对于事件计数器DataEventsRecvdCount, NondataEventsRecvdCount, 以及EventBytesRecvdCount，仅仅_injector 和 mysqld-level NDB API状态变量是可见的：   

	mysql> SHOW STATUS LIKE 'ndb_api%event%';
	+--------------------------------------+-------+
	| Variable_name                        | Value |
	+--------------------------------------+-------+
	| Ndb_api_event_data_count_injector    | 0     |
	| Ndb_api_event_nondata_count_injector | 0     |
	| Ndb_api_event_bytes_count_injector   | 0     |
	| Ndb_api_event_data_count             | 0     |
	| Ndb_api_event_nondata_count          | 0     |
	| Ndb_api_event_bytes_count            | 0     |
	+--------------------------------------+-------+
	6 rows in set (0.00 sec)

对于任何其他NDB API计数器来说_injector状态参数是不能实现的，如下所示：  

	mysql> SHOW STATUS LIKE 'ndb_api%injector%';
	+--------------------------------------+-------+
	| Variable_name                        | Value |
	+--------------------------------------+-------+
	| Ndb_api_event_data_count_injector    | 0     |
	| Ndb_api_event_nondata_count_injector | 0     |
	| Ndb_api_event_bytes_count_injector   | 0     |
	+--------------------------------------+-------+
	3 rows in set (0.00 sec)


状态变量的名字很容易通过与对应计数器的名字关联起来。每一个NDB API统计计数器描述信息被列在下述表中，连带着与相应的计数器的MySQL服务器状态变量的名字的描述信息。    

<table cellspacing="0px" border="1"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th scope="col" rowspan="2" valign="middle">计数器名称</th><th scope="col">描述</th></tr><tr><th scope="col">状态参数(通过统计类型):

<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    会话
                  </p></li><li class="listitem"><p>
                    从库
                  </p></li><li class="listitem"><p>
                    容器
                  </p></li><li class="listitem"><p>
                    服务器
</p></li></ul>
</div>
</th></tr></thead><tbody><tr><td scope="row" rowspan="2" valign="middle"><code  >WaitExecCompleteCount</code><code ><p>等待执行完成数</p></code></td><td>当正在等待一个执行中的操作完成时线程被阻塞时间数。包含所有<a class="ulink" href="http://dev.mysql.com/doc/ndbapi/en/ndb-ndbtransaction-methods.html#ndb-ndbtransaction-execute" target="_top"><code class="literal">execute()</code></a>唤起，对客户端来说如同隐藏的blob操作和自增一样，是不可见的。 </td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_exec_complete_count_session"><code class="literal">Ndb_api_wait_exec_complete_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_exec_complete_count_slave"><code class="literal">Ndb_api_wait_exec_complete_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_exec_complete_count"><code class="literal">Ndb_api_wait_exec_complete_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal"><p>WaitScanResultCount</p><p>等待扫描结果统计数</p></code></td><td>当正等待基准扫描信号时已经被阻塞时间数，如此等待额外的结果，或者等待扫描结束。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_scan_result_count_session"><code class="literal">Ndb_api_wait_scan_result_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_scan_result_count_slave"><code class="literal">Ndb_api_wait_scan_result_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_scan_result_count"><code class="literal">Ndb_api_wait_scan_result_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">WaitMetaRequestCount</code><code><p>等待元数据请求数</p></code></td><td>当正在等待元数据扫描时线程已经被组赛时间数；这个发生在等待一个DDL操作或者新时间点开始(或者结束)时。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_meta_request_count_session"><code class="literal">Ndb_api_wait_meta_request_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_meta_request_count_slave"><code class="literal">Ndb_api_wait_meta_request_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_meta_request_count"><code class="literal">Ndb_api_wait_meta_request_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">WaitNanosCount</code><code><p>等待纳秒数</p></code></td><td>等待从数据节点来的所花费的时间(纳秒)。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_nanos_count_session"><code class="literal">Ndb_api_wait_nanos_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_nanos_count_slave"><code class="literal">Ndb_api_wait_nanos_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_wait_nanos_count"><code class="literal">Ndb_api_wait_nanos_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">BytesSentCount</code><code><p>字节发送数</p></code></td><td>发送到数据节点的数据量(字节)。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_bytes_sent_count_session"><code class="literal">Ndb_api_bytes_sent_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_bytes_sent_count_slave"><code class="literal">Ndb_api_bytes_sent_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_bytes_sent_count"><code class="literal">Ndb_api_bytes_sent_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">BytesRecvdCount</code><code><p>字节接受数</p></code></td><td>从数据节点接受到的数据量(字节)。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_bytes_received_count_session"><code class="literal">Ndb_api_bytes_received_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_bytes_received_count_slave"><code class="literal">Ndb_api_bytes_received_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_bytes_received_count"><code class="literal">Ndb_api_bytes_received_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">TransStartCount</code><code><p>启动事务数</p></code></td><td>事务启动的数量。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_start_count_session"><code class="literal">Ndb_api_trans_start_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_start_count_slave"><code class="literal">Ndb_api_trans_start_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_start_count"><code class="literal">Ndb_api_trans_start_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">TransCommitCount</code><code><p>事务提交数</p></code></td><td>事务提交的数量。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_commit_count_session"><code class="literal">Ndb_api_trans_commit_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_commit_count_slave"><code class="literal">Ndb_api_trans_commit_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_commit_count"><code class="literal">Ndb_api_trans_commit_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">TransAbortCount</code><code><p>事务异常终止数</p></code></td><td>事务异常终止的数量。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_abort_count_session"><code class="literal">Ndb_api_trans_abort_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_abort_count_slave"><code class="literal">Ndb_api_trans_abort_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_abort_count"><code class="literal">Ndb_api_trans_abort_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">TransCloseCount</code><code><p>事务关闭数</p></code></td><td>事务异常终止的数量。(这个值比<code>TransCommitCount</code>和<code>TransAbortCount</code>的总和要大)</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_close_count_session"><code class="literal">Ndb_api_trans_close_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_close_count_slave"><code class="literal">Ndb_api_trans_close_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_close_count"><code class="literal">Ndb_api_trans_close_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">PkOpCount</code><code><p>主键操作数</p></code></td><td>基于主键或者使用主键的操作数量。这个数包括blob-part表操作，隐式解锁操作，自增操作，对于MySQL客户端来说如同主键操作一样通常是可视的。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_pk_op_count_session"><code class="literal">Ndb_api_pk_op_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_pk_op_count_slave"><code class="literal">Ndb_api_pk_op_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_pk_op_count"><code class="literal">Ndb_api_pk_op_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">UkOpCount</code><code><p>唯一健操作数</p></code></td><td>Number of 基于或者使用唯一键的操作数。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_uk_op_count_session"><code class="literal">Ndb_api_uk_op_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_uk_op_count_slave"><code class="literal">Ndb_api_uk_op_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_uk_op_count"><code class="literal">Ndb_api_uk_op_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">TableScanCount</code><code><p>表扫描数</p></code></td><td>已经开始的表扫描数。这包含内部表扫描。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_table_scan_count_session"><code class="literal">Ndb_api_table_scan_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_table_scan_count_slave"><code class="literal">Ndb_api_table_scan_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_table_scan_count"><code class="literal">Ndb_api_table_scan_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">RangeScanCount</code><code><p>范围扫描数</p></code></td><td>已经开启的范围扫描数。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_range_scan_count_session"><code class="literal">Ndb_api_range_scan_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_range_scan_count_slave"><code class="literal">Ndb_api_range_scan_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_range_scan_count"><code class="literal">Ndb_api_range_scan_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">PrunedScanCount</code><code><p>优化扫描数</p></code></td><td>已经被优化成单一分区的扫描数。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_pruned_scan_count_session"><code class="literal">Ndb_api_pruned_scan_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_pruned_scan_count_slave"><code class="literal">Ndb_api_pruned_scan_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_pruned_scan_count"><code class="literal">Ndb_api_pruned_scan_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">ScanBatchCount</code><code><p>批量扫描数</p></code></td><td>批量行记录扫描数。 (A <em class="firstterm">batch</em> in
              this context is a set of scan results from a single
fragment.)</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_scan_batch_count_session"><code class="literal">Ndb_api_scan_batch_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_scan_batch_count_slave"><code class="literal">Ndb_api_scan_batch_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_scan_batch_count"><code class="literal">Ndb_api_scan_batch_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">ReadRowCount</code><code><p>行读数</p></code></td><td>已经读取过的行数。包含使用主键，唯一健以及扫描操作。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_read_row_count_session"><code class="literal">Ndb_api_read_row_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_read_row_count_slave"><code class="literal">Ndb_api_read_row_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_read_row_count"><code class="literal">Ndb_api_read_row_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">TransLocalReadRowCount</code><code><p>本地行读取数</p></code></td><td>从事务启动的同一个数据节点读取的行数量。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_local_read_row_count_session"><code class="literal">Ndb_api_trans_local_read_row_count_session</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_local_read_row_count_slave"><code class="literal">Ndb_api_trans_local_read_row_count_slave</code></a>
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_trans_local_read_row_count"><code class="literal">Ndb_api_trans_local_read_row_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">DataEventsRecvdCount</code><code><p>数据事件接受数</p></code></td><td>已经接受到的事件的行变更数。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_event_data_count_injector"><code class="literal">Ndb_api_event_data_count_injector</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_event_data_count"><code class="literal">Ndb_api_event_data_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">NondataEventsRecvdCount</code><code><p>不同于数据事件接受数量</p></code></td><td>除了行变更事件，事件接受的数量。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_event_nondata_count_injector"><code class="literal">Ndb_api_event_nondata_count_injector</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_event_nondata_count"><code class="literal">Ndb_api_event_nondata_count</code></a>
</p></li></ul>
</div>
</td></tr><tr><td scope="row" rowspan="2" valign="middle"><code class="literal">EventBytesRecvdCount</code><code><p>事件接受到的字节数</p></code></td><td>事件接受到的字节数。</td></tr><tr><td scope="row">
<div class="itemizedlist">
<ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    [none]
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_event_bytes_count_injector"><code class="literal">Ndb_api_event_bytes_count_injector</code></a>
                  </p></li><li class="listitem"><p>
                    <a class="link" href="mysql-cluster-status-variables.html#statvar_Ndb_api_event_bytes_count"><code class="literal">Ndb_api_event_bytes_count</code></a>
</p></li></ul>
</div>
</td></tr></tbody></table>

为了查看所有已经提交事务的统计数--既是，所有的TransCommitCount计数器状态变量--你可以通过trans_commit_count子串过滤出SHOW STATUS[md]的输出结果，如下所示：  

	mysql> SHOW STATUS LIKE '%trans_commit_count%';
	+------------------------------------+-------+
	| Variable_name                      | Value |
	+------------------------------------+-------+
	| Ndb_api_trans_commit_count_session | 1     |
	| Ndb_api_trans_commit_count_slave   | 0     |
	| Ndb_api_trans_commit_count         | 2     |
	+------------------------------------+-------+
	3 rows in set (0.00 sec)

从这里你可以发现在当前的mysql[md]客户端里已经有一个事务提交完成，自从mysqld[md]服务最近一次重启后已经有2个事务提交完成。   

在执行一个给定的SQL语句前后，你能立即通过比较相应的_session状态变量，你可以看到很多NDB API计数器自增，在此例中，从SHOW STATUS[md]获得初始化值之后，我们可以在test库创建一个NDB[md]表，表名为T，并且有一些单一列：   

	mysql> SHOW STATUS LIKE 'ndb_api%session%';
	+--------------------------------------------+--------+
	| Variable_name                              | Value  |
	+--------------------------------------------+--------+
	| Ndb_api_wait_exec_complete_count_session   | 2      |
	| Ndb_api_wait_scan_result_count_session     | 0      |
	| Ndb_api_wait_meta_request_count_session    | 3      |
	| Ndb_api_wait_nanos_count_session           | 820705 |
	| Ndb_api_bytes_sent_count_session           | 132    |
	| Ndb_api_bytes_received_count_session       | 372    |
	| Ndb_api_trans_start_count_session          | 1      |
	| Ndb_api_trans_commit_count_session         | 1      |
	| Ndb_api_trans_abort_count_session          | 0      |
	| Ndb_api_trans_close_count_session          | 1      |
	| Ndb_api_pk_op_count_session                | 1      |
	| Ndb_api_uk_op_count_session                | 0      |
	| Ndb_api_table_scan_count_session           | 0      |
	| Ndb_api_range_scan_count_session           | 0      |
	| Ndb_api_pruned_scan_count_session          | 0      |
	| Ndb_api_scan_batch_count_session           | 0      |
	| Ndb_api_read_row_count_session             | 1      |
	| Ndb_api_trans_local_read_row_count_session | 1      |
	+--------------------------------------------+--------+
	18 rows in set (0.00 sec)
	
	mysql> USE test;
	Database changed
	mysql> CREATE TABLE t (c INT) ENGINE NDBCLUSTER;
	Query OK, 0 rows affected (0.85 sec)

现在你可以执行一个新的SHOW STATUS语句，观察变化，如下所示(输出中变化的列高亮显示)   

	mysql> SHOW STATUS LIKE 'ndb_api%session%';
	+--------------------------------------------+-----------+
	| Variable_name                              | Value     |
	+--------------------------------------------+-----------+
	| Ndb_api_wait_exec_complete_count_session   | 8         |
	| Ndb_api_wait_scan_result_count_session     | 0         |
	| Ndb_api_wait_meta_request_count_session    | 17        |
	| Ndb_api_wait_nanos_count_session           | 706871709 |
	| Ndb_api_bytes_sent_count_session           | 2376      |
	| Ndb_api_bytes_received_count_session       | 3844      |
	| Ndb_api_trans_start_count_session          | 4         |
	| Ndb_api_trans_commit_count_session         | 4         |
	| Ndb_api_trans_abort_count_session          | 0         |
	| Ndb_api_trans_close_count_session          | 4         |
	| Ndb_api_pk_op_count_session                | 6         |
	| Ndb_api_uk_op_count_session                | 0         |
	| Ndb_api_table_scan_count_session           | 0         |
	| Ndb_api_range_scan_count_session           | 0         |
	| Ndb_api_pruned_scan_count_session          | 0         |
	| Ndb_api_scan_batch_count_session           | 0         |
	| Ndb_api_read_row_count_session             | 2         |
	| Ndb_api_trans_local_read_row_count_session | 1         |
	+--------------------------------------------+-----------+
	18 rows in set (0.00 sec)   

同样的，往T表里添加一条记录，你可以看到NDB API统计计数器的变化，然后你运行前一个例子中使用的SHOW STATUS[md]语句，如下所示：  

	mysql> INSERT INTO t VALUES (100);
	Query OK, 1 row affected (0.00 sec)
	
	mysql> SHOW STATUS LIKE 'ndb_api%session%';
	+--------------------------------------------+-----------+
	| Variable_name                              | Value     |
	+--------------------------------------------+-----------+
	| Ndb_api_wait_exec_complete_count_session   | 11        |
	| Ndb_api_wait_scan_result_count_session     | 6         |
	| Ndb_api_wait_meta_request_count_session    | 20        |
	| Ndb_api_wait_nanos_count_session           | 707370418 |
	| Ndb_api_bytes_sent_count_session           | 2724      |
	| Ndb_api_bytes_received_count_session       | 4116      |
	| Ndb_api_trans_start_count_session          | 7         |
	| Ndb_api_trans_commit_count_session         | 6         |
	| Ndb_api_trans_abort_count_session          | 0         |
	| Ndb_api_trans_close_count_session          | 7         |
	| Ndb_api_pk_op_count_session                | 8         |
	| Ndb_api_uk_op_count_session                | 0         |
	| Ndb_api_table_scan_count_session           | 1         |
	| Ndb_api_range_scan_count_session           | 0         |
	| Ndb_api_pruned_scan_count_session          | 0         |
	| Ndb_api_scan_batch_count_session           | 0         |
	| Ndb_api_read_row_count_session             | 3         |
	| Ndb_api_trans_local_read_row_count_session | 2         |
	+--------------------------------------------+-----------+
	18 rows in set (0.00 sec)


我们可以从这些结果中观察到很多结果：   


•   尽管我们没有创建明确的主键索引，但是5个主键操作以这样的方式执行(这个Ndb\_api\_pk\_op\_count\_session [2319][md]值前后的不同点，或者6减1)。这个隐式主键的创建的影响就是所有的表都使用了NDB[md]存储引擎。  

•  通过比较Ndb\_api\_wait\_nanos\_count\_session [2316][md]的连续值，比起通过INSERT[md]((707370418 - 706871709 = 498709纳秒，概略地0.0005秒)执行过的这些语句，我们可以看到为了从数据节点而来的响应等待更长时间的(706871709 - 820705 = 706051004纳秒，大约0.7秒)的实施CREATE TABLE[md]语句的NDB API操作。在mysql客户端的这些语句报告的执行时间大概都与这些数字相关。   

 在没有足够时间(纳秒)决心的平台上，为了执行非常快的SQL语句，NDB API计数器WaitNanosCount的小改变不可能总是在Ndb\_api\_wait\_nanos\_count\_session [2316],
Ndb\_api\_wait\_nanos\_count\_slave [2316],或者Ndb\_api\_wait\_nanos\_count [2316][md]的值上是可视的。   

INSERT[md]语句 会让NDB API统计计数器上的ReadRowCount 以及TransLocalReadRowCount都增加 ，因为Ndb\_api\_read\_row\_count\_session [2322] 以及Ndb\_api\_trans\_local\_read\_row\_count\_session [2322][md]的增加值反映出来。   

