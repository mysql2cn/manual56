### 11.3.7 日期和时间类型之间的转换

在某种程度上，你可以转换一个时间类型的值到其他类型。然而，可能也许会有一些信息被改变或丢失。在所有情况下，时间类型之间的转换受制于结果类型的有效值的范围。例如，虽然DATE，DATETIME和TIMESTAMP都可以指定使用同一个的格式，但是各类型具有不同的取值范围。TIMESTAMP值不能早于1970 UTC或晚于'2038-01-19 03:14:07' UTC。意思是一个日期如'1968-01-01'，是有效的DATE或DATETIME值，却是无效的TIMESTAMP值，并会被转换为0。

DATE值的转换：

* 转换到DATETIME或TIMESTAMP，值添加时间部分'00:00:00'，因为DATE值不包含时间信息。

* 转换到TIME，值是没有用的；结果是'00:00:00'。

DATETIME和TIMESTAMP的转换：

* 转换到DATE，值丢弃时间部分，因为DATE类型不包含时间信息。

* 转换到TIME，值丢弃日期部分，因为TIME类型不包含日期信息。

转换TIME值到其他时间类型在特定版本：

* 从MySQL5.6.4开始，CURRENT_DATE()[1232]的值用于日期部分。TIME被解释为已经经过的时间（不是当天的时间）并添加到日期。意思是，如果时间值超出范围'00:00:00'到'23:59:59'，那么结果的日期部分不同于当前日期。

假设当前日期是'2012-01-01'。'12:00:00'，'24:00:00'和'-12:00:00'的TIME值，转换到DATETIME或TIMESTAMP时，结果是'分别2012-01-01 12:00:00'，'2012-01-02 00:00:00'和'2011-12-31 12:00:00'。

转换TIME到DATE相似，但是结果丢弃时间部分：分别是'2012-01-01'，'2012-01-02'和'2011-12-31'。

* 在5.6.5以前，MySQL通过解析一个date-and-time的时间字符串，来转换时间值到日期或date-and-time值。这样可能是无用的。例如，'23:12:31'被解释为日期变成'2032-12-31'。时间值作为日期是无效的，会变成'0000-00-00'或NULL。

显示转换可以用来覆盖隐士转换。例如，对比DATE和DATETIME的值，DATE值转换到DATETIME会强制添加时间部分'00:00:00'。为了进行比较，通过忽略DATETIME值的时间部分来代替，使用CAST()[1265]函数如下：

```
date_col= CAST(datetime_colAS DATE)
```

TIME和DATETIME到数字形式（例如，通过添加+0）的转换，发生如下：

* 从MySQL5.6.4开始，当N为0（或省略）时，TIME( *N* )或DATETIME( *N* )被转换为整数，并成为一个当 *N* 大于0时的 *N* 个十进制位的DECIMAL值：

    ```
    mysql> SELECT CURTIME(), CURTIME()+0, CURTIME(3)+0;
    +-----------+-------------+--------------+
    | CURTIME() | CURTIME()+0 | CURTIME(3)+0 |
    +-----------+-------------+--------------+
    | 09:28:00  | 92800       | 92800.887    |
    +-----------+-------------+--------------+
    mysql> SELECT NOW(), NOW()+0, NOW(3)+0;
    +---------------------+----------------+--------------------+
    | NOW()               | NOW()+0        | NOW(3)+0           |
    +---------------------+----------------+--------------------+
    | 2012-08-15 09:28:00 | 20120815092800 | 20120815092800.889 |
    +---------------------+----------------+--------------------+
    ```

* 在MySQL5.6.4以前，转换结果是一个具有.000000的微妙部分的双精度值：

    ```
    mysql> SELECT CURTIME(), CURTIME()+0;
    +-----------+--------------+
    | CURTIME() | CURTIME()+0  |
    +-----------+--------------+
    | 09:28:00  | 92800.000000 |
    +-----------+--------------+
    mysql> SELECT NOW(), NOW()+0;
    +---------------------+-----------------------+
    | NOW()               | NOW()+0               |
    +---------------------+-----------------------+
    | 2012-08-15 09:28:00 | 20120815092800.000000 |
    +---------------------+-----------------------+
    ```