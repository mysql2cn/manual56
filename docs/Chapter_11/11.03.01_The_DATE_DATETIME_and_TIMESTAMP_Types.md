### 11.3.1 DATE，DATETIME和TIMESTAMP类型

本节介绍有关DATE，DATETIME和TIMESTAMP类型的特点，它们之间的相似处与不同之处。MySQL检索DATE，DATETIME和TIMESTAMP值于多种格式，具体描述参见[章节9.1.3，“日期和时间写法”](../Chapter_09/09.01.03_Date_and_Time_Literals)。DATE和DATETIME的范围说明，“支持”的意思是虽然早期的值可能会工作，但不能完全保证。

DATE类型用于使用只有日期部分，不包含时间部分的值。MySQL使用'YYYY-MM-DD'格式检索和显示DATE值。支持的范围从'1000-01-01'到'9999-12-31'。

DATETIME类型用于包含日期和时间两部分的值。MySQL使用'YYYY-MM-DD HH:MM:SS'格式检索和显示DATETIME值。支持的范围从'1000-01-01 00:00:00'到'9999-12-31 23:59:59'。

TIMESTAMP类型用于包含日期和时间两部分的值。TIMESTAMP的范围从'1970-01-01 00:00:01' UTC到'2038-01-19 03:14:07' UTC。

DATETIME或TIMESTAMP可以包含达到微妙（6位）精度的小数秒部分。特别是，从MySQL5.6.4开始，插入DATETIME或TIMESTAMP列的任何小数部分都会被存储，而不被丢弃。包含小数部分，格式为'YYYY-MM-DD HH:MM:SS[.小数秒]'，DATETIME范围从'1000-01-01 00:00:00.000000'到'9999-12-31 23:59:59.999999'，TIMESTAMP范围从'1970-01-01 00:00:01.000000'到'2038-01-19 03:14:07.999999'。有关MySQL支持的小数秒信息，参见[章节11.3.6，“时间值小数秒”](./11.3.6_Fractional_Seconds_in_Time_Values.md)。

TIMESTAMP和(从MySQL5.6.5开始)DATETIME类型提供自动初始化与更新为当前的日期和时间。更新信息，参见[章节11.3.5，“TIMESTAMP和DATETIME类型的自动初始化与更新”](./11.3.5_Automatic_Initialization_and_Updating_for_TIMESTAMP_and_DATETIME.md)。MySQL将TIMESTAMP值从当前时区转换为UTC存储，检索时将UTC转换回当前时区（这个操作不会在其他类型中出现，比如DATETIME）。默认情况下，每个连接的当前时区是服务器的时间。可以基于每个连接设置时区。只有时区设置保持不变，可以存储一个相同的值。如果存储一个TIMESTAMP值，然后更改时区和检索值，那么从存储的值中检索出的值是不同的。这是因为同一个时区不能用于两个方向的转换。当前时区是有效的系统变量time_zone[571]的值。更多信息，参见[章节10.6，“MySQL服务器时区支持”](../Chapter_10/10.06.00_MySQL_Server_Time_Zone_Support.md)。

无效的DATE，DATETIME或TIMESTAMP值被转换为是适当类型的“零”值（'0000-00-00'或'0000-00-00 00:00:00'）。

需要注意MySQL日期值解释的某些特性：

* MySQL允许指定一个字符串的“非严格”格式的值，日期或时间部分的间隔可以使用任意标点符号。在某些情况下，这种语法可以伪装。例如，'10:11:12'看起来像个时间值，因为分隔符是“：” ，但是如果用在日期上下文则被解释为年'2010-11-12'。'10:45:15'会被转换为'0000-00-00'，因为'45'是无效的月份。

* 服务器要求月和日是有效值，而不仅仅是分别在范围1到12和1到31。严格模式禁用时，无效日期'2004-04-31被转换为'0000-00-00'并产生一个警告。严格模式启用时，无效日期产生一个错误。要允许这种日期，启用ALLOW\_INVALID\_DATES[619]。更多信息，参见[章节5.1.7，“服务SQL模式”](../Chapter_05/05.01.07_Server_SQL_Modes.md)。

* MySQL不接受一个日或月为零的TIMESTAMP列或值，这不是一个有效的日期。此规则的唯一例外是该类型的“零”值'0000-00-00 00:00:00'。

* 由于世纪是未知的，所以含有两位数的年份值是不准确的。MySQL使用以下规则解释两位数年份值：

    * 范围在00-69的年转换为2000-2069。
    
    * 范围在70-99的年转换为1970-1999。

      参见[章节11.3.8，“日期中两位数的年”](./11.3.8_Two-Digit_Years_in_Dates.md)。

> **提示**
> 
> MySQL服务器可以在启用MAXDB[624]SQL模式下运行。在这种情况下，TIMESTAMP等同于DATETIME。如果在该模式被启用时创建一张表，TIMESTAMP列被创建为DATETIME列。结果是，该列使用DATETIME显示格式，具有相同的范围值，并且不支持自动初始化或更新到当前的日期时间。参见[章节5.1.7，“服务SQL模式”](../Chapter_05/05.01.07_Server_SQL_Modes.md)。