###  8.5.8_Optimizing InnoDB Configuration Variables
不同的设置

InnoDB存储引擎自动完成许多优化，性能优化任务包括监控确保数据库高效运行以及当性能下降时修改配置项。查询14.2.4.2.26"MYSQL性能模式集成"获取InnoDB性能监控详细信息。

关于InnoDB最重要的和最近的性能特征的信息，查看14.2.4，"InnoDB性能和可扩展性增强"。即使你使用InnoDB表以前的版本，这些特征对你仍然可能会新，因为这些特征来自于"InnoDB Plugin"。插件与内置InnoDB在MYSQL5.1中共存，在5.5及更高版本上成为默认存储引擎。

你能使用的主要配置步骤包括：

在安装InnoDB系统上允许InnoDB使用高性能内存分配。，查看14.2.4.2.12，"使用操作系统内存分配"。

控制InnoDB缓存修改数据的DML操作类型，避免频繁小磁盘写。查看14.2.4.2.13，"控制InnoDB变更缓存"。因为缺省缓存所有类型DML操作，修改这个设置如果你想减少缓存。

打开自适应哈希索引或关闭。查看14.2.4.2.14，"控制自适应哈希索引"。你可能在异常活动期修改这个设置，然后将它恢复成原始设置。

如果上下文切换是瓶颈，为InnoDB能处理的并发线程数增加一个限制。查看14.2.4.2.15，"关于线程并发修改"。

控制InnoDB预读操作的预读取数。如果系统存在空闲IO能力，更多的预读操作能改善查询性能，在一个重负荷系统上，过多的预读操作能引起性能周期性下跌。查看14.2.4.2.16，"预读算法修改"。

增加读写操作的后台线程数，如果缺省值使你的高端IO子系统没有被充分利用。查看14.2.4.2.17，"多后台InnoDB IO线程"。

控制InnoDB在后台完成多少IO。查看14.2.4.2.20，"控制InnoDB主线程IO率"。MYSQL5.6后台IO线程数比5.1高，因此你可以减少这个配置如果你观察到性能周期性下降。

控制InnoDB何时完成某些后台写类型的算法。查看14.2.4.2.21，"控制从InnoDB缓冲池刷新脏页比例"。这种算法对某些工作负载有用，但不是所有，关掉这个选项如果观察到性能周期性下降。

利用多核处理器和它们的缓存内存配置，减少上下文切换延迟。查看14.2.4.2.23，"控制自旋锁轮询"。

阻止一次性操作比如全表扫描干扰存储在InnoDB缓存中频繁访问的数据。查看14.2.4.2.24，"避免缓冲池扫描"。

调整你的日志文件大小有助于可靠性和崩溃恢复。查看14.2.4.2.25，"改进崩溃恢复性能"
。历史上，人们将InnoDB日志文件控制很小避免系统崩溃后长时间的启动。InnoDB内部改进使启动更快，因此日志文件大小已经不再是一个性能因素。如果你手动设置小日志文件，通过增加日志大小从而减少重做日志被再次使用时的IO改善性能。

为InnoDB缓存池配置实例个数和大小，对大于GB缓存池系统尤其重要。查看14.2.4.2.27，"利用多缓冲池改进性能"。

增加最大并发线程事务数，极大的改进繁忙数据库的可伸缩性。查看14.2.4.2.28，"多回滚段的良好伸缩性"。虽然这个特征在每天的操作中不需要任何动作，你必须执行slow down操作在升级到MYSQL5.5的过程中或升级之后以允许更高限制。

将清理操作(一种垃圾收集类型)放到后台线程。查看14.2.4.2.29，"更好伸缩性使用改进的清理调度"。为有效测量设置的效果，首先优化IO相关的、线程相关的配置项。

减少InnoDB并发线程间的切换数，因此SQL操作在繁忙系统上不需要排队和形成线程阻塞。为innodb_thread_concurrency[1786]选项设置一个值，高端系统最大可以近似32。增加innodb_concurrency_tickets[1750]选项值，典型5000左右。这两个选项结合限制了在任何时间InnoDB能处理的线程数极限，以及允许每个线程在交换出去之前做本质的工作，因此等待线程的数量保持在低值和完成操作不需要过多的上下文切换。

