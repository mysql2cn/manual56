## 8.1优化概述 
数据库性能取决于许多数据库级别上的因素，例如表、查询和配置设定。这些软件构造将导致硬件级别上的CPU和I/O操作，而你必须将这些最小化和尽可能高效。如果你从事于数据库性能方面，你应该从学习软件高水平的规则和准则开始以及用执行时间来衡量性能。当你成为一名专家，你会了解更多内部发生了什么，而开始衡量CPU周期和I/O操作这些东西。

典型的用户目标是从他们现有的软件和硬件配置获得最佳的数据库性能。高级用户会寻找机会来提升MySQL软件本身，或者发展他们自己的存储引擎和硬件设备来扩展MySQL的生态系统。

## 数据库级别的优化

令一个数据库应用程序更快的最重要因素是它的基础设计：

* 所有表的结构是否合适？特别是所有列是否有正确的数据类型和每一张表的列有适当的工作类型？例如，一些频繁执行更新的应用程序经常用到很多表中的少量列，而一些分析大量数据的应用程序经常用到少量表中的很多列。
 
* 正确的 [索引][索引] 能使查询高效到位？


* 你正在为每张表使用合适的存储引擎？所使用的存储引擎你都利用了它们的优势和特点？特别地，选择一个事务性的存储引擎,例如[InnoDB][InnoDB],还是一个非事务性的存储引擎,例如[MyISAM][MyISAM],对于性能和可扩展性将会是非常重要。    
    注意：在MySQL5.5或者更高的版本，InnoDB是所有新表默认的存储引擎。事实上，高级的InnoDB的性能特点意味着InnoDB 表经常胜过简单的MyISAM表，特别是在一个繁忙的数据库。

* 每张表是否都使用了一个合适的行格式？这个选择也是取决于表所使用的存储引擎。特别地，压缩的表使用更少的的磁盘空间和因此需要更少的磁盘I/O去读和写数据。压缩对于各种类型工作量的InnoDB表和只读的MyISAM表都是有效的。
　　
* 应用程序是否使用了一个合适的[锁定策略][锁定策略]？例如，在可能的情况下通过允许共享访问以便数据库操作能并发执行，而在需要占用的时候请求排他性访问以便危险操作获得高的优先权。再次提醒，存储引擎的选择是十分重要的。InnoDB存储引擎处理绝大部分的锁定问题而和你无关，它允许更好的数据库并发性而且减少试验的次数和与你的代码协调一致。

* 所有的内存区域是否正确地使用了[缓存][缓存]的大小？也就是说，足够大来保存频繁访问的数据，但又不会太大以致它们超过物理内存的负荷并且引起换页。主存储器区域用来配置的是InnoDB缓冲池、MyISAM关键缓存和MySQL查询缓存。

## 硬件级别的优化
随着数据库变得越来越忙碌，任何数据库应用程序最后都会冲击硬件的限制。一名DBA必须能估计是否可能需要协调应用程序或者重新配置服务器来避免这些[瓶颈][瓶颈]，或者是否需要更多的硬件资源。系统瓶颈通常由以下这些典型的来源引起：
* 磁盘搜索。磁盘寻找一块数据需要一定的时间。用在现代磁盘上的平均时间通常少于10毫秒，所以理论上我们能在一秒的时间进行100次的搜索。对于新磁盘这个时间提高不大而且很难为一个表进行优化。优化搜索时间的方法是将数据分布在多个磁盘上。

* 磁盘读/写。当磁盘在正确的位置后，我们需要对磁盘进行读或写数据。对于现代磁盘，一个磁盘至少能传输10-20MB/s的吞吐。这比搜索要容易优化，因为你能从多个磁盘并行地读。
* CPU周期。当数据读入内存后，我们必须处理它以获得我们所需要的结果。小表相对于内存的大小是最常见的限制因素。但是对于小表，速度通常不是一个问题。
* 内存带宽。当CPU需要的数据超过CPU缓存时，主存带宽就成为了一个瓶颈，这是绝大部分系统不常见的瓶颈，但应该意识到。

## 可移植性与性能的平衡

在一个可移植的MySQL程序里使用面向性能的SQL扩展，你可以在一个语句的/*!  */注释界定符里面隐藏MySQL特定的关键字。其他的SQL服务器忽略注释了的关键字。关于写注释的信息，请看[章节9.6，“注释语法”][9.6]




 [索引]:./docs/Chapter_08/8.03.0_Optimization_and_Indexes.md
[InnoDB]:./docs/Chapter_08/8.05.0_Optimizing_for_InnoDB_Tables.md
[MyISAM]:./docs/Chapter_08/8.06.0_Optimizing_for_MyISAM_Tables.md
[锁定策略]:./docs/Chapter_08/8.10.0_Optinizing_Locking_Operations.md
[缓存]:./docs/Chapter_08/8.09.0_Buffering_and_Caching.md
[瓶颈]:./docs/MySQLGlossary
[9.6]:./docs/Chapter_09/9.06.0_Comment_Syntax