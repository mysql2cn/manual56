#  8.5.5. Optimizing InnoDB Queries

### 8.5.5. Optimizing InnoDB Queries

为了优化InnoDB表的查询，需要为每个表创建合适的索引集。参考[Section 8.3.1, “How MySQL Uses Indexes”](TODO)。遵循下面的InnoDB索引指导：

* 每个InnoDB表都会有一个主键（不管你是否需要），根据你的查询需求，或者对时间要求最严格的查询，选定一个列的集合来创建主键索引。

* 不要在主键索引中包含太多的列，因为其他索引都会引用主键索引。当索引包含不需要的数据时，额外的I/O开销和内存中缓存额外开销，会影响服务器的性能以及扩展性。

* 不要为每列都创建一个单独的索引，因为每个查询只能使用一个索引。某些很少访问的列，或者很少有不同值得列上的索引，可能对几乎所有查询都没有帮助。如果你在某个表上有很多查询，尝试使用不同的组合并测试选出一个最佳的组合方式，而不是在每列上创建独立的索引。如果一个索引包括了结果集中所需的全部列，那这个查询甚至不必去读取表数据。

* 如果一列不会包含任何NULL值，那么就将其声明为NOT NULL。优化器在知道哪一列可能为空，哪一列不为空的情况下，会为一个查询选择更有效的索引来执行。

* 在MySQL 5.6.4以及更高的版本当中，你可以对仅有查询语句的事务进行优化，参考[Optimizing InnoDB Read-Only Transactions](TODO)。

* 如果针对一些不经常更新的表，存在一些重复查询，那么请开启查询缓存：

	```
	[mysqld]
	query_cache_type = 1
	query_cache_size = 10M
	```
