### 19.4.1. 事件调度器综述

MySQL事件是根据计划表执行的任务. 因此, 它们也有时被称作计划事件. 当一个事件被创建时, 同时也就创建了一个命名的数据库对象. 它包含了一个或者多个SQL语句, 其将被执行一次或者间隔特定时间被多次执行, 开始和结束于一个特定的日期和时间. 从概念上将, 这有点类似于Unix的`crontab`(即广为人知的”定时任务”)或是Windows的计划任务.

这种类型的计划任务有时也被认为是”时间的触发器”, 这意味着这些对象只在一段时间内被激活. 基于这点考虑, 我们更愿意使用”事件”这个术语, 以免将其和[章节19.3,”使用触发器”](../Chapter_19/19.03.00_Using_Triggers.md)中讨论的触发器类型相互混淆. 事件特别不应该和”临时的触发器”相混淆. 区别在于, 触发器的执行语句是对给定表的特定类型的事件的回应, 而(计划)事件的执行语句则是对于由特定时间间隔的特定时间段的回应. 

由于在SQL标准中对于事件计划的制定没有任何规定, 但这一点在其它的数据库系统中也有先例. 因此在MySQL Server以及这些实现中, 都能找到一些相似性. 

MySQL事件拥有以下一些属性和特色:

* 在MySQL5.6中, 事件根据被所指定的数据库和事件命名是唯一标识的. 
* 事件根据计划表执行一个具体的操作行为. 这个行为可以由一个SQL语句构成, 必要的话也可以是一个包含于[BEGIN...END](../Chapter_13/13.06.01_BEGIN_..._END_Compound-Statement_Syntax.md)块的复合语句(请参阅[章节13.6, “MySQL复合语句语法”](../Chapter_13/13.06.00_MySQL_Compound-Statement_Syntax.md)). 一个事件的时效既可以是一次性的, 也可以作周期性的. 一次性事件只执行一次. 周期性事件间隔特定时间重复执行. 周期性事件的计划可以指定为一个特定的开始时间或开始日期, 结束时间或结束日期. 可以同时指定, 也可以都不指定. (默认地, 周期性事件一旦被创建便开始执行, 并作无限次循环执行, 直到被指定失效或被删除).  
* 如果一个重复性事件在指定的计划间隔内并未终止, 原因可能是该事件的多个实例在同时执行. 假如这不是所期望的, 则应该引入一种防止并发的机制. 比如, 可以使用`GET_LOCK()[1296]`函数, 使用行级锁或者表级锁. 

* 用户可根据其意图, 使用SQL语句创建, 修改或删除计划事件. 因语法错误导致创建和修改语句的失败会有适当的错误信息提示. 用户可能会在事件的创建语句中包含其不具备执行权限的一些语句, 在这种情况下, 语句创建或修改会成功, 但事件的执行则失败. 详情请参阅[章节19.4.6, “事件调度器的MySQL权限”](../Chapter_19/19.04.06_The_Event_Scheduler_and_MySQL_Privileges.md). 

* 事件的许多属性可以通过SQL语句设置或修改. 这些属性包括事件的名称, 计时, 存留(即调度完成后是否保留), 状态(有效或失效), 执行动作以及指派的数据库. 请参阅[章节13.1.2, “事件修改语法”](../Chapter_13/13.01.02_ALTER_EVENT_Syntax.md). 事件的定义人是默认指事件的创建人, 直到该定义被修改时发生变更. 当修改发生时, 定义人变更为影响该事件的最后一个执行[ALTER EVENT](../Chapter_13/13.01.02_ALTER_EVENT_Syntax.md)语句的用户. 事件可以被该事件所定义的数据库上拥有`EVENT[774]`权限的任意用户修改. 请参阅[章节19.4.6, “事件调度器的MySQL权限”](../Chapter_19/19.04.06_The_Event_Scheduler_and_MySQL_Privileges.md). 

* 事件的执行语句可以包含存储程序所允许的绝大多数的SQL语句. 至于约束和限制部分, 请参阅[章节E.1, “存储程序的限制”](../Appendix_E/E.01.00_Restrictions_on_Stored_Programs.md). 
