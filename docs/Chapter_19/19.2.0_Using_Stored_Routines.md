
## 19.2. 使用存储程序(存储过程和函数)
MySQL5.6支持存储程序(包括存储过程和函数). 存储程序是一组可以保存在服务端的SQL语句. 一旦成功保存, 客户端就可以引用存储程序, 以替代对于单个语句不必要的重复的持续声明.

在mysql数据库中, 存储程序依赖于proc表. proc表在MySQL5.6安装时被创建. 如果是通过早起版本升级安装MySQL5.6, 请务必更新授权表以确保proc表的存在. 参见[章节4.4.7, “mysql_upgrade—检查和升级MySQL表”](../Chapter_04/4.4.7_mysql_upgrade—Check_and_Upgrade_MySQL_Tables.md).

对以下几种情形, 存储程序特别有用:

* 当使用不同语言编写或基于不同平台运行的多个客户端应用, 需要执行相同的数据库操作. 
* 当安全极为重要. 比如银行系统, 可以使用存储过程和函数实现常见的所有操作. 这不仅提供了一种持续安全的环境, 而且程序能确保每一步操作都有日志可被追溯. 基于这种部署, 应用程序和用户将无权对数据库表直接操作, 只能够执行存储程序.

存储程序能够提升性能, 因为更少的信息需要在客户端和服务端之间传送. 付出的代价是, 存储程序的确加重了数据库服务端的负载, 因为与客户端(应用)相比, 服务端作了更多的处理. 如果只有一台或极少数的数据库服务端为非常多的客户机(比如Web服务器)提供服务时, 这种情况需要特别关注. 

存储过程同样支持数据库服务器上的函数库. 这是现代应用语言的一个共享特性, 内部支持这样的设计(比如, 使用类). 对于程序员使用这些客户端应用语言的特性, 即使在非数据库范围内, 也会受益匪浅. 

MySQL的存储程序遵从`SQL:2003`语法, 该语法同样在IBM的DB2上被使用. 这里描述的所有语法都是支持的, 任何适当的局限和扩展都有所说明.

## 附加资源:

* 在使用存储过程和函数一起工作时, 可以查找一下[存储过程用户论坛(Stored Procedures User Forum)](http://forums.mysql.com/list.php?98). 
* MySQL中关于存储程序的常见问答, 参见[附录B.4, “MySQL5.6 FAQ: 存储过程和函数”](../Appendix_B/B.4_MySQL_5.6_FAQ_Stored_Procedures_and_Functions.md)
* 使用存储程序的限制和约束, 参见[附录E.1, “关于存储程序的限制约束”](../Appendix_E/E.1_Restrictions_on_Stored_Programs.md)
* 关于存储程序二进制日志的描述, 参见[章节19.7, “存储程序的二级制日志”](../Chapter_19/19.7.0_Binary_Logging_of_Stored_Programs.md)