## 15.4.2. EC2实例的局限性

在部署你的应用程序之前，请注意EC2实例的下面几个局限性。虽然这些不会影响你在亚马逊EC2环境部署应用的能力，但可能会改变你为支持你的应用而设置和配置环境的方式。

* 在实例中存储的数据是不持久的。在创建一个实例并对其填充数据后，这些数据仅保持在机器运行时，在机器重启时将丢失。如果你关闭实例，那么其保存的数据将会丢失。

    为了确保不丢失信息，利用[mysqldump](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html)来做定期备份。如果存储的数据是至关重要的，可以考虑利用复制来维持一个“实时”备份，以便在发生故障时使用。备份时，将数据写入到亚马逊S3服务来避免将数据复制到异地时的传输费用。

* EC2实例本身也不是持久的。如果实例运行所在的硬件发生故障，那么实例就会被关闭。这可能会导致数据或服务的丢失。
    
    不过如果你使用EBS，那么你可以将一个EBS卷附加到EC2实例上，这个EBS卷是持久的。像磁盘一样，EBS卷也有可能会出故障，但可以对这个卷创建定点快照。快照保存在亚马逊S3，并可以在卷故障时用来恢复数据。

* 如果需要将你的EC2实例复制到EC2以外的环境，请注意数据传输进出EC2服务时产生的费用。在不同的EC2实例之间的数据传输是免费的，所以在EC2环境内的复制不会产生额外费用。

* 某些HA功能EC2要么不直接支持，要么有一些限制因素可能会降低其效用。例如，DRBD和MySQL Cluster无法用于EC2。默认的数据存储配置也不是冗余的。你可以利用基于软件的RAID来提高冗余性，但这可能会带来进一步的性能损失。