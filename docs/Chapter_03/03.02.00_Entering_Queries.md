# 3.2 输入查询

## 3.2 输入查询
确保你连接上服务器，正如前面部分讨论的。连接服务器本身不会选择任何数据库进行操作，但这是可以的。这时候，知道点如何执行查询要比直接跳至建表，装载数据并且从表中检索信息重要的多。本章描述了输入查询的基本原则，使用一些查询，你可以使你自己熟悉`mysql`是如何工作的。

这里有一条请求服务器告诉你它的版本号和当前日期的简单查询。在`mysql>`提示符后面输入如下命令并按回车:
```SQL
mysql> SELECT VERSION(), CURRENT_DATE;
+--------------+--------------+
| VERSION()    | CURRENT_DATE |
+--------------+--------------+
| 5.6.1-m4-log | 2010-08-06   |
+--------------+--------------+
1 row in set (0.01 sec)
mysql>
```
这条查询阐明了关于`mysql`的几个事项：
* 一条查询一般由一条跟着分号的SQL语句组成。(也有一些例外分号被省略了。先前提到的`QUIT`就是其中一个例子。后面我们将接触其它例子。)
* 当你发出一条查询时，`mysql`将它发送给服务器执行并显示结果，然后打印另一个`mysql>`提示符表明它准备好接受其它查询。
* `mysql`以表格形式（行和列）显示查询输出。第一行包含列的标签。随后的行是查询结果。通常，列标签是你从数据库表中获取的列名。如果你正在检索一个表达式的值而不是一个表列（正如刚才展示的例子），`mysql`用表达式本身来标记列。
* `mysql`说明了返回了多少行，以及执行查询花费多长时间，这给了你一个服务器性能的粗略概念。这些值是不精确的，因为它们表示挂钟时间(不是CPU或机器时间)，还因为它们受到诸如服务器负载和网络延时等因素的影响。（简洁起见，本章剩下的例子有时不会显示“行集”。）

输入关键字不区分大小写。下列查询是等价的：
```SQL
mysql> SELECT VERSION(), CURRENT_DATE;
mysql> select version(), current_date;
mysql> SeLeCt vErSiOn(), current_DATE;
```
这是另一条查询。它证明了你可以将`mysql`当简单计算器使用：
```SQL
mysql> SELECT SIN(PI()/4), (4+1)*5;
+------------------+---------+
| SIN(PI()/4)      | (4+1)*5 |
+------------------+---------+
| 0.70710678118655 |      25 |
+------------------+---------+
1 row in set (0.02 sec)
```
截止目前显示的命令都相当简短，都是单行语句。你甚至可以在一行上输入多条语句。只需要每条语句后以分号结尾：
```SQL
mysql> SELECT VERSION(); SELECT NOW();
+--------------+
| VERSION()    |
+--------------+
| 5.6.1-m4-log |
+--------------+
1 row in set (0.00 sec)
+---------------------+
| NOW()               |
+---------------------+
| 2010-08-06 12:17:13 |
+---------------------+
1 row in set (0.00 sec)
```
一条查询不需要全在一行内给出，因此包含多行的冗长查询也不是问题。`mysql`通过寻找终止分号而不是输入行的结束来决定语句在哪儿结束。（换句话说，`mysql`接受自由格式的输入：它收集输入行但直到看见分号才执行。）

这是一个简单的多行语句：
```SQL
mysql> SELECT
-> USER()
-> ,
-> CURRENT_DATE;
+---------------+--------------+
| USER()        | CURRENT_DATE |
+---------------+--------------+
| jon@localhost | 2010-08-06   |
+---------------+--------------+
```
在这个例子中，在输入多行查询的第一行后，要注意提示符从`mysql>`变为`->`。这正是`mysql`指出它没见到完整的语句，正在等待剩下部分。提示符是你的朋友，因为它提供了有价值的反馈。如果你使用该反馈，你可以总是知道`mysql`正在等待什么。

如果你决定不想执行正在输入过程中的一条查询，输入`\c`取消它：
```SQL
mysql> SELECT
-> USER()
-> \c
mysql>
```
这里，同样要注意提示符。它在你输入`\c`以后，切回到`mysql>`，提供反馈以表明`mysql`准备好新查询。

下表显示了你可能看见的各个提示符并概述它们所表示的`mysql`的状态：

|提示符|含义|
| -----|:-------------|
|`mysql>`|	准备接受新查询|
|`->`|	等待多行查询的下一行|
|`‘>`|	等待下一行，等待以单引号(')开始的字符串的结束|
|`“>`|	等待下一行，等待以双引号(")开始的字符串的结束|
|``>`|	等待下一行，等待以反斜点(`)开始的识别符的结束|
|`/*>`|	等待下一行，等待以`/*`开始的注释的结束|

多行语句通常意外出现在当你打算在单行上发出一条查询，但却是忘了终止分号。在这种情况下，`mysql`等待进更多输入：
```SQL
mysql> SELECT USER()
->
```
如果出现这种情况（你认为输完了语句，但是唯一的响应是`->`提示符），很可能`mysql`正在等待分号。如果你没有注意到提示符给你的提示，在你意识到需要做什么之前，你可能会呆坐一会儿。输入分号来完成语句，`mysql`将执行它：
```SQL
mysql> SELECT USER()
-> ;
+---------------+
| USER()        |
+---------------+
| jon@localhost |
+---------------+
```
在字符串收集期间将出现 `'>`和 `">`提示符（另一种说法是MySQL正在等待字段串的完成）。在MySQL中，你可以写用`'`或者`"`字符括起来的字符串（举个例子，`'hello'` 或`"goodbye"`），`mysql`会让你输入跨越多行的字符串。当你看到`'>`和`">`提示符，这意味着你已经输入了一行包含以`'`或者`"`引号开头的字符串，但是还没有输入终止字符串的匹配引号。这经常表明你不经意遗漏掉了一个引号。例如：
```SQL
mysql> SELECT * FROM my_table WHERE name = 'Smith AND age < 30;
'>
```
如果你输入了`SELECT`语句，然后按下**Enter**并等待结果，什么都不会发生。不要惊讶为什么这个查询花费这么长时间，注意看`’>`提示符提供的线索。它告诉你`mysql`期望见到未终止字符串的余下部分。（你看到语句中的错误了吗？字符串`'Smith `丢失了第二个单引号。）

这时候，你做什么？最简单的做法是取消这个查询。然而，这个场景中你不能只是输入`\c`，因为`mysql`会把它解释成正在输入字符串的一部分。相反，输入那个关闭的字符（这样`mysql`知道你已经完成了这个字符串），然后输入`\c`:

```SQL
mysql> SELECT * FROM my_table WHERE name = 'Smith AND age < 30;
'>  '\c
mysql>
```

提示符变回`mysql>`，表明`mysql`准备好接受新查询。

`'> `提示符类似于 `'>`和 `">`提示符，但是表明你已经开始但没有结束以反引号识别符。

知道`'>`，`">`和 ``>`提示符的含义很重要，因为如果你错误地输入一个未终止的字符串，任何后面输入的行将要被`mysql`忽略——包括包含`QUIT`的行。这可能让人相当困惑，尤其是你在取消当前命令前还不知道需要提供终止引号。
